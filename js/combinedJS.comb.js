var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,k,h){b!=Array.prototype&&b!=Object.prototype&&(b[k]=h.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,k,h,a){if(k){h=$jscomp.global;b=b.split(".");for(a=0;a<b.length-1;a++){var f=b[a];f in h||(h[f]={});h=h[f]}b=b[b.length-1];a=h[b];k=k(a);k!=a&&null!=k&&$jscomp.defineProperty(h,b,{configurable:!0,writable:!0,value:k})}};$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},k={};try{return k.__proto__=b,k.a}catch(h){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,k){b.__proto__=k;if(b.__proto__!==k)throw new TypeError(b+" is not extensible");return b}:null;$jscomp.polyfill("Object.setPrototypeOf",function(b){return b||$jscomp.setPrototypeOf},"es6","es5");$jscomp.checkEs6ConformanceViaProxy=function(){try{var b={},k=Object.create(new $jscomp.global.Proxy(b,{get:function(h,a,f){return h==b&&"q"==a&&f==k}}));return!0===k.q}catch(h){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var b=0;return function(k){return $jscomp.SYMBOL_PREFIX+(k||"")+b++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var k=0;return $jscomp.iteratorPrototype(function(){return k<b.length?{done:!1,value:b[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();var k=b[Symbol.iterator];return k?k.call(b):$jscomp.arrayIterator(b)};$jscomp.owns=function(b,k){return Object.prototype.hasOwnProperty.call(b,k)};
$jscomp.polyfill("WeakMap",function(b){function k(){if(!b||!Object.seal)return!1;try{var a=Object.seal({}),d=Object.seal({}),f=new b([[a,2],[d,3]]);if(2!=f.get(a)||3!=f.get(d))return!1;f.delete(a);f.set(d,4);return!f.has(a)&&4==f.get(d)}catch(g){return!1}}function h(a){$jscomp.owns(a,f)||$jscomp.defineProperty(a,f,{value:{}})}function a(a){var b=Object[a];b&&(Object[a]=function(a){h(a);return b(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(k())return b;
var f="$jscomp_hidden_"+Math.random();a("freeze");a("preventExtensions");a("seal");var d=0,r=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};r.prototype.set=function(a,b){h(a);if(!$jscomp.owns(a,f))throw Error("WeakMap key fail: "+a);a[f][this.id_]=b;return this};r.prototype.get=function(a){return $jscomp.owns(a,f)?a[f][this.id_]:void 0};r.prototype.has=
function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)};r.prototype.delete=function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)?delete a[f][this.id_]:!1};return r},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(b){function k(){if($jscomp.ASSUME_NO_NATIVE_MAP||!b||"function"!=typeof b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),d=new b($jscomp.makeIterator([[a,"s"]]));if("s"!=d.get(a)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var g=d.entries(),l=g.next();if(l.done||l.value[0]!=a||"s"!=l.value[1])return!1;l=g.next();return l.done||4!=l.value[0].x||"t"!=l.value[1]||!g.next().done?!1:!0}catch(n){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(k())return b;$jscomp.initSymbol();$jscomp.initSymbolIterator();var h=new WeakMap,a=function(a){this.data_={};this.head_=r();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};a.prototype.set=function(a,b){var g=f(this,a);g.list||(g.list=this.data_[g.id]=[]);g.entry?g.entry.value=b:(g.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:a,value:b},g.list.push(g.entry),this.head_.previous.next=g.entry,this.head_.previous=g.entry,this.size++);return this};a.prototype.delete=function(a){a=f(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=r();this.size=0};a.prototype.has=function(a){return!!f(this,a).entry};
a.prototype.get=function(a){return(a=f(this,a).entry)&&a.value};a.prototype.entries=function(){return d(this,function(a){return[a.key,a.value]})};a.prototype.keys=function(){return d(this,function(a){return a.key})};a.prototype.values=function(){return d(this,function(a){return a.value})};a.prototype.forEach=function(a,b){for(var g=this.entries(),l;!(l=g.next()).done;)l=l.value,a.call(b,l[1],l[0],this)};a.prototype[Symbol.iterator]=a.prototype.entries;var f=function(a,b){var g=b&&typeof b;"object"==
g||"function"==g?h.has(b)?g=h.get(b):(g=""+ ++u,h.set(b,g)):g="p_"+b;var l=a.data_[g];if(l&&$jscomp.owns(a.data_,g))for(a=0;a<l.length;a++){var d=l[a];if(b!==b&&d.key!==d.key||b===d.key)return{id:g,list:l,index:a,entry:d}}return{id:g,list:l,index:-1,entry:void 0}},d=function(a,b){var g=a.head_;return $jscomp.iteratorPrototype(function(){if(g){for(;g.head!=a.head_;)g=g.previous;for(;g.next!=g.head;)return g=g.next,{done:!1,value:b(g)};g=null}return{done:!0,value:void 0}})},r=function(){var a={};return a.previous=
a.next=a.head=a},u=0;return a},"es6","es3");
$jscomp.polyfill("Set",function(b){function k(){if($jscomp.ASSUME_NO_NATIVE_SET||!b||"function"!=typeof b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),f=new b($jscomp.makeIterator([a]));if(!f.has(a)||1!=f.size||f.add(a)!=f||1!=f.size||f.add({x:4})!=f||2!=f.size)return!1;var d=f.entries(),h=d.next();if(h.done||h.value[0]!=a||h.value[1]!=a)return!1;h=d.next();return h.done||h.value[0]==a||4!=h.value[0].x||h.value[1]!=h.value[0]?!1:d.next().done}catch(u){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(k())return b;$jscomp.initSymbol();$jscomp.initSymbolIterator();var h=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.map_.size};h.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};h.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};h.prototype.clear=function(){this.map_.clear();
this.size=0};h.prototype.has=function(a){return this.map_.has(a)};h.prototype.entries=function(){return this.map_.entries()};h.prototype.values=function(){return this.map_.values()};h.prototype.keys=h.prototype.values;h.prototype[Symbol.iterator]=h.prototype.values;h.prototype.forEach=function(a,b){var d=this;this.map_.forEach(function(f){return a.call(b,f,f,d)})};return h},"es6","es3");
$jscomp.findInternal=function(b,k,h){b instanceof String&&(b=String(b));for(var a=b.length,f=0;f<a;f++){var d=b[f];if(k.call(h,d,f,b))return{i:f,v:d}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,h){return $jscomp.findInternal(this,b,h).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(b,h,a){var f=this.length||0;0>h&&(h=Math.max(0,f+h));if(null==a||a>f)a=f;a=Number(a);0>a&&(a=Math.max(0,f+a));for(h=Number(h||0);h<a;h++)this[h]=b;return this}},"es6","es3");$jscomp.polyfill("Object.is",function(b){return b?b:function(b,h){return b===h?0!==b||1/b===1/h:b!==b&&h!==h}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(b){return b?b:function(b,h){var a=this;a instanceof String&&(a=String(a));var f=a.length;for(h=h||0;h<f;h++)if(a[h]==b||Object.is(a[h],b))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(b,k,h){if(null==b)throw new TypeError("The 'this' value for String.prototype."+h+" must not be null or undefined");if(k instanceof RegExp)throw new TypeError("First argument to String.prototype."+h+" must not be a regular expression");return b+""};$jscomp.polyfill("String.prototype.includes",function(b){return b?b:function(b,h){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,h||0)}},"es6","es3");
$jscomp.iteratorFromArray=function(b,k){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var h=0,a={next:function(){if(h<b.length){var f=h++;return{value:k(f,b[f]),done:!1}}a.next=function(){return{done:!0,value:void 0}};return a.next()}};a[Symbol.iterator]=function(){return a};return a};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");
SSHyClient={MSG_DISCONNECT:1,MSG_IGNORE:2,MSG_UNIMPLEMENTED:3,MSG_DEBUG:4,MSG_SERVICE_REQUEST:5,MSG_SERVICE_ACCEPT:6,MSG_KEX_INIT:20,MSG_NEW_KEYS:21,MSG_KEXDH_INIT:30,MSG_KEXDH_GEX_GROUP:31,MSG_KEXDH_GEX_INIT:32,MSG_KEXDH_GEX_REPLY:33,MSG_KEXDH_GEX_REQUEST:34,MSG_USERAUTH_REQUEST:50,MSG_USERAUTH_FAILURE:51,MSG_USERAUTH_SUCCESS:52,MSG_USERAUTH_BANNER:53,MSG_GLOBAL_REQUEST:80,MSG_REQUEST_SUCCESS:81,MSG_REQUEST_FAILURE:82,MSG_CHANNEL_OPEN:90,MSG_CHANNEL_OPEN_SUCCESS:91,MSG_CHANNEL_OPEN_FAILURE:92,MSG_CHANNEL_WINDOW_ADJUST:93,
MSG_CHANNEL_DATA:94,MSG_CHANNEL_EXTENDED_DATA:95,MSG_CHANNEL_EOF:96,MSG_CHANNEL_CLOSE:97,MSG_CHANNEL_REQUEST:98,MSG_CHANNEL_SUCCESS:99,MSG_CHANNEL_FAILURE:100,WINDOW_SIZE:40674,MAX_PACKET_SIZE:16384,AES_CBC:2,AES_CTR:6,fishFsHintLeave:"\u001b[32",bashFsHintLeave:"\u001b]0;"};sjcl={cipher:{}};
sjcl.cipher.aes=function(b,k){this._tables[0][0][0]||this._precompute();this.mode=k;var h,a,f=this._tables[0][4],d=this._tables[1];k=b.length;var r=1;if(4!==k&&6!==k&&8!==k)throw"invalid aes key size";this._key=[h=b.slice(0),a=[]];for(b=k;b<4*k+28;b++){var u=h[b-1];if(0===b%k||8===k&&4===b%k)u=f[u>>>24]<<24^f[u>>16&255]<<16^f[u>>8&255]<<8^f[u&255],0===b%k&&(u=u<<8^u>>>24^r<<24,r=r<<1^283*(r>>7));h[b]=h[b-k]^u}for(k=0;b;k++,b--)u=h[k&3?b:b-4],a[k]=4>=b||4>k?u:d[0][f[u>>>24]]^d[1][f[u>>16&255]]^d[2][f[u>>
8&255]]^d[3][f[u&255]]};sjcl.cipher.aes.MODE_CBC=2;sjcl.cipher.aes.MODE_CTR=6;
sjcl.cipher.aes.prototype={encrypt:function(b,k,h){k=this.mode==sjcl.cipher.aes.MODE_CBC?k:[];for(var a=[],f=0;f<b.length/16;f++){var d=b.slice(16*f,16*(f+1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var r=0;16>r;r++)d[r]^=k[r];k=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(d),0))}else for(k=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(toByteArray(h.increment())),0)),r=0;16>r;r++)k[r]^=d[r];a=a.concat(k)}return a},decrypt:function(b,k){for(var h=[],a=0;a<b.length/
16;a++){var f=b.slice(16*a,16*(a+1));ct=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(f),1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var d=0;16>d;d++)ct[d]^=k[d];k=f}h=h.concat(ct)}return h},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var b=this._tables[0],k=this._tables[1],h=b[4],a=k[4],f,d,r,u=[],q=[],t;for(f=0;256>f;f++)q[(u[f]=f<<1^283*(f>>7))^f]=f;for(d=r=0;!h[d];d^=t||1,r=q[r]||1){var g=r^r<<1^r<<2^r<<3^r<<4;g=g>>8^g&255^99;h[d]=g;a[g]=d;var l=u[f=
u[t=u[d]]];var n=16843009*l^65537*f^257*t^16843008*d;l=257*u[g]^16843008*g;for(f=0;4>f;f++)b[f][d]=l=l<<24^l>>>8,k[f][g]=n=n<<24^n>>>8}for(f=0;5>f;f++)b[f]=b[f].slice(0),k[f]=k[f].slice(0)},_crypt:function(b,k){if(4!==b.length)throw"invalid aes block size";var h=this._key[k],a=b[0]^h[0],f=b[k?3:1]^h[1],d=b[2]^h[2];b=b[k?1:3]^h[3];var r=h.length/4-2,u,q=4,t=[0,0,0,0];var g=this._tables[k];var l=g[0],n=g[1],m=g[2],c=g[3],e=g[4];for(u=0;u<r;u++){g=l[a>>>24]^n[f>>16&255]^m[d>>8&255]^c[b&255]^h[q];var v=
l[f>>>24]^n[d>>16&255]^m[b>>8&255]^c[a&255]^h[q+1];var w=l[d>>>24]^n[b>>16&255]^m[a>>8&255]^c[f&255]^h[q+2];b=l[b>>>24]^n[a>>16&255]^m[f>>8&255]^c[d&255]^h[q+3];q+=4;a=g;f=v;d=w}for(u=0;4>u;u++)t[k?3&-u:u]=e[a>>>24]<<24^e[f>>16&255]<<16^e[d>>8&255]<<8^e[b&255]^h[q++],g=a,a=f,f=d,d=b,b=g;return t}};sjcl.codec={};
sjcl.codec.bytes={fromBits:function(b){var k=[],h=sjcl.bitArray.bitLength(b),a,f;for(a=0;a<h/8;a++)0===(a&3)&&(f=b[a/4]),k.push(f>>>24),f<<=8;return k},toBits:function(b){var k=[],h,a=0;for(h=0;h<b.length;h++)a=a<<8|b[h],3===(h&3)&&(k.push(a),a=0);h&3&&k.push(sjcl.bitArray.partial(8*(h&3),a));return k}};
sjcl.bitArray={bitLength:function(b){var k=b.length;return 0===k?0:32*(k-1)+sjcl.bitArray.getPartial(b[k-1])},partial:function(b,k,h){return 32===b?k:(h?k|0:k<<32-b)+1099511627776*b},getPartial:function(b){return Math.round(b/1099511627776)||32}};var BigInteger=function(){function b(a,e,b){null!=a&&("number"==typeof a?this.fromNumber(a,e,b):null==e&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,e))}function k(){return new b(null)}function h(a,e,b,c,m,l){for(;0<=--l;){var g=e*this[a++]+b[c]+m;m=Math.floor(g/67108864);b[c++]=g&67108863}return m}function a(a,e,b,c,m,g){var l=e&32767;for(e>>=15;0<=--g;){var d=this[a]&32767,n=this[a++]>>15,v=e*d+n*l;d=l*d+((v&32767)<<15)+b[c]+(m&1073741823);m=(d>>>30)+(v>>>15)+e*n+(m>>>30);b[c++]=
d&1073741823}return m}function f(a,e,b,c,m,l){var g=e&16383;for(e>>=14;0<=--l;){var d=this[a]&16383,n=this[a++]>>14,v=e*d+n*g;d=g*d+((v&16383)<<14)+b[c]+m;m=(d>>28)+(v>>14)+e*n;b[c++]=d&268435455}return m}function d(a,e){a=z[a.charCodeAt(e)];return null==a?-1:a}function r(a){var e=k();e.fromInt(a);return e}function u(a){var e=1,b;0!=(b=a>>>16)&&(a=b,e+=16);0!=(b=a>>8)&&(a=b,e+=8);0!=(b=a>>4)&&(a=b,e+=4);0!=(b=a>>2)&&(a=b,e+=2);0!=a>>1&&(e+=1);return e}function q(a){this.m=a}function t(a){this.m=a;
this.mp=a.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<a.DB-15)-1;this.mt2=2*a.t}function g(a,e){return a&e}function l(a,e){return a|e}function n(a,e){return a^e}function m(a,e){return a&~e}function c(){}function e(a){return a}function v(a){this.r2=k();this.q3=k();b.ONE.dlShiftTo(2*a.t,this.r2);this.mu=this.r2.divide(a);this.m=a}var w;"Microsoft Internet Explorer"==navigator.appName?(b.prototype.am=a,w=30):"Netscape"!=navigator.appName?(b.prototype.am=h,w=26):(b.prototype.am=
f,w=28);b.prototype.DB=w;b.prototype.DM=(1<<w)-1;b.prototype.DV=1<<w;b.prototype.FV=Math.pow(2,52);b.prototype.F1=52-w;b.prototype.F2=2*w-52;var z=[],y;w=48;for(y=0;9>=y;++y)z[w++]=y;w=97;for(y=10;36>y;++y)z[w++]=y;w=65;for(y=10;36>y;++y)z[w++]=y;q.prototype.convert=function(a){return 0>a.s||0<=a.compareTo(this.m)?a.mod(this.m):a};q.prototype.revert=function(a){return a};q.prototype.reduce=function(a){a.divRemTo(this.m,null,a)};q.prototype.mulTo=function(a,e,b){a.multiplyTo(e,b);this.reduce(b)};q.prototype.sqrTo=
function(a,e){a.squareTo(e);this.reduce(e)};t.prototype.convert=function(a){var e=k();a.abs().dlShiftTo(this.m.t,e);e.divRemTo(this.m,null,e);0>a.s&&0<e.compareTo(b.ZERO)&&this.m.subTo(e,e);return e};t.prototype.revert=function(a){var e=k();a.copyTo(e);this.reduce(e);return e};t.prototype.reduce=function(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var e=0;e<this.m.t;++e){var b=a[e]&32767,c=b*this.mpl+((b*this.mph+(a[e]>>15)*this.mpl&this.um)<<15)&a.DM;b=e+this.m.t;for(a[b]+=this.m.am(0,c,a,e,0,this.m.t);a[b]>=
a.DV;)a[b]-=a.DV,a[++b]++}a.clamp();a.drShiftTo(this.m.t,a);0<=a.compareTo(this.m)&&a.subTo(this.m,a)};t.prototype.mulTo=function(a,e,b){a.multiplyTo(e,b);this.reduce(b)};t.prototype.sqrTo=function(a,e){a.squareTo(e);this.reduce(e)};b.prototype.copyTo=function(a){for(var e=this.t-1;0<=e;--e)a[e]=this[e];a.t=this.t;a.s=this.s};b.prototype.fromInt=function(a){this.t=1;this.s=0>a?-1:0;0<a?this[0]=a:-1>a?this[0]=a+DV:this.t=0};b.prototype.fromString=function(a,e){if(16==e)e=4;else if(8==e)e=3;else if(256==
e)e=8;else if(2==e)e=1;else if(32==e)e=5;else if(4==e)e=2;else{this.fromRadix(a,e);return}this.s=this.t=0;for(var c=a.length,m=!1,g=0;0<=--c;){var l=8==e?a[c]&255:d(a,c);0>l?"-"==a.charAt(c)&&(m=!0):(m=!1,0==g?this[this.t++]=l:g+e>this.DB?(this[this.t-1]|=(l&(1<<this.DB-g)-1)<<g,this[this.t++]=l>>this.DB-g):this[this.t-1]|=l<<g,g+=e,g>=this.DB&&(g-=this.DB))}8==e&&0!=(a[0]&128)&&(this.s=-1,0<g&&(this[this.t-1]|=(1<<this.DB-g)-1<<g));this.clamp();m&&b.ZERO.subTo(this,this)};b.prototype.clamp=function(){for(var a=
this.s&this.DM;0<this.t&&this[this.t-1]==a;)--this.t};b.prototype.dlShiftTo=function(a,e){var b;for(b=this.t-1;0<=b;--b)e[b+a]=this[b];for(b=a-1;0<=b;--b)e[b]=0;e.t=this.t+a;e.s=this.s};b.prototype.drShiftTo=function(a,e){for(var b=a;b<this.t;++b)e[b-a]=this[b];e.t=Math.max(this.t-a,0);e.s=this.s};b.prototype.lShiftTo=function(a,e){var b=a%this.DB,c=this.DB-b,m=(1<<c)-1;a=Math.floor(a/this.DB);var g=this.s<<b&this.DM,l;for(l=this.t-1;0<=l;--l)e[l+a+1]=this[l]>>c|g,g=(this[l]&m)<<b;for(l=a-1;0<=l;--l)e[l]=
0;e[a]=g;e.t=this.t+a+1;e.s=this.s;e.clamp()};b.prototype.rShiftTo=function(a,e){e.s=this.s;var b=Math.floor(a/this.DB);if(b>=this.t)e.t=0;else{a%=this.DB;var c=this.DB-a,m=(1<<a)-1;e[0]=this[b]>>a;for(var g=b+1;g<this.t;++g)e[g-b-1]|=(this[g]&m)<<c,e[g-b]=this[g]>>a;0<a&&(e[this.t-b-1]|=(this.s&m)<<c);e.t=this.t-b;e.clamp()}};b.prototype.subTo=function(a,e){for(var b=0,c=0,g=Math.min(a.t,this.t);b<g;)c+=this[b]-a[b],e[b++]=c&this.DM,c>>=this.DB;if(a.t<this.t){for(c-=a.s;b<this.t;)c+=this[b],e[b++]=
c&this.DM,c>>=this.DB;c+=this.s}else{for(c+=this.s;b<a.t;)c-=a[b],e[b++]=c&this.DM,c>>=this.DB;c-=a.s}e.s=0>c?-1:0;-1>c?e[b++]=this.DV+c:0<c&&(e[b++]=c);e.t=b;e.clamp()};b.prototype.multiplyTo=function(a,e){var c=this.abs(),g=a.abs(),m=c.t;for(e.t=m+g.t;0<=--m;)e[m]=0;for(m=0;m<g.t;++m)e[m+c.t]=c.am(0,g[m],e,m,0,c.t);e.s=0;e.clamp();this.s!=a.s&&b.ZERO.subTo(e,e)};b.prototype.squareTo=function(a){for(var e=this.abs(),b=a.t=2*e.t;0<=--b;)a[b]=0;for(b=0;b<e.t-1;++b){var c=e.am(b,e[b],a,2*b,0,1);(a[b+
e.t]+=e.am(b+1,2*e[b],a,2*b+1,c,e.t-b-1))>=e.DV&&(a[b+e.t]-=e.DV,a[b+e.t+1]=1)}0<a.t&&(a[a.t-1]+=e.am(b,e[b],a,2*b,0,1));a.s=0;a.clamp()};b.prototype.divRemTo=function(a,e,c){var m=a.abs();if(!(0>=m.t)){var g=this.abs();if(g.t<m.t)null!=e&&e.fromInt(0),null!=c&&this.copyTo(c);else{null==c&&(c=k());var l=k(),d=this.s;a=a.s;var n=this.DB-u(m[m.t-1]);0<n?(m.lShiftTo(n,l),g.lShiftTo(n,c)):(m.copyTo(l),g.copyTo(c));m=l.t;g=l[m-1];if(0!=g){var v=g*(1<<this.F1)+(1<m?l[m-2]>>this.F2:0),f=this.FV/v;v=(1<<
this.F1)/v;var w=1<<this.F2,t=c.t,h=t-m,r=null==e?k():e;l.dlShiftTo(h,r);0<=c.compareTo(r)&&(c[c.t++]=1,c.subTo(r,c));b.ONE.dlShiftTo(m,r);for(r.subTo(l,l);l.t<m;)l[l.t++]=0;for(;0<=--h;){var B=c[--t]==g?this.DM:Math.floor(c[t]*f+(c[t-1]+w)*v);if((c[t]+=l.am(0,B,c,h,0,m))<B)for(l.dlShiftTo(h,r),c.subTo(r,c);c[t]<--B;)c.subTo(r,c)}null!=e&&(c.drShiftTo(m,e),d!=a&&b.ZERO.subTo(e,e));c.t=m;c.clamp();0<n&&c.rShiftTo(n,c);0>d&&b.ZERO.subTo(c,c)}}}};b.prototype.invDigit=function(){if(1>this.t)return 0;
var a=this[0];if(0==(a&1))return 0;var e=a&3;e=e*(2-(a&15)*e)&15;e=e*(2-(a&255)*e)&255;e=e*(2-((a&65535)*e&65535))&65535;e=e*(2-a*e%this.DV)%this.DV;return 0<e?this.DV-e:-e};b.prototype.isEven=function(){return 0==(0<this.t?this[0]&1:this.s)};b.prototype.exp=function(a,e){if(4294967295<a||1>a)return b.ONE;var c=k(),m=k(),g=e.convert(this),l=u(a)-1;for(g.copyTo(c);0<=--l;)if(e.sqrTo(c,m),0<(a&1<<l))e.mulTo(m,g,c);else{var d=c;c=m;m=d}return e.revert(c)};b.prototype.toString=function(a){if(0>this.s)return"-"+
this.negate().toString(a);if(16==a)a=4;else if(8==a)a=3;else if(2==a)a=1;else if(32==a)a=5;else if(4==a)a=2;else return this.toRadix(a);var e=(1<<a)-1,b,c=!1,m="",g=this.t,l=this.DB-g*this.DB%a;if(0<g--)for(l<this.DB&&0<(b=this[g]>>l)&&(c=!0,m="0123456789abcdefghijklmnopqrstuvwxyz".charAt(b));0<=g;)l<a?(b=(this[g]&(1<<l)-1)<<a-l,b|=this[--g]>>(l+=this.DB-a)):(b=this[g]>>(l-=a)&e,0>=l&&(l+=this.DB,--g)),0<b&&(c=!0),c&&(m+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(b));return c?m:"0"};b.prototype.negate=
function(){var a=k();b.ZERO.subTo(this,a);return a};b.prototype.abs=function(){return 0>this.s?this.negate():this};b.prototype.compareTo=function(a){var e=this.s-a.s;if(0!=e)return e;var b=this.t;e=b-a.t;if(0!=e)return e;for(;0<=--b;)if(0!=(e=this[b]-a[b]))return e;return 0};b.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+u(this[this.t-1]^this.s&this.DM)};b.prototype.mod=function(a){var e=k();this.abs().divRemTo(a,null,e);0>this.s&&0<e.compareTo(b.ZERO)&&a.subTo(e,e);return e};
b.prototype.modPowInt=function(a,e){e=256>a||e.isEven()?new q(e):new t(e);return this.exp(a,e)};b.ZERO=r(0);b.ONE=r(1);c.prototype.convert=e;c.prototype.revert=e;c.prototype.mulTo=function(a,e,b){a.multiplyTo(e,b)};c.prototype.sqrTo=function(a,e){a.squareTo(e)};v.prototype.convert=function(a){if(0>a.s||a.t>2*this.m.t)return a.mod(this.m);if(0>a.compareTo(this.m))return a;var e=k();a.copyTo(e);this.reduce(e);return e};v.prototype.revert=function(a){return a};v.prototype.reduce=function(a){a.drShiftTo(this.m.t-
1,this.r2);a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp());this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>a.compareTo(this.r2);)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);0<=a.compareTo(this.m);)a.subTo(this.m,a)};v.prototype.mulTo=function(a,e,b){a.multiplyTo(e,b);this.reduce(b)};v.prototype.sqrTo=function(a,e){a.squareTo(e);this.reduce(e)};var x=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,
113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],F=67108864/x[x.length-1];b.prototype.chunkSize=function(a){return Math.floor(Math.LN2*this.DB/Math.log(a))};b.prototype.toRadix=function(a){null==a&&(a=10);if(0==this.signum()||2>a||36<a)return"0";var e=this.chunkSize(a);e=Math.pow(a,
e);var b=r(e),c=k(),m=k(),g="";for(this.divRemTo(b,c,m);0<c.signum();)g=(e+m.intValue()).toString(a).substr(1)+g,c.divRemTo(b,c,m);return m.intValue().toString(a)+g};b.prototype.fromRadix=function(a,e){this.fromInt(0);null==e&&(e=10);for(var c=this.chunkSize(e),m=Math.pow(e,c),g=!1,l=0,n=0,v=0;v<a.length;++v){var f=d(a,v);0>f?"-"==a.charAt(v)&&0==this.signum()&&(g=!0):(n=e*n+f,++l>=c&&(this.dMultiply(m),this.dAddOffset(n,0),n=l=0))}0<l&&(this.dMultiply(Math.pow(e,l)),this.dAddOffset(n,0));g&&b.ZERO.subTo(this,
this)};b.prototype.fromNumber=function(a,e,c){if("number"==typeof e)if(2>a)this.fromInt(1);else for(this.fromNumber(a,c),this.testBit(a-1)||this.bitwiseTo(b.ONE.shiftLeft(a-1),l,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(b.ONE.shiftLeft(a-1),this);else{c=[];var m=a&7;c.length=(a>>3)+1;e.nextBytes(c);c[0]=0<m?c[0]&(1<<m)-1:0;this.fromString(c,256)}};b.prototype.bitwiseTo=function(a,e,b){var c,m=Math.min(a.t,this.t);for(c=
0;c<m;++c)b[c]=e(this[c],a[c]);if(a.t<this.t){var g=a.s&this.DM;for(c=m;c<this.t;++c)b[c]=e(this[c],g);b.t=this.t}else{g=this.s&this.DM;for(c=m;c<a.t;++c)b[c]=e(g,a[c]);b.t=a.t}b.s=e(this.s,a.s);b.clamp()};b.prototype.changeBit=function(a,e){a=b.ONE.shiftLeft(a);this.bitwiseTo(a,e,a);return a};b.prototype.addTo=function(a,e){for(var b=0,c=0,m=Math.min(a.t,this.t);b<m;)c+=this[b]+a[b],e[b++]=c&this.DM,c>>=this.DB;if(a.t<this.t){for(c+=a.s;b<this.t;)c+=this[b],e[b++]=c&this.DM,c>>=this.DB;c+=this.s}else{for(c+=
this.s;b<a.t;)c+=a[b],e[b++]=c&this.DM,c>>=this.DB;c+=a.s}e.s=0>c?-1:0;0<c?e[b++]=c:-1>c&&(e[b++]=this.DV+c);e.t=b;e.clamp()};b.prototype.dMultiply=function(a){this[this.t]=this.am(0,a-1,this,0,0,this.t);++this.t;this.clamp()};b.prototype.dAddOffset=function(a,e){if(0!=a){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=a;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}};b.prototype.multiplyLowerTo=function(a,e,b){var c=Math.min(this.t+a.t,e);b.s=0;for(b.t=c;0<c;)b[--c]=
0;var m;for(m=b.t-this.t;c<m;++c)b[c+this.t]=this.am(0,a[c],b,c,0,this.t);for(m=Math.min(a.t,e);c<m;++c)this.am(0,a[c],b,c,0,e-c);b.clamp()};b.prototype.multiplyUpperTo=function(a,e,b){--e;var c=b.t=this.t+a.t-e;for(b.s=0;0<=--c;)b[c]=0;for(c=Math.max(e-this.t,0);c<a.t;++c)b[this.t+c-e]=this.am(e-c,a[c],b,0,0,this.t+c-e);b.clamp();b.drShiftTo(1,b)};b.prototype.modInt=function(a){if(0>=a)return 0;var e=this.DV%a,b=0>this.s?a-1:0;if(0<this.t)if(0==e)b=this[0]%a;else for(var c=this.t-1;0<=c;--c)b=(e*
b+this[c])%a;return b};b.prototype.millerRabin=function(a){var e=this.subtract(b.ONE),c=e.getLowestSetBit();if(0>=c)return!1;var m=e.shiftRight(c);a=a+1>>1;a>x.length&&(a=x.length);for(var g=k(),l=0;l<a;++l){g.fromInt(x[l]);var d=g.modPow(m,this);if(0!=d.compareTo(b.ONE)&&0!=d.compareTo(e)){for(var n=1;n++<c&&0!=d.compareTo(e);)if(d=d.modPowInt(2,this),0==d.compareTo(b.ONE))return!1;if(0!=d.compareTo(e))return!1}}return!0};b.prototype.clone=function(){var a=k();this.copyTo(a);return a};b.prototype.intValue=
function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]};b.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24};b.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16};b.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1};b.prototype.toByteArray=function(){var a=this.t,e=[];e[0]=this.s;var b=this.DB-
a*this.DB%8,c,m=0;if(0<a--)for(b<this.DB&&(c=this[a]>>b)!=(this.s&this.DM)>>b&&(e[m++]=c|this.s<<this.DB-b);0<=a;)if(8>b?(c=(this[a]&(1<<b)-1)<<8-b,c|=this[--a]>>(b+=this.DB-8)):(c=this[a]>>(b-=8)&255,0>=b&&(b+=this.DB,--a)),0!=(c&128)&&(c|=-256),0==m&&(this.s&128)!=(c&128)&&++m,0<m||c!=this.s)e[m++]=c;return e};b.prototype.equals=function(a){return 0==this.compareTo(a)};b.prototype.min=function(a){return 0>this.compareTo(a)?this:a};b.prototype.max=function(a){return 0<this.compareTo(a)?this:a};b.prototype.and=
function(a){var e=k();this.bitwiseTo(a,g,e);return e};b.prototype.or=function(a){var e=k();this.bitwiseTo(a,l,e);return e};b.prototype.xor=function(a){var e=k();this.bitwiseTo(a,n,e);return e};b.prototype.andNot=function(a){var e=k();this.bitwiseTo(a,m,e);return e};b.prototype.not=function(){for(var a=k(),e=0;e<this.t;++e)a[e]=this.DM&~this[e];a.t=this.t;a.s=~this.s;return a};b.prototype.shiftLeft=function(a){var e=k();0>a?this.rShiftTo(-a,e):this.lShiftTo(a,e);return e};b.prototype.shiftRight=function(a){var e=
k();0>a?this.lShiftTo(-a,e):this.rShiftTo(a,e);return e};b.prototype.getLowestSetBit=function(){for(var a=0;a<this.t;++a)if(0!=this[a]){var e=a*this.DB;a=this[a];if(0==a)a=-1;else{var b=0;0==(a&65535)&&(a>>=16,b+=16);0==(a&255)&&(a>>=8,b+=8);0==(a&15)&&(a>>=4,b+=4);0==(a&3)&&(a>>=2,b+=2);0==(a&1)&&++b;a=b}return e+a}return 0>this.s?this.t*this.DB:-1};b.prototype.bitCount=function(){for(var a=0,e=this.s&this.DM,b=0;b<this.t;++b){for(var c=this[b]^e,m=0;0!=c;)c&=c-1,++m;a+=m}return a};b.prototype.testBit=
function(a){var e=Math.floor(a/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<a%this.DB)};b.prototype.setBit=function(a){return this.changeBit(a,l)};b.prototype.clearBit=function(a){return this.changeBit(a,m)};b.prototype.flipBit=function(a){return this.changeBit(a,n)};b.prototype.add=function(a){var e=k();this.addTo(a,e);return e};b.prototype.subtract=function(a){var e=k();this.subTo(a,e);return e};b.prototype.multiply=function(a){var e=k();this.multiplyTo(a,e);return e};b.prototype.divide=function(a){var e=
k();this.divRemTo(a,e,null);return e};b.prototype.remainder=function(a){var e=k();this.divRemTo(a,null,e);return e};b.prototype.divideAndRemainder=function(a){var e=k(),b=k();this.divRemTo(a,e,b);return[e,b]};b.prototype.modPow=function(a,e){var b=a.bitLength(),c=r(1);if(0>=b)return c;var m=18>b?1:48>b?3:144>b?4:768>b?5:6;e=8>b?new q(e):e.isEven()?new v(e):new t(e);var g=[],l=3,d=m-1,n=(1<<m)-1;g[1]=e.convert(this);if(1<m)for(b=k(),e.sqrTo(g[1],b);l<=n;)g[l]=k(),e.mulTo(b,g[l-2],g[l]),l+=2;var f=
a.t-1,w,h=!0,x=k();for(b=u(a[f])-1;0<=f;){b>=d?w=a[f]>>b-d&n:(w=(a[f]&(1<<b+1)-1)<<d-b,0<f&&(w|=a[f-1]>>this.DB+b-d));for(l=m;0==(w&1);)w>>=1,--l;0>(b-=l)&&(b+=this.DB,--f);if(h)g[w].copyTo(c),h=!1;else{for(;1<l;)e.sqrTo(c,x),e.sqrTo(x,c),l-=2;0<l?e.sqrTo(c,x):(l=c,c=x,x=l);e.mulTo(x,g[w],c)}for(;0<=f&&0==(a[f]&1<<b);)e.sqrTo(c,x),l=c,c=x,x=l,0>--b&&(b=this.DB-1,--f)}return e.revert(c)};b.prototype.modInverse=function(a){var e=a.isEven();if(this.isEven()&&e||0==a.signum())return b.ZERO;for(var c=
a.clone(),m=this.clone(),g=r(1),l=r(0),d=r(0),n=r(1);0!=c.signum();){for(;c.isEven();)c.rShiftTo(1,c),e?(g.isEven()&&l.isEven()||(g.addTo(this,g),l.subTo(a,l)),g.rShiftTo(1,g)):l.isEven()||l.subTo(a,l),l.rShiftTo(1,l);for(;m.isEven();)m.rShiftTo(1,m),e?(d.isEven()&&n.isEven()||(d.addTo(this,d),n.subTo(a,n)),d.rShiftTo(1,d)):n.isEven()||n.subTo(a,n),n.rShiftTo(1,n);0<=c.compareTo(m)?(c.subTo(m,c),e&&g.subTo(d,g),l.subTo(n,l)):(m.subTo(c,m),e&&d.subTo(g,d),n.subTo(l,n))}if(0!=m.compareTo(b.ONE))return b.ZERO;
if(0<=n.compareTo(a))return n.subtract(a);if(0>n.signum())n.addTo(a,n);else return n;return 0>n.signum()?n.add(a):n};b.prototype.pow=function(a){return this.exp(a,new c)};b.prototype.gcd=function(a){var e=0>this.s?this.negate():this.clone();a=0>a.s?a.negate():a.clone();if(0>e.compareTo(a)){var b=e;e=a;a=b}b=e.getLowestSetBit();var c=a.getLowestSetBit();if(0>c)return e;b<c&&(c=b);for(0<c&&(e.rShiftTo(c,e),a.rShiftTo(c,a));0<e.signum();)0<(b=e.getLowestSetBit())&&e.rShiftTo(b,e),0<(b=a.getLowestSetBit())&&
a.rShiftTo(b,a),0<=e.compareTo(a)?(e.subTo(a,e),e.rShiftTo(1,e)):(a.subTo(e,a),a.rShiftTo(1,a));0<c&&a.lShiftTo(c,a);return a};b.prototype.isProbablePrime=function(a){var e,b=this.abs();if(1==b.t&&b[0]<=x[x.length-1]){for(e=0;e<x.length;++e)if(b[0]==x[e])return!0;return!1}if(b.isEven())return!1;for(e=1;e<x.length;){for(var c=x[e],m=e+1;m<x.length&&c<F;)c*=x[m++];for(c=b.modInt(c);e<m;)if(0==c%x[e++])return!1}return b.millerRabin(a)};return{BigInteger:b}}();BigInteger=BigInteger.BigInteger;SSHyClient.hash={};SSHyClient.hash.SHA1=function(b){this.data=b||"";this.digest_size=20};
SSHyClient.hash.SHA1.prototype={digest:function(){var b=toByteArray(this.data),k=bytesToWords(b),h=8*b.length;b=[];var a=1732584193,f=-271733879,d=-1732584194,r=271733878,u=-1009589776;k[h>>5]|=128<<24-h%32;k[(h+64>>>9<<4)+15]=h;for(h=0;h<k.length;h+=16){for(var q=a,t=f,g=d,l=r,n=u,m=0;80>m;m++){if(16>m)b[m]=k[h+m];else{var c=b[m-3]^b[m-8]^b[m-14]^b[m-16];b[m]=c<<1|c>>>31}c=(a<<5|a>>>27)+u+(b[m]>>>0)+(20>m?(f&d|~f&r)+1518500249:40>m?(f^d^r)+1859775393:60>m?(f&d|f&r|d&r)-1894007588:(f^d^r)-899497514);
u=r;r=d;d=f<<30|f>>>2;f=a;a=c}a+=q;f+=t;d+=g;r+=l;u+=n}return fromByteArray(wordsToBytes([a,f,d,r,u]))}};SSHyClient.hash.SHA256=function(b){this.data=b||"";this.digest_size=32};
SSHyClient.hash.SHA256.prototype={digest:function(){var b=toByteArray(this.data),k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,
2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=bytesToWords(b),a=8*b.length;b=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];var f=[],d,r;h[a>>5]|=128<<24-a%32;h[(a+64>>9<<4)+15]=a;for(d=0;d<h.length;d+=16){a=b[0];var u=b[1];var q=b[2];
var t=b[3];var g=b[4];var l=b[5];var n=b[6];var m=b[7];for(r=0;64>r;r++){if(16>r)f[r]=h[r+d];else{var c=f[r-15];var e=f[r-2];f[r]=((c<<25|c>>>7)^(c<<14|c>>>18)^c>>>3)+(f[r-7]>>>0)+((e<<15|e>>>17)^(e<<13|e>>>19)^e>>>10)+(f[r-16]>>>0)}e=a&u^a&q^u&q;var v=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22);c=(m>>>0)+((g<<26|g>>>6)^(g<<21|g>>>11)^(g<<7|g>>>25))+(g&l^~g&n)+k[r]+(f[r]>>>0);e=v+e;m=n;n=l;l=g;g=t+c>>>0;t=q;q=u;u=a;a=c+e>>>0}b[0]+=a;b[1]+=u;b[2]+=q;b[3]+=t;b[4]+=g;b[5]+=l;b[6]+=n;b[7]+=m}return fromByteArray(wordsToBytes(b))}};
SSHyClient.hash.HMAC=function(b,k,h){h=digestmod="SHA-1"==h?SSHyClient.hash.SHA1:SSHyClient.hash.SHA256;var a=new h,f=new h;64<b.length&&(b=(new h(b)).digest());b+=Array(64-b.length+1).join("\x00");h=toByteArray(b).slice(0);b=toByteArray(b).slice(0);for(var d=0;64>d;++d)h[d]^=92,b[d]^=54;a.data+=fromByteArray(h);f.data+=fromByteArray(b);f.data+=k;a.data+=f.digest();return a.digest()};
SSHyClient.hash.MD5=function(b){var k=toByteArray(b);b=bytesToWords(k);var h=8*k.length;k=1732584193;for(var a=-271733879,f=-1732584194,d=271733878,r=0;r<b.length;r++)b[r]=(b[r]<<8|b[r]>>>24)&16711935|(b[r]<<24|b[r]>>>8)&4278255360;b[h>>>5]|=128<<h%32;b[(h+64>>>9<<4)+14]=h;h=function(a,b,c,m,g,l,d){a=a+(b&c|~b&m)+(g>>>0)+d;return(a<<l|a>>>32-l)+b};var u=function(a,b,c,m,g,l,d){a=a+(b&m|c&~m)+(g>>>0)+d;return(a<<l|a>>>32-l)+b},q=function(a,b,c,m,l,g,d){a=a+(b^c^m)+(l>>>0)+d;return(a<<g|a>>>32-g)+b},
t=function(a,b,c,m,g,l,d){a=a+(c^(b|~m))+(g>>>0)+d;return(a<<l|a>>>32-l)+b};for(r=0;r<b.length;r+=16){var g=k,l=a,n=f,m=d;k=h(k,a,f,d,b[r+0],7,-680876936);d=h(d,k,a,f,b[r+1],12,-389564586);f=h(f,d,k,a,b[r+2],17,606105819);a=h(a,f,d,k,b[r+3],22,-1044525330);k=h(k,a,f,d,b[r+4],7,-176418897);d=h(d,k,a,f,b[r+5],12,1200080426);f=h(f,d,k,a,b[r+6],17,-1473231341);a=h(a,f,d,k,b[r+7],22,-45705983);k=h(k,a,f,d,b[r+8],7,1770035416);d=h(d,k,a,f,b[r+9],12,-1958414417);f=h(f,d,k,a,b[r+10],17,-42063);a=h(a,f,d,
k,b[r+11],22,-1990404162);k=h(k,a,f,d,b[r+12],7,1804603682);d=h(d,k,a,f,b[r+13],12,-40341101);f=h(f,d,k,a,b[r+14],17,-1502002290);a=h(a,f,d,k,b[r+15],22,1236535329);k=u(k,a,f,d,b[r+1],5,-165796510);d=u(d,k,a,f,b[r+6],9,-1069501632);f=u(f,d,k,a,b[r+11],14,643717713);a=u(a,f,d,k,b[r+0],20,-373897302);k=u(k,a,f,d,b[r+5],5,-701558691);d=u(d,k,a,f,b[r+10],9,38016083);f=u(f,d,k,a,b[r+15],14,-660478335);a=u(a,f,d,k,b[r+4],20,-405537848);k=u(k,a,f,d,b[r+9],5,568446438);d=u(d,k,a,f,b[r+14],9,-1019803690);
f=u(f,d,k,a,b[r+3],14,-187363961);a=u(a,f,d,k,b[r+8],20,1163531501);k=u(k,a,f,d,b[r+13],5,-1444681467);d=u(d,k,a,f,b[r+2],9,-51403784);f=u(f,d,k,a,b[r+7],14,1735328473);a=u(a,f,d,k,b[r+12],20,-1926607734);k=q(k,a,f,d,b[r+5],4,-378558);d=q(d,k,a,f,b[r+8],11,-2022574463);f=q(f,d,k,a,b[r+11],16,1839030562);a=q(a,f,d,k,b[r+14],23,-35309556);k=q(k,a,f,d,b[r+1],4,-1530992060);d=q(d,k,a,f,b[r+4],11,1272893353);f=q(f,d,k,a,b[r+7],16,-155497632);a=q(a,f,d,k,b[r+10],23,-1094730640);k=q(k,a,f,d,b[r+13],4,681279174);
d=q(d,k,a,f,b[r+0],11,-358537222);f=q(f,d,k,a,b[r+3],16,-722521979);a=q(a,f,d,k,b[r+6],23,76029189);k=q(k,a,f,d,b[r+9],4,-640364487);d=q(d,k,a,f,b[r+12],11,-421815835);f=q(f,d,k,a,b[r+15],16,530742520);a=q(a,f,d,k,b[r+2],23,-995338651);k=t(k,a,f,d,b[r+0],6,-198630844);d=t(d,k,a,f,b[r+7],10,1126891415);f=t(f,d,k,a,b[r+14],15,-1416354905);a=t(a,f,d,k,b[r+5],21,-57434055);k=t(k,a,f,d,b[r+12],6,1700485571);d=t(d,k,a,f,b[r+3],10,-1894986606);f=t(f,d,k,a,b[r+10],15,-1051523);a=t(a,f,d,k,b[r+1],21,-2054922799);
k=t(k,a,f,d,b[r+8],6,1873313359);d=t(d,k,a,f,b[r+15],10,-30611744);f=t(f,d,k,a,b[r+6],15,-1560198380);a=t(a,f,d,k,b[r+13],21,1309151649);k=t(k,a,f,d,b[r+4],6,-145523070);d=t(d,k,a,f,b[r+11],10,-1120210379);f=t(f,d,k,a,b[r+2],15,718787259);a=t(a,f,d,k,b[r+9],21,-343485551);k=k+g>>>0;a=a+l>>>0;f=f+n>>>0;d=d+m>>>0}var c=function(a){if(a.constructor==Number)return(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;for(var e=0;e<a.length;e++)a[e]=c(a[e]);return a};return fromByteArray(wordsToBytes(c([k,a,
f,d])))};var symbols={"-2":"E","-1":"S",0:" ",1:".",2:"o",3:"+",4:"=",5:"*",6:"B",7:"O",8:"X",9:"@",10:"%",11:"&",12:"#",13:"/",14:"^"},bounds={width:17,height:9};function createBoard(b){for(var k=[],h=0;h<b.width;h++){k[h]=[];for(var a=0;a<b.height;a++)k[h][a]=0}return k}
function generateBoard(b){var k=createBoard(bounds),h=Math.floor(bounds.width/2),a=Math.floor(bounds.height/2);k[h][a]=-1;b.forEach(function(b){for(var d=0;8>d;d+=2){var f=b>>d&3;switch(f){case 0:case 1:0<a&&a--;break;case 2:case 3:a<bounds.height-1&&a++}switch(f){case 0:case 2:0<h&&h--;break;case 1:case 3:h<bounds.width-1&&h++}0<=k[h][a]&&k[h][a]++}});k[h][a]=-2;return k}
function boardToString(b){result=[];for(var k=0;k<bounds.height;k++){result[k]=[];for(var h=0;h<bounds.width;h++)result[k][h]=symbols[b[h][k]]||symbols[0];result[k]="|"+result[k].join("")+"|"}result.splice(0,0,"\n+---[ RSA2048 ]---+");result.push("+-----------------+");return result.join("\n")}function randomart(b){for(var k=[],h=0,a=b.length;h<a;h++)k.push("0x"+b[h]);document.getElementById("hostKeyImg").innerHTML=boardToString(generateBoard(k))};var struct={pack:function(b,k){var h="";switch(b){case "Q":b=new BigInteger("ff",16);h+=String.fromCharCode(k.shiftRight(56).and(b));h+=String.fromCharCode(k.shiftRight(48).and(b));h+=String.fromCharCode(k.shiftRight(40).and(b));h+=String.fromCharCode(k.shiftRight(32).and(b));h+=String.fromCharCode(k.shiftRight(24).and(b));h+=String.fromCharCode(k.shiftRight(16).and(b));h+=String.fromCharCode(k.shiftRight(8).and(b));h+=String.fromCharCode(k.and(b));break;case "I":h+=String.fromCharCode(k>>>24&255),
h+=String.fromCharCode(k>>>16&255),h+=String.fromCharCode(k>>>8&255);case "B":h+=String.fromCharCode(k&255)}return h},unpack:function(b,k){var h=[],a=0,f=0;switch(b){case "Q":f=new BigInteger("0",10);f=f.add((new BigInteger(k.charCodeAt(0).toString(),10)).shiftLeft(56));f=f.add((new BigInteger(k.charCodeAt(1).toString(),10)).shiftLeft(48));f=f.add((new BigInteger(k.charCodeAt(2).toString(),10)).shiftLeft(40));f=f.add((new BigInteger(k.charCodeAt(3).toString(),10)).shiftLeft(32));f=f.add((new BigInteger(k.charCodeAt(4).toString(),
10)).shiftLeft(24));f=f.add((new BigInteger(k.charCodeAt(5).toString(),10)).shiftLeft(16));f=f.add((new BigInteger(k.charCodeAt(6).toString(),10)).shiftLeft(8));f=f.add((new BigInteger(k.charCodeAt(7).toString(),10)).shiftLeft(0));h.push(f);break;case "I":f+=k.charCodeAt(0)<<24>>>0,f+=k.charCodeAt(1)<<16>>>0,f+=k.charCodeAt(2)<<8>>>0,a+=3;case "B":f+=k.charCodeAt(0+a)<<0>>>0,h.push(f)}return h}};function inflate_long(b){var k=new BigInteger("0",10);b.length%4&&(b=Array(4-b.length%4+1).join("\x00")+b);for(var h=0;h<b.length;h+=4)k=k.shiftLeft(32),k=k.add(new BigInteger(struct.unpack("I",b.substring(h,h+4))[0].toString(),10));return k}
function deflate_long(b,k){b="number"==typeof b?new BigInteger(b.toString(),10):b.clone();k=void 0==k?!0:k;for(var h="",a=new BigInteger("-1",10),f=new BigInteger("ffffffff",16);!b.equals(BigInteger.ZERO)&&!b.equals(a);)h=struct.pack("I",b.and(f))+h,b=b.shiftRight(32);f=!1;for(var d=0;d<h.length;++d){if(b.equals(BigInteger.ZERO)&&"\x00"!=h.charAt(d)){f=!0;break}if(b.equals(a)&&"\u00ff"!=h.charAt(d)){f=!0;break}}f||(d=0,h=b.equals(BigInteger.ZERO)?"\x00":"\u00ff");h=h.substring(d);k&&(b.equals(BigInteger.ZERO)&&
128<=h.charCodeAt(0)&&(h="\x00"+h),b.equals(a)&&128>h.charCodeAt(0)&&(h="\u00ff"+h));return h}function toByteArray(b){for(var k=new Uint8Array(b.length),h=0;h<b.length;h++)k[h]=b.charCodeAt(h);return k}function fromByteArray(b){return String.fromCharCode.apply(null,new Uint8Array(b))}function bytesToWords(b){for(var k=[],h=0,a=0;h<b.length;h++,a+=8)k[a>>>5]|=(b[h]&255)<<24-a%32;return k}function wordsToBytes(b){for(var k=[],h=0;h<32*b.length;h+=8)k.push(b[h>>>5]>>>24-h%32&255);return k}
function setCharAt(b,k,h){return b.substring(0,k)+h+b.substring(k+1)}function fromUtf8(b){for(var k="",h=toByteArray(b),a=0;a<b.length;a++){var f=b.charCodeAt(a);if(192<=f&&223>=f){var d=h[++a];f=(f&31)<<6|d&63}else if(224<=f&&239>=f){d=h[++a];var r=h[++a];f=(f&15)<<12|(d&63)<<6|r&63}else 128<=f&&(f=".");k+=String.fromCharCode(f)}return k}function read_rng(b){return String.fromCharCode.apply(null,window.crypto.getRandomValues(new Uint8Array(b)))}
function filter(b,k){b=b.split(",");for(var h=0;h<b.length;++h)if(-1!=k.indexOf(b[h]))return b[h]}function splitSlice(b,k){k=void 0===k?5E3:k;for(var h=[],a=0,f=b.length;a<f;a+=k)h.push(b.slice(a,k+a));return h}function modColorPercent(b,k){var h=parseInt(b.slice(1),16);b=0>k?0:255;k=0>k?-1*k:k;var a=h>>16,f=h>>8&255;h&=255;return"#"+(16777216+65536*(Math.round((b-a)*k)+a)+256*(Math.round((b-f)*k)+f)+(Math.round((b-h)*k)+h)).toString(16).slice(1)}
function ascii2hex(b){for(var k="",h=0;h<b.length;h++)k=1==b.charCodeAt(h).toString(16).length?k+("0"+b.charCodeAt(h).toString(16)):k+(""+b.charCodeAt(h).toString(16));return k}function termBackspace(b){b.write("\b");b.eraseRight(b.buffers._terminal.buffer.x-1,b.buffers._terminal.buffer.y)};/*
 MIT
*/
var MINIMUM_COLS=2,MINIMUM_ROWS=1,FitAddon=function(){function b(){}b.prototype.activate=function(b){this._terminal=b};b.prototype.dispose=function(){};b.prototype.fit=function(){var b=this.proposeDimensions();if(b&&this._terminal){var h=this._terminal._core;if(this._terminal.rows!==b.rows||this._terminal.cols!==b.cols)h._renderService.clear(),this._terminal.resize(b.cols,b.rows)}};b.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var b=
this._terminal._core;if(0!==b._renderService.dimensions.actualCellWidth&&0!==b._renderService.dimensions.actualCellHeight){var h=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(h.getPropertyValue("height"));h=Math.max(0,parseInt(h.getPropertyValue("width")));var f=window.getComputedStyle(this._terminal.element),d=parseInt(f.getPropertyValue("padding-top")),r=parseInt(f.getPropertyValue("padding-bottom")),u=parseInt(f.getPropertyValue("padding-right"));f=parseInt(f.getPropertyValue("padding-left"));
return{cols:Math.max(MINIMUM_COLS,Math.floor((h-(u+f)-b.viewport.scrollBarWidth)/b._renderService.dimensions.actualCellWidth)),rows:Math.max(MINIMUM_ROWS,Math.floor((a-(d+r))/b._renderService.dimensions.actualCellHeight))}}}};return b}();!function(b,k){if("object"==typeof exports&&"object"==typeof module)module.exports=k();else if("function"==typeof define&&define.amd)define([],k);else{k=k();for(var h in k)("object"==typeof exports?exports:b)[h]=k[h]}}(self,function(){return function(){var b={4567:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])})(a,
b)},function(a,b){function e(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)});Object.defineProperty(a,"__esModule",{value:!0});a.AccessibilityManager=void 0;var u=f(9042),q=f(6114),t=f(6193),g=f(3656);b=f(844);var l=f(5596),n=f(9631);f=function(a){function b(e,b){var c=a.call(this)||this;c._terminal=e;c._renderService=b;c._liveRegionLineCount=0;c._charsToConsume=[];c._charsToAnnounce="";c._accessibilityTreeRoot=document.createElement("div");c._accessibilityTreeRoot.classList.add("xterm-accessibility");
c._rowContainer=document.createElement("div");c._rowContainer.setAttribute("role","list");c._rowContainer.classList.add("xterm-accessibility-tree");c._rowElements=[];for(e=0;e<c._terminal.rows;e++)c._rowElements[e]=c._createAccessibilityTreeNode(),c._rowContainer.appendChild(c._rowElements[e]);if(c._topBoundaryFocusListener=function(a){return c._onBoundaryFocus(a,0)},c._bottomBoundaryFocusListener=function(a){return c._onBoundaryFocus(a,1)},c._rowElements[0].addEventListener("focus",c._topBoundaryFocusListener),
c._rowElements[c._rowElements.length-1].addEventListener("focus",c._bottomBoundaryFocusListener),c._refreshRowsDimensions(),c._accessibilityTreeRoot.appendChild(c._rowContainer),c._renderRowsDebouncer=new t.RenderDebouncer(c._renderRows.bind(c)),c._refreshRows(),c._liveRegion=document.createElement("div"),c._liveRegion.classList.add("live-region"),c._liveRegion.setAttribute("aria-live","assertive"),c._accessibilityTreeRoot.appendChild(c._liveRegion),!c._terminal.element)throw Error("Cannot enable accessibility before Terminal.open");
return c._terminal.element.insertAdjacentElement("afterbegin",c._accessibilityTreeRoot),c.register(c._renderRowsDebouncer),c.register(c._terminal.onResize(function(a){return c._onResize(a.rows)})),c.register(c._terminal.onRender(function(a){return c._refreshRows(a.start,a.end)})),c.register(c._terminal.onScroll(function(){return c._refreshRows()})),c.register(c._terminal.onA11yChar(function(a){return c._onChar(a)})),c.register(c._terminal.onLineFeed(function(){return c._onChar("\n")})),c.register(c._terminal.onA11yTab(function(a){return c._onTab(a)})),
c.register(c._terminal.onKey(function(a){return c._onKey(a.key)})),c.register(c._terminal.onBlur(function(){return c._clearLiveRegion()})),c.register(c._renderService.onDimensionsChange(function(){return c._refreshRowsDimensions()})),c._screenDprMonitor=new l.ScreenDprMonitor,c.register(c._screenDprMonitor),c._screenDprMonitor.setListener(function(){return c._refreshRowsDimensions()}),c.register(g.addDisposableDomListener(window,"resize",function(){return c._refreshRowsDimensions()})),c}return h(b,
a),b.prototype.dispose=function(){a.prototype.dispose.call(this);n.removeElementFromParent(this._accessibilityTreeRoot);this._rowElements.length=0},b.prototype._onBoundaryFocus=function(a,b){var e=a.target,c=this._rowElements[0===b?1:this._rowElements.length-2];if(e.getAttribute("aria-posinset")!==(0===b?"1":""+this._terminal.buffer.lines.length)&&a.relatedTarget===c){var m,l;(0===b?(m=e,l=this._rowElements.pop(),this._rowContainer.removeChild(l)):(m=this._rowElements.shift(),l=e,this._rowContainer.removeChild(m)),
m.removeEventListener("focus",this._topBoundaryFocusListener),l.removeEventListener("focus",this._bottomBoundaryFocusListener),0===b)?(e=this._createAccessibilityTreeNode(),this._rowElements.unshift(e),this._rowContainer.insertAdjacentElement("afterbegin",e)):(e=this._createAccessibilityTreeNode(),this._rowElements.push(e),this._rowContainer.appendChild(e));this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener);this._rowElements[this._rowElements.length-1].addEventListener("focus",
this._bottomBoundaryFocusListener);this._terminal.scrollLines(0===b?-1:1);this._rowElements[0===b?1:this._rowElements.length-2].focus();a.preventDefault();a.stopImmediatePropagation()}},b.prototype._onResize=function(a){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var e=this._rowContainer.children.length;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);
for(;this._rowElements.length>a;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener);this._refreshRowsDimensions()},b.prototype._createAccessibilityTreeNode=function(){var a=document.createElement("div");return a.setAttribute("role","listitem"),a.tabIndex=-1,this._refreshRowDimensions(a),a},b.prototype._onTab=function(a){for(var e=0;e<a;e++)this._onChar(" ")},b.prototype._onChar=function(a){var e=
this;21>this._liveRegionLineCount&&(0<this._charsToConsume.length?this._charsToConsume.shift()!==a&&(this._charsToAnnounce+=a):this._charsToAnnounce+=a,"\n"===a&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=u.tooMuchOutput)),q.isMac&&this._liveRegion.textContent&&0<this._liveRegion.textContent.length&&!this._liveRegion.parentNode&&setTimeout(function(){e._accessibilityTreeRoot.appendChild(e._liveRegion)},0))},b.prototype._clearLiveRegion=function(){this._liveRegion.textContent=
"";this._liveRegionLineCount=0;q.isMac&&n.removeElementFromParent(this._liveRegion)},b.prototype._onKey=function(a){this._clearLiveRegion();this._charsToConsume.push(a)},b.prototype._refreshRows=function(a,b){this._renderRowsDebouncer.refresh(a,b,this._terminal.rows)},b.prototype._renderRows=function(a,b){for(var e=this._terminal.buffer,c=e.lines.length.toString();a<=b;a++){var m=e.translateBufferLineToString(e.ydisp+a,!0),l=(e.ydisp+a+1).toString(),g=this._rowElements[a];g&&(0===m.length?g.innerText=
"\u00a0":g.textContent=m,g.setAttribute("aria-posinset",l),g.setAttribute("aria-setsize",c))}this._announceCharacters()},b.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var a=0;a<this._terminal.rows;a++)this._refreshRowDimensions(this._rowElements[a])}},b.prototype._refreshRowDimensions=function(a){a.style.height=this._renderService.dimensions.actualCellHeight+
"px"},b.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},b}(b.Disposable);a.AccessibilityManager=f},3614:function(b,a){function f(a){return a.replace(/\r?\n/g,"\r")}function d(a,b){return b?"\u001b[200~"+a+"\u001b[201~":a}function h(a,b,g){a=d(a=f(a),g.decPrivateModes.bracketedPasteMode);g.triggerDataEvent(a,!0);b.value=""}function u(a,b,g){var l=g.getBoundingClientRect();g=a.clientX-l.left-10;
a=a.clientY-l.top-10;b.style.width="20px";b.style.height="20px";b.style.left=g+"px";b.style.top=a+"px";b.style.zIndex="1000";b.focus()}Object.defineProperty(a,"__esModule",{value:!0});a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0;a.prepareTextForTerminal=f;a.bracketTextForPaste=d;a.copyHandler=function(a,b){a.clipboardData&&a.clipboardData.setData("text/plain",b.selectionText);a.preventDefault()};a.handlePasteEvent=
function(a,b,g){a.stopPropagation();a.clipboardData&&h(a.clipboardData.getData("text/plain"),b,g)};a.paste=h;a.moveTextAreaUnderMouseCursor=u;a.rightClickHandler=function(a,b,g,l,d){u(a,b,g);d&&l.rightClickSelect(a);b.value=l.selectionText;b.select()}},4774:function(b,a){function f(a){a=a.toString(16);return 2>a.length?"0"+a:a}function d(a,b){return a<b?(b+.05)/(a+.05):(a+.05)/(b+.05)}var h,u,k;Object.defineProperty(a,"__esModule",{value:!0});a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=
a.channels=void 0;(function(a){a.toCss=function(a,b,d,m){return void 0!==m?"#"+f(a)+f(b)+f(d)+f(m):"#"+f(a)+f(b)+f(d)};a.toRgba=function(a,b,d,m){return void 0===m&&(m=255),(a<<24|b<<16|d<<8|m)>>>0}})(h=a.channels||(a.channels={}));(b=a.color||(a.color={})).blend=function(a,b){var l=(255&b.rgba)/255;if(1===l)return{css:b.css,rgba:b.rgba};var g=a.rgba>>24&255,m=a.rgba>>16&255;a=a.rgba>>8&255;g+=Math.round(((b.rgba>>24&255)-g)*l);m+=Math.round(((b.rgba>>16&255)-m)*l);b=a+Math.round(((b.rgba>>8&255)-
a)*l);return{css:h.toCss(g,m,b),rgba:h.toRgba(g,m,b)}};b.isOpaque=function(a){return 255==(255&a.rgba)};b.ensureContrastRatio=function(a,b,l){if(a=k.ensureContrastRatio(a.rgba,b.rgba,l))return k.toColor(a>>24&255,a>>16&255,a>>8&255)};b.opaque=function(a){a=(255|a.rgba)>>>0;var b=k.toChannels(a);return{css:h.toCss(b[0],b[1],b[2]),rgba:a}};b.opacity=function(a,b){b=Math.round(255*b);var l=k.toChannels(a.rgba);a=l[0];var g=l[1];l=l[2];return{css:h.toCss(a,g,l,b),rgba:h.toRgba(a,g,l,b)}};(a.css||(a.css=
{})).toColor=function(a){switch(a.length){case 7:return{css:a,rgba:(parseInt(a.slice(1),16)<<8|255)>>>0};case 9:return{css:a,rgba:parseInt(a.slice(1),16)>>>0}}throw Error("css.toColor: Unsupported css format");};(function(a){function b(a,b,m){a/=255;b/=255;m/=255;return.2126*(.03928>=a?a/12.92:Math.pow((a+.055)/1.055,2.4))+.7152*(.03928>=b?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(.03928>=m?m/12.92:Math.pow((m+.055)/1.055,2.4))}a.relativeLuminance=function(a){return b(a>>16&255,a>>8&255,255&a)};
a.relativeLuminance2=b})(u=a.rgb||(a.rgb={}));(function(a){function b(a,b,c){var e=a>>24&255,m=a>>16&255;a=a>>8&255;var l=b>>24&255,g=b>>16&255;b=b>>8&255;for(var n=d(u.relativeLuminance2(l,b,g),u.relativeLuminance2(e,m,a));n<c&&(0<l||0<g||0<b);)l-=Math.max(0,Math.ceil(.1*l)),g-=Math.max(0,Math.ceil(.1*g)),b-=Math.max(0,Math.ceil(.1*b)),n=d(u.relativeLuminance2(l,b,g),u.relativeLuminance2(e,m,a));return(l<<24|g<<16|b<<8|255)>>>0}function l(a,b,c){var e=a>>24&255,m=a>>16&255;a=a>>8&255;var l=b>>24&
255,g=b>>16&255;b=b>>8&255;for(var n=d(u.relativeLuminance2(l,b,g),u.relativeLuminance2(e,m,a));n<c&&(255>l||255>g||255>b);)l=Math.min(255,l+Math.ceil(.1*(255-l))),g=Math.min(255,g+Math.ceil(.1*(255-g))),b=Math.min(255,b+Math.ceil(.1*(255-b))),n=d(u.relativeLuminance2(l,b,g),u.relativeLuminance2(e,m,a));return(l<<24|g<<16|b<<8|255)>>>0}a.ensureContrastRatio=function(a,m,c){var e=u.relativeLuminance(a>>8),g=u.relativeLuminance(m>>8);if(d(e,g)<c)return g<e?b(a,m,c):l(a,m,c)};a.reduceLuminance=b;a.increaseLuminance=
l;a.toChannels=function(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]};a.toColor=function(a,b,c){return{css:h.toCss(a,b,c),rgba:h.toRgba(a,b,c)}}})(k=a.rgba||(a.rgba={}));a.toPaddedHex=f;a.contrastRatio=d},7239:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.ColorContrastCache=void 0;b=function(){function a(){this._color={};this._rgba={}}return a.prototype.clear=function(){this._color={};this._rgba={}},a.prototype.setCss=function(a,b,f){this._rgba[a]||(this._rgba[a]={});this._rgba[a][b]=
f},a.prototype.getCss=function(a,b){return this._rgba[a]?this._rgba[a][b]:void 0},a.prototype.setColor=function(a,b,f){this._color[a]||(this._color[a]={});this._color[a][b]=f},a.prototype.getColor=function(a,b){return this._color[a]?this._color[a][b]:void 0},a}();a.ColorContrastCache=b},5680:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.ColorManager=a.DEFAULT_ANSI_COLORS=void 0;var d=f(4774),h=f(7239),u=d.css.toColor("#ffffff"),k=d.css.toColor("#000000"),t=d.css.toColor("#ffffff"),
g=d.css.toColor("#000000"),l={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var a=[d.css.toColor("#2e3436"),d.css.toColor("#cc0000"),d.css.toColor("#4e9a06"),d.css.toColor("#c4a000"),d.css.toColor("#3465a4"),d.css.toColor("#75507b"),d.css.toColor("#06989a"),d.css.toColor("#d3d7cf"),d.css.toColor("#555753"),d.css.toColor("#ef2929"),d.css.toColor("#8ae234"),d.css.toColor("#fce94f"),d.css.toColor("#729fcf"),d.css.toColor("#ad7fa8"),d.css.toColor("#34e2e2"),
d.css.toColor("#eeeeec")],b=[0,95,135,175,215,255],c=0;216>c;c++){var e=b[c/36%6|0],l=b[c/6%6|0],g=b[c%6];a.push({css:d.channels.toCss(e,l,g),rgba:d.channels.toRgba(e,l,g)})}for(c=0;24>c;c++)b=8+10*c,a.push({css:d.channels.toCss(b,b,b),rgba:d.channels.toRgba(b,b,b)});return a}());b=function(){function b(b,c){this.allowTransparency=c;b=b.createElement("canvas");b.width=1;b.height=1;b=b.getContext("2d");if(!b)throw Error("Could not get rendering context");this._ctx=b;this._ctx.globalCompositeOperation=
"copy";this._litmusColor=this._ctx.createLinearGradient(0,0,1,1);this._contrastCache=new h.ColorContrastCache;this.colors={foreground:u,background:k,cursor:t,cursorAccent:g,selectionTransparent:l,selectionOpaque:d.color.blend(k,l),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return b.prototype.onOptionsChange=function(a){"minimumContrastRatio"===a&&this._contrastCache.clear()},b.prototype.setTheme=function(b){void 0===b&&(b={});this.colors.foreground=this._parseColor(b.foreground,
u);this.colors.background=this._parseColor(b.background,k);this.colors.cursor=this._parseColor(b.cursor,t,!0);this.colors.cursorAccent=this._parseColor(b.cursorAccent,g,!0);this.colors.selectionTransparent=this._parseColor(b.selection,l,!0);this.colors.selectionOpaque=d.color.blend(this.colors.background,this.colors.selectionTransparent);d.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=d.color.opacity(this.colors.selectionTransparent,.3));this.colors.ansi[0]=this._parseColor(b.black,
a.DEFAULT_ANSI_COLORS[0]);this.colors.ansi[1]=this._parseColor(b.red,a.DEFAULT_ANSI_COLORS[1]);this.colors.ansi[2]=this._parseColor(b.green,a.DEFAULT_ANSI_COLORS[2]);this.colors.ansi[3]=this._parseColor(b.yellow,a.DEFAULT_ANSI_COLORS[3]);this.colors.ansi[4]=this._parseColor(b.blue,a.DEFAULT_ANSI_COLORS[4]);this.colors.ansi[5]=this._parseColor(b.magenta,a.DEFAULT_ANSI_COLORS[5]);this.colors.ansi[6]=this._parseColor(b.cyan,a.DEFAULT_ANSI_COLORS[6]);this.colors.ansi[7]=this._parseColor(b.white,a.DEFAULT_ANSI_COLORS[7]);
this.colors.ansi[8]=this._parseColor(b.brightBlack,a.DEFAULT_ANSI_COLORS[8]);this.colors.ansi[9]=this._parseColor(b.brightRed,a.DEFAULT_ANSI_COLORS[9]);this.colors.ansi[10]=this._parseColor(b.brightGreen,a.DEFAULT_ANSI_COLORS[10]);this.colors.ansi[11]=this._parseColor(b.brightYellow,a.DEFAULT_ANSI_COLORS[11]);this.colors.ansi[12]=this._parseColor(b.brightBlue,a.DEFAULT_ANSI_COLORS[12]);this.colors.ansi[13]=this._parseColor(b.brightMagenta,a.DEFAULT_ANSI_COLORS[13]);this.colors.ansi[14]=this._parseColor(b.brightCyan,
a.DEFAULT_ANSI_COLORS[14]);this.colors.ansi[15]=this._parseColor(b.brightWhite,a.DEFAULT_ANSI_COLORS[15]);this._contrastCache.clear()},b.prototype._parseColor=function(a,b,e){if(void 0===e&&(e=this.allowTransparency),void 0===a)return b;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=a,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+a+" is invalid using fallback "+b.css),b;this._ctx.fillRect(0,0,1,1);var c=this._ctx.getImageData(0,0,1,1).data;if(255!==c[3]){if(!e)return console.warn("Color: "+
a+" is using transparency, but allowTransparency is false. Using fallback "+b.css+"."),b;b=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(a){return Number(a)});return{rgba:d.channels.toRgba(b[0],b[1],b[2],Math.round(255*b[3])),css:a}}return{css:this._ctx.fillStyle,rgba:d.channels.toRgba(c[0],c[1],c[2],c[3])}},b}();a.ColorManager=b},9631:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.removeElementFromParent=void 0;a.removeElementFromParent=function(){for(var a,
b=[],h=0;h<arguments.length;h++)b[h]=arguments[h];for(h=0;h<b.length;h++){var u=b[h];null===(a=null==u?void 0:u.parentElement)||void 0===a||a.removeChild(u)}}},3656:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.addDisposableDomListener=void 0;a.addDisposableDomListener=function(a,b,h,u){a.addEventListener(b,h,u);var d=!1;return{dispose:function(){d||(d=!0,a.removeEventListener(b,h,u))}}}},3551:function(b,a,f){var d=this&&this.__decorate||function(a,b,d,m){var c,e=arguments.length,
l=3>e?b:null===m?m=Object.getOwnPropertyDescriptor(b,d):m;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(a,b,d,m);else for(var g=a.length-1;0<=g;g--)(c=a[g])&&(l=(3>e?c(l):3<e?c(b,d,l):c(b,d))||l);return 3<e&&l&&Object.defineProperty(b,d,l),l},h=this&&this.__param||function(a,b){return function(l,g){b(l,g,a)}};Object.defineProperty(a,"__esModule",{value:!0});a.MouseZone=a.Linkifier=void 0;var u=f(8460),k=f(2585);b=function(){function a(a,b,g){this._bufferService=
a;this._logService=b;this._unicodeService=g;this._linkMatchers=[];this._nextLinkMatcherId=0;this._onShowLinkUnderline=new u.EventEmitter;this._onHideLinkUnderline=new u.EventEmitter;this._onLinkTooltip=new u.EventEmitter;this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(a.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},
enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),a.prototype.attachToDom=function(a,b){this._element=a;this._mouseZoneManager=b},a.prototype.linkifyRows=function(b,g){var l=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=b,this._rowsToLinkify.end=g):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,
b),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,g)),this._mouseZoneManager.clearAll(b,g),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return l._linkifyRows()},a._timeBeforeLatency))},a.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var a=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var b=a.ydisp+this._rowsToLinkify.start;if(!(b>=a.lines.length)){var g=Math.ceil(2E3/
this._bufferService.cols);for(a=this._bufferService.buffer.iterator(!1,b,a.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,g,g);a.hasNext();)for(b=a.next(),g=0;g<this._linkMatchers.length;g++)this._doLinkifyRow(b.range.first,b.content,this._linkMatchers[g]);this._rowsToLinkify.start=void 0;this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},a.prototype.registerLinkMatcher=function(a,b,g){if(void 0===g&&(g={}),!b)throw Error("handler must be defined");
a={id:this._nextLinkMatcherId++,regex:a,handler:b,matchIndex:g.matchIndex,validationCallback:g.validationCallback,hoverTooltipCallback:g.tooltipCallback,hoverLeaveCallback:g.leaveCallback,willLinkActivate:g.willLinkActivate,priority:g.priority||0};return this._addLinkMatcherToList(a),a.id},a.prototype._addLinkMatcherToList=function(a){if(0!==this._linkMatchers.length){for(var b=this._linkMatchers.length-1;0<=b;b--)if(a.priority<=this._linkMatchers[b].priority)return void this._linkMatchers.splice(b+
1,0,a);this._linkMatchers.splice(0,0,a)}else this._linkMatchers.push(a)},a.prototype.deregisterLinkMatcher=function(a){for(var b=0;b<this._linkMatchers.length;b++)if(this._linkMatchers[b].id===a)return this._linkMatchers.splice(b,1),!0;return!1},a.prototype._doLinkifyRow=function(a,b,g){for(var c,e=this,l=new RegExp(g.regex.source,(g.regex.flags||"")+"g"),d=-1,m=function(){var m=c["number"!=typeof g.matchIndex?0:g.matchIndex];if(!m)return n._logService.debug("match found without corresponding matchIndex",
c,g),"break";if(d=b.indexOf(m,d+1),l.lastIndex=d+m.length,0>d)return"break";var f=n._bufferService.buffer.stringIndexToBufferIndex(a,d);if(0>f[0])return"break";var v=n._bufferService.buffer.lines.get(f[0]);if(!v)return"break";var h=(v=v.getFg(f[1]))?v>>9&511:void 0;g.validationCallback?g.validationCallback(m,function(a){e._rowsTimeoutId||a&&e._addLink(f[1],f[0]-e._bufferService.buffer.ydisp,m,g,h)}):n._addLink(f[1],f[0]-n._bufferService.buffer.ydisp,m,g,h)},n=this;null!==(c=l.exec(b))&&"break"!==
m(););},a.prototype._addLink=function(a,b,g,c,e){var l=this;if(this._mouseZoneManager&&this._element){var d=this._unicodeService.getStringCellWidth(g),m=a%this._bufferService.cols,f=b+Math.floor(a/this._bufferService.cols),n=(m+d)%this._bufferService.cols,h=f+Math.floor((m+d)/this._bufferService.cols);0===n&&(n=this._bufferService.cols,h--);this._mouseZoneManager.add(new t(m+1,f+1,n+1,h+1,function(a){if(c.handler)return c.handler(a,g);(a=window.open())?(a.opener=null,a.location.href=g):console.warn("Opening link blocked as opener could not be cleared")},
function(){l._onShowLinkUnderline.fire(l._createLinkHoverEvent(m,f,n,h,e));l._element.classList.add("xterm-cursor-pointer")},function(a){l._onLinkTooltip.fire(l._createLinkHoverEvent(m,f,n,h,e));c.hoverTooltipCallback&&c.hoverTooltipCallback(a,g,{start:{x:m,y:f},end:{x:n,y:h}})},function(){l._onHideLinkUnderline.fire(l._createLinkHoverEvent(m,f,n,h,e));l._element.classList.remove("xterm-cursor-pointer");c.hoverLeaveCallback&&c.hoverLeaveCallback()},function(a){return!c.willLinkActivate||c.willLinkActivate(a,
g)}))}},a.prototype._createLinkHoverEvent=function(a,b,g,c,e){return{x1:a,y1:b,x2:g,y2:c,cols:this._bufferService.cols,fg:e}},a._timeBeforeLatency=200,a=d([h(0,k.IBufferService),h(1,k.ILogService),h(2,k.IUnicodeService)],a)}();a.Linkifier=b;var t=function(a,b,d,m,c,e,f,h,t){this.x1=a;this.y1=b;this.x2=d;this.y2=m;this.clickCallback=c;this.hoverCallback=e;this.tooltipCallback=f;this.leaveCallback=h;this.willLinkActivate=t};a.MouseZone=t},6465:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,
b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])})(a,b)},function(a,b){function e(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}),u=this&&this.__decorate||function(a,b,e,g){var c,l=arguments.length,d=3>l?b:null===g?g=Object.getOwnPropertyDescriptor(b,e):g;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=
Reflect.decorate(a,b,e,g);else for(var m=a.length-1;0<=m;m--)(c=a[m])&&(d=(3>l?c(d):3<l?c(b,e,d):c(b,e))||d);return 3<l&&d&&Object.defineProperty(b,e,d),d},k=this&&this.__param||function(a,b){return function(e,c){b(e,c,a)}};Object.defineProperty(a,"__esModule",{value:!0});a.Linkifier2=void 0;var t=f(2585),g=f(8460),l=f(844),n=f(3656);b=function(a){function b(b){var e=a.call(this)||this;return e._bufferService=b,e._linkProviders=[],e._linkCacheDisposables=[],e._isMouseOut=!0,e._activeLine=-1,e._onShowLinkUnderline=
e.register(new g.EventEmitter),e._onHideLinkUnderline=e.register(new g.EventEmitter),e.register(l.getDisposeArrayDisposable(e._linkCacheDisposables)),e}return h(b,a),Object.defineProperty(b.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),b.prototype.registerLinkProvider=function(a){var b=
this;return this._linkProviders.push(a),{dispose:function(){var e=b._linkProviders.indexOf(a);-1!==e&&b._linkProviders.splice(e,1)}}},b.prototype.attachToDom=function(a,b,c){var e=this;this._element=a;this._mouseService=b;this._renderService=c;this.register(n.addDisposableDomListener(this._element,"mouseleave",function(){e._isMouseOut=!0;e._clearCurrentLink()}));this.register(n.addDisposableDomListener(this._element,"mousemove",this._onMouseMove.bind(this)));this.register(n.addDisposableDomListener(this._element,
"click",this._onClick.bind(this)))},b.prototype._onMouseMove=function(a){if(this._lastMouseEvent=a,this._element&&this._mouseService){var b=this._positionFromMouseEvent(a,this._element,this._mouseService);if(b){this._isMouseOut=!1;a=a.composedPath();for(var e=0;e<a.length;e++){var c=a[e];if(c.classList.contains("xterm"))break;if(c.classList.contains("xterm-hover"))return}this._lastBufferCell&&b.x===this._lastBufferCell.x&&b.y===this._lastBufferCell.y||(this._onHover(b),this._lastBufferCell=b)}}},
b.prototype._onHover=function(a){if(this._activeLine!==a.y)return this._clearCurrentLink(),void this._askForLink(a,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))},b.prototype._askForLink=function(a,b){var e,c=this;this._activeProviderReplies&&b||(null===(e=this._activeProviderReplies)||void 0===e||e.forEach(function(a){null==a||a.forEach(function(a){a.link.dispose&&a.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=
a.y);var g=!1;this._linkProviders.forEach(function(e,l){var d;b?(null===(d=c._activeProviderReplies)||void 0===d?0:d.get(l))&&(g=c._checkLinkProviderResult(l,a,g)):e.provideLinks(a.y,function(b){var e,d;c._isMouseOut||(b=null==b?void 0:b.map(function(a){return{link:a}}),null===(e=c._activeProviderReplies)||void 0===e||e.set(l,b),g=c._checkLinkProviderResult(l,a,g),(null===(d=c._activeProviderReplies)||void 0===d?void 0:d.size)===c._linkProviders.length&&c._removeIntersectingLinks(a.y,c._activeProviderReplies))})})},
b.prototype._removeIntersectingLinks=function(a,b){for(var e=new Set,c=0;c<b.size;c++){var g=b.get(c);if(g)for(var l=0;l<g.length;l++){var d=g[l],m=d.link.range.end.y>a?this._bufferService.cols:d.link.range.end.x;for(d=d.link.range.start.y<a?0:d.link.range.start.x;d<=m;d++){if(e.has(d)){g.splice(l--,1);break}e.add(d)}}}},b.prototype._checkLinkProviderResult=function(a,b,c){var e,g=this;if(!this._activeProviderReplies)return c;for(var l=this._activeProviderReplies.get(a),d=!1,m=0;m<a;m++)this._activeProviderReplies.has(m)&&
!this._activeProviderReplies.get(m)||(d=!0);!d&&l&&(m=l.find(function(a){return g._linkAtPosition(a.link,b)}))&&(c=!0,this._handleNewLink(m));if(this._activeProviderReplies.size===this._linkProviders.length&&!c)for(m=0;m<this._activeProviderReplies.size;m++)if(a=null===(e=this._activeProviderReplies.get(m))||void 0===e?void 0:e.find(function(a){return g._linkAtPosition(a.link,b)})){c=!0;this._handleNewLink(a);break}return c},b.prototype._onClick=function(a){if(this._element&&this._mouseService&&this._currentLink){var b=
this._positionFromMouseEvent(a,this._element,this._mouseService);b&&this._linkAtPosition(this._currentLink.link,b)&&this._currentLink.link.activate(a,this._currentLink.link.text)}},b.prototype._clearCurrentLink=function(a,b){this._element&&this._currentLink&&this._lastMouseEvent&&(!a||!b||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=b)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,l.disposeArray(this._linkCacheDisposables))},
b.prototype._handleNewLink=function(a){var b=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._linkAtPosition(a.link,e)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:void 0===a.link.decorations||a.link.decorations.underline,pointerCursor:void 0===a.link.decorations||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),
a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:function(){var a,e;return null===(e=null===(a=b._currentLink)||void 0===a?void 0:a.state)||void 0===e?void 0:e.decorations.pointerCursor},set:function(a){var e,c;(null===(e=b._currentLink)||void 0===e?0:e.state)&&b._currentLink.state.decorations.pointerCursor!==a&&(b._currentLink.state.decorations.pointerCursor=a,b._currentLink.state.isHovered&&(null===(c=b._element)||void 0===c||c.classList.toggle("xterm-cursor-pointer",
a)))}},underline:{get:function(){var a,e;return null===(e=null===(a=b._currentLink)||void 0===a?void 0:a.state)||void 0===e?void 0:e.decorations.underline},set:function(e){var c,g,l;(null===(c=b._currentLink)||void 0===c?0:c.state)&&(null===(l=null===(g=b._currentLink)||void 0===g?void 0:g.state)||void 0===l?void 0:l.decorations.underline)!==e&&(b._currentLink.state.decorations.underline=e,b._currentLink.state.isHovered&&b._fireUnderlineEvent(a.link,e))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(a){b._clearCurrentLink(0===
a.start?0:a.start+1+b._bufferService.buffer.ydisp,a.end+1+b._bufferService.buffer.ydisp)})))}},b.prototype._linkHover=function(a,b,c){var e;(null===(e=this._currentLink)||void 0===e?0:e.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(b,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer"));b.hover&&b.hover(c,b.text)},b.prototype._fireUnderlineEvent=function(a,b){a=a.range;var e=this._bufferService.buffer.ydisp;
a=this._createLinkUnderlineEvent(a.start.x-1,a.start.y-e-1,a.end.x,a.end.y-e-1,void 0);(b?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(a)},b.prototype._linkLeave=function(a,b,c){var e;(null===(e=this._currentLink)||void 0===e?0:e.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(b,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer"));b.leave&&b.leave(c,b.text)},b.prototype._linkAtPosition=
function(a,b){var e=a.range.start.y<b.y,c=a.range.end.y>b.y;return(a.range.start.y===a.range.end.y&&a.range.start.x<=b.x&&a.range.end.x>=b.x||e&&a.range.end.x>=b.x||c&&a.range.start.x<=b.x||e&&c)&&a.range.start.y<=b.y&&a.range.end.y>=b.y},b.prototype._positionFromMouseEvent=function(a,b,c){if(a=c.getCoords(a,b,this._bufferService.cols,this._bufferService.rows))return{x:a[0],y:a[1]+this._bufferService.buffer.ydisp}},b.prototype._createLinkUnderlineEvent=function(a,b,c,g,l){return{x1:a,y1:b,x2:c,y2:g,
cols:this._bufferService.cols,fg:l}},u([k(0,t.IBufferService)],b)}(l.Disposable);a.Linkifier2=b},9042:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.tooMuchOutput=a.promptLabel=void 0;a.promptLabel="Terminal input";a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var e in b)Object.prototype.hasOwnProperty.call(b,
e)&&(a[e]=b[e])})(a,b)},function(a,b){function c(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),k=this&&this.__decorate||function(a,b,c,e){var g,l=arguments.length,d=3>l?b:null===e?e=Object.getOwnPropertyDescriptor(b,c):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(a,b,c,e);else for(var m=a.length-1;0<=m;m--)(g=a[m])&&(d=(3>l?g(d):3<l?g(b,c,d):g(b,c))||d);return 3<l&&d&&Object.defineProperty(b,c,d),d},q=this&&
this.__param||function(a,b){return function(c,e){b(c,e,a)}};Object.defineProperty(a,"__esModule",{value:!0});a.MouseZoneManager=void 0;b=f(844);var t=f(3656),g=f(4725),l=f(2585);f=function(a){function b(b,e,g,l,d,m){var c=a.call(this)||this;return c._element=b,c._screenElement=e,c._bufferService=g,c._mouseService=l,c._selectionService=d,c._optionsService=m,c._zones=[],c._areZonesActive=!1,c._lastHoverCoords=[void 0,void 0],c._initialSelectionLength=0,c.register(t.addDisposableDomListener(c._element,
"mousedown",function(a){return c._onMouseDown(a)})),c._mouseMoveListener=function(a){return c._onMouseMove(a)},c._mouseLeaveListener=function(a){return c._onMouseLeave(a)},c._clickListener=function(a){return c._onClick(a)},c}return h(b,a),b.prototype.dispose=function(){a.prototype.dispose.call(this);this._deactivate()},b.prototype.add=function(a){this._zones.push(a);1===this._zones.length&&this._activate()},b.prototype.clearAll=function(a,b){if(0!==this._zones.length){a&&b||(a=0,b=this._bufferService.rows-
1);for(var e=0;e<this._zones.length;e++){var c=this._zones[e];(c.y1>a&&c.y1<=b+1||c.y2>a&&c.y2<=b+1||c.y1<a&&c.y2>b+1)&&(this._currentZone&&this._currentZone===c&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(e--,1))}0===this._zones.length&&this._deactivate()}},b.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),
this._element.addEventListener("click",this._clickListener))},b.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},b.prototype._onMouseMove=function(a){this._lastHoverCoords[0]===a.pageX&&this._lastHoverCoords[1]===a.pageY||(this._onHover(a),this._lastHoverCoords=
[a.pageX,a.pageY])},b.prototype._onHover=function(a){var b=this,c=this._findZoneEventAt(a);c!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),c&&(this._currentZone=c,c.hoverCallback&&c.hoverCallback(a),this._tooltipTimeout=window.setTimeout(function(){return b._onTooltip(a)},this._optionsService.options.linkTooltipHoverDuration)))},b.prototype._onTooltip=function(a){this._tooltipTimeout=void 0;
var b=this._findZoneEventAt(a);b&&b.tooltipCallback&&b.tooltipCallback(a)},b.prototype._onMouseDown=function(a){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var b=this._findZoneEventAt(a);(null==b?0:b.willLinkActivate(a))&&(a.preventDefault(),a.stopImmediatePropagation())}},b.prototype._onMouseLeave=function(a){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},b.prototype._onClick=
function(a){var b=this._findZoneEventAt(a),c=this._getSelectionLength();b&&c===this._initialSelectionLength&&(b.clickCallback(a),a.preventDefault(),a.stopImmediatePropagation())},b.prototype._getSelectionLength=function(){var a=this._selectionService.selectionText;return a?a.length:0},b.prototype._findZoneEventAt=function(a){var b=this._mouseService.getCoords(a,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(b){a=b[0];b=b[1];for(var c=0;c<this._zones.length;c++){var g=this._zones[c];
if(g.y1===g.y2){if(b===g.y1&&a>=g.x1&&a<g.x2)return g}else if(b===g.y1&&a>=g.x1||b===g.y2&&a<g.x2||b>g.y1&&b<g.y2)return g}}},k([q(2,l.IBufferService),q(3,g.IMouseService),q(4,g.ISelectionService),q(5,l.IOptionsService)],b)}(b.Disposable);a.MouseZoneManager=f},6193:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.RenderDebouncer=void 0;b=function(){function a(a){this._renderCallback=a}return a.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),
this._animationFrame=void 0)},a.prototype.refresh=function(a,b,f){var d=this;this._rowCount=f;a=void 0!==a?a:0;b=void 0!==b?b:this._rowCount-1;this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,a):a;this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,b):b;this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return d._innerRefresh()}))},a.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var a=
Math.max(this._rowStart,0),b=Math.min(this._rowEnd,this._rowCount-1);this._animationFrame=this._rowEnd=this._rowStart=void 0;this._renderCallback(a,b)}},a}();a.RenderDebouncer=b},5596:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(a[g]=b[g])})(a,b)},function(a,b){function f(){this.constructor=a}d(a,b);a.prototype=null===
b?Object.create(b):(f.prototype=b.prototype,new f)});Object.defineProperty(a,"__esModule",{value:!0});a.ScreenDprMonitor=void 0;b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b._currentDevicePixelRatio=window.devicePixelRatio,b}return h(b,a),b.prototype.setListener=function(a){var b=this;this._listener&&this.clearListener();this._listener=a;this._outerListener=function(){b._listener&&(b._listener(window.devicePixelRatio,b._currentDevicePixelRatio),b._updateDpr())};
this._updateDpr()},b.prototype.dispose=function(){a.prototype.dispose.call(this);this.clearListener()},b.prototype._updateDpr=function(){var a;this._outerListener&&(null===(a=this._resolutionMediaMatchList)||void 0===a||a.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},b.prototype.clearListener=
function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},b}(f(844).Disposable);a.ScreenDprMonitor=b},3236:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var e in b)Object.prototype.hasOwnProperty.call(b,
e)&&(a[e]=b[e])})(a,b)},function(a,b){function e(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)});Object.defineProperty(a,"__esModule",{value:!0});a.Terminal=void 0;var k=f(2950),q=f(1680),t=f(3614),g=f(2584),l=f(5435),n=f(3525),m=f(3551),c=f(9312),e=f(6114),v=f(3656),w=f(9042),z=f(357),y=f(6954),x=f(4567),F=f(1296),G=f(7399),A=f(8460),B=f(8437),p=f(5680),C=f(3230),E=f(4725),H=f(428),I=f(8934),J=f(6465),K=f(5114);b=f(8969);var L=f(4774),D="undefined"!=
typeof window?window.document:null;f=function(a){function b(b){void 0===b&&(b={});var c=a.call(this,b)||this;return c.browser=e,c._keyDownHandled=!1,c._onCursorMove=new A.EventEmitter,c._onKey=new A.EventEmitter,c._onRender=new A.EventEmitter,c._onSelectionChange=new A.EventEmitter,c._onTitleChange=new A.EventEmitter,c._onFocus=new A.EventEmitter,c._onBlur=new A.EventEmitter,c._onA11yCharEmitter=new A.EventEmitter,c._onA11yTabEmitter=new A.EventEmitter,c._setup(),c.linkifier=c._instantiationService.createInstance(m.Linkifier),
c.linkifier2=c.register(c._instantiationService.createInstance(J.Linkifier2)),c.register(c._inputHandler.onRequestBell(function(){return c.bell()})),c.register(c._inputHandler.onRequestRefreshRows(function(a,b){return c.refresh(a,b)})),c.register(c._inputHandler.onRequestReset(function(){return c.reset()})),c.register(c._inputHandler.onRequestScroll(function(a,b){return c.scroll(a,b||void 0)})),c.register(c._inputHandler.onRequestWindowsOptionsReport(function(a){return c._reportWindowsOptions(a)})),
c.register(c._inputHandler.onAnsiColorChange(function(a){return c._changeAnsiColor(a)})),c.register(A.forwardEvent(c._inputHandler.onCursorMove,c._onCursorMove)),c.register(A.forwardEvent(c._inputHandler.onTitleChange,c._onTitleChange)),c.register(A.forwardEvent(c._inputHandler.onA11yChar,c._onA11yCharEmitter)),c.register(A.forwardEvent(c._inputHandler.onA11yTab,c._onA11yTabEmitter)),c.register(c._bufferService.onResize(function(a){return c._afterResize(a.cols,a.rows)})),c}return h(b,a),Object.defineProperty(b.prototype,
"options",{get:function(){return this.optionsService.options},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onSelectionChange",
{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onA11yChar",
{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),b.prototype._changeAnsiColor=function(a){var b,e,c=this;this._colorManager&&(a.colors.forEach(function(a){var b=L.rgba.toColor(a.red,a.green,a.blue);c._colorManager.colors.ansi[a.colorIndex]=b}),null===(b=this._renderService)||void 0===b||b.setColors(this._colorManager.colors),null===
(e=this.viewport)||void 0===e||e.onThemeChange(this._colorManager.colors))},b.prototype.dispose=function(){var b,e,c;this._isDisposed||(a.prototype.dispose.call(this),null===(b=this._renderService)||void 0===b||b.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},null===(c=null===(e=this.element)||void 0===e?void 0:e.parentNode)||void 0===c||c.removeChild(this.element))},b.prototype._setup=function(){a.prototype._setup.call(this);this._customKeyEventHandler=void 0},Object.defineProperty(b.prototype,
"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),b.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},b.prototype._updateOptions=function(b){var e,c,g,l;switch(a.prototype._updateOptions.call(this,b),b){case "fontFamily":case "fontSize":null===(e=this._renderService)||void 0===e||e.clear();null===(c=this._charSizeService)||void 0===c||c.measure();break;case "cursorBlink":case "cursorStyle":this.refresh(this.buffer.y,this.buffer.y);
break;case "drawBoldTextInBrightColors":case "letterSpacing":case "lineHeight":case "fontWeight":case "fontWeightBold":case "minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case "rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case "scrollback":null===(g=this.viewport)||void 0===g||g.syncScrollArea();
break;case "screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new x.AccessibilityManager(this,this._renderService)):(null===(l=this._accessibilityManager)||void 0===l||l.dispose(),this._accessibilityManager=void 0);break;case "tabStopWidth":this.buffers.setupTabStops();break;case "theme":this._setTheme(this.optionsService.options.theme)}},b.prototype._onTextAreaFocus=function(a){this._coreService.decPrivateModes.sendFocus&&
this._coreService.triggerDataEvent(g.C0.ESC+"[I");this.updateCursorStyle(a);this.element.classList.add("focus");this._showCursor();this._onFocus.fire()},b.prototype.blur=function(){var a;return null===(a=this.textarea)||void 0===a?void 0:a.blur()},b.prototype._onTextAreaBlur=function(){this.textarea.value="";this.refresh(this.buffer.y,this.buffer.y);this._coreService.decPrivateModes.sendFocus&&this._coreService.triggerDataEvent(g.C0.ESC+"[O");this.element.classList.remove("focus");this._onBlur.fire()},
b.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing){var a=Math.ceil(this._charSizeService.height*this.optionsService.options.lineHeight),b=this._bufferService.buffer.y*a;this.textarea.style.left=this._bufferService.buffer.x*this._charSizeService.width+"px";this.textarea.style.top=b+"px";this.textarea.style.width=this._charSizeService.width+"px";this.textarea.style.height=a+"px";this.textarea.style.lineHeight=a+"px";this.textarea.style.zIndex=
"-5"}},b.prototype._initGlobal=function(){var a=this;this._bindKeys();this.register(v.addDisposableDomListener(this.element,"copy",function(b){a.hasSelection()&&t.copyHandler(b,a._selectionService)}));var b=function(b){return t.handlePasteEvent(b,a.textarea,a._coreService)};this.register(v.addDisposableDomListener(this.textarea,"paste",b));this.register(v.addDisposableDomListener(this.element,"paste",b));e.isFirefox?this.register(v.addDisposableDomListener(this.element,"mousedown",function(b){2===
b.button&&t.rightClickHandler(b,a.textarea,a.screenElement,a._selectionService,a.options.rightClickSelectsWord)})):this.register(v.addDisposableDomListener(this.element,"contextmenu",function(b){t.rightClickHandler(b,a.textarea,a.screenElement,a._selectionService,a.options.rightClickSelectsWord)}));e.isLinux&&this.register(v.addDisposableDomListener(this.element,"auxclick",function(b){1===b.button&&t.moveTextAreaUnderMouseCursor(b,a.textarea,a.screenElement)}))},b.prototype._bindKeys=function(){var a=
this;this.register(v.addDisposableDomListener(this.textarea,"keyup",function(b){return a._keyUp(b)},!0));this.register(v.addDisposableDomListener(this.textarea,"keydown",function(b){return a._keyDown(b)},!0));this.register(v.addDisposableDomListener(this.textarea,"keypress",function(b){return a._keyPress(b)},!0));this.register(v.addDisposableDomListener(this.textarea,"compositionstart",function(){return a._compositionHelper.compositionstart()}));this.register(v.addDisposableDomListener(this.textarea,
"compositionupdate",function(b){return a._compositionHelper.compositionupdate(b)}));this.register(v.addDisposableDomListener(this.textarea,"compositionend",function(){return a._compositionHelper.compositionend()}));this.register(this.onRender(function(){return a._compositionHelper.updateCompositionElements()}));this.register(this.onRender(function(b){return a._queueLinkification(b.start,b.end)}))},b.prototype.open=function(a){var b=this;if(!a)throw Error("Terminal requires a parent element.");a.isConnected||
this._logService.debug("Terminal.open was called on an element that was not attached to the DOM");this._document=a.ownerDocument;this.element=this._document.createElement("div");this.element.dir="ltr";this.element.classList.add("terminal");this.element.classList.add("xterm");this.element.setAttribute("tabindex","0");this.element.setAttribute("role","document");a.appendChild(this.element);a=D.createDocumentFragment();this._viewportElement=D.createElement("div");this._viewportElement.classList.add("xterm-viewport");
a.appendChild(this._viewportElement);this._viewportScrollArea=D.createElement("div");this._viewportScrollArea.classList.add("xterm-scroll-area");this._viewportElement.appendChild(this._viewportScrollArea);this.screenElement=D.createElement("div");this.screenElement.classList.add("xterm-screen");this._helperContainer=D.createElement("div");this._helperContainer.classList.add("xterm-helpers");this.screenElement.appendChild(this._helperContainer);a.appendChild(this.screenElement);this.textarea=D.createElement("textarea");
this.textarea.classList.add("xterm-helper-textarea");this.textarea.setAttribute("aria-label",w.promptLabel);this.textarea.setAttribute("aria-multiline","false");this.textarea.setAttribute("autocorrect","off");this.textarea.setAttribute("autocapitalize","off");this.textarea.setAttribute("spellcheck","false");this.textarea.tabIndex=0;this.register(v.addDisposableDomListener(this.textarea,"focus",function(a){return b._onTextAreaFocus(a)}));this.register(v.addDisposableDomListener(this.textarea,"blur",
function(){return b._onTextAreaBlur()}));this._helperContainer.appendChild(this.textarea);var e=this._instantiationService.createInstance(K.CoreBrowserService,this.textarea);this._instantiationService.setService(E.ICoreBrowserService,e);this._charSizeService=this._instantiationService.createInstance(H.CharSizeService,this._document,this._helperContainer);this._instantiationService.setService(E.ICharSizeService,this._charSizeService);this._compositionView=D.createElement("div");this._compositionView.classList.add("composition-view");
this._compositionHelper=this._instantiationService.createInstance(k.CompositionHelper,this.textarea,this._compositionView);this._helperContainer.appendChild(this._compositionView);this.element.appendChild(a);this._theme=this.options.theme||this._theme;this._colorManager=new p.ColorManager(D,this.options.allowTransparency);this.register(this.optionsService.onOptionChange(function(a){return b._colorManager.onOptionsChange(a)}));this._colorManager.setTheme(this._theme);a=this._createRenderer();this._renderService=
this.register(this._instantiationService.createInstance(C.RenderService,a,this.rows,this.screenElement));this._instantiationService.setService(E.IRenderService,this._renderService);this.register(this._renderService.onRenderedBufferChange(function(a){return b._onRender.fire(a)}));this.onResize(function(a){return b._renderService.resize(a.cols,a.rows)});this._soundService=this._instantiationService.createInstance(z.SoundService);this._instantiationService.setService(E.ISoundService,this._soundService);
this._mouseService=this._instantiationService.createInstance(I.MouseService);this._instantiationService.setService(E.IMouseService,this._mouseService);this.viewport=this._instantiationService.createInstance(q.Viewport,function(a,e){return b.scrollLines(a,e)},this._viewportElement,this._viewportScrollArea);this.viewport.onThemeChange(this._colorManager.colors);this.register(this._inputHandler.onRequestSyncScrollBar(function(){return b.viewport.syncScrollArea()}));this.register(this.viewport);this.register(this.onCursorMove(function(){b._renderService.onCursorMove();
b._syncTextArea()}));this.register(this.onResize(function(){return b._renderService.onResize(b.cols,b.rows)}));this.register(this.onBlur(function(){return b._renderService.onBlur()}));this.register(this.onFocus(function(){return b._renderService.onFocus()}));this.register(this._renderService.onDimensionsChange(function(){return b.viewport.syncScrollArea()}));this._selectionService=this.register(this._instantiationService.createInstance(c.SelectionService,this.element,this.screenElement));this._instantiationService.setService(E.ISelectionService,
this._selectionService);this.register(this._selectionService.onRequestScrollLines(function(a){return b.scrollLines(a.amount,a.suppressScrollEvent)}));this.register(this._selectionService.onSelectionChange(function(){return b._onSelectionChange.fire()}));this.register(this._selectionService.onRequestRedraw(function(a){return b._renderService.onSelectionChanged(a.start,a.end,a.columnSelectMode)}));this.register(this._selectionService.onLinuxMouseSelection(function(a){b.textarea.value=a;b.textarea.focus();
b.textarea.select()}));this.register(this.onScroll(function(){b.viewport.syncScrollArea();b._selectionService.refresh()}));this.register(v.addDisposableDomListener(this._viewportElement,"scroll",function(){return b._selectionService.refresh()}));this._mouseZoneManager=this._instantiationService.createInstance(y.MouseZoneManager,this.element,this.screenElement);this.register(this._mouseZoneManager);this.register(this.onScroll(function(){return b._mouseZoneManager.clearAll()}));this.linkifier.attachToDom(this.element,
this._mouseZoneManager);this.linkifier2.attachToDom(this.element,this._mouseService,this._renderService);this.register(v.addDisposableDomListener(this.element,"mousedown",function(a){return b._selectionService.onMouseDown(a)}));this._coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable();this.options.screenReaderMode&&(this._accessibilityManager=new x.AccessibilityManager(this,this._renderService));
this._charSizeService.measure();this.refresh(0,this.rows-1);this._initGlobal();this.bindMouse()},b.prototype._createRenderer=function(){switch(this.options.rendererType){case "canvas":return this._instantiationService.createInstance(n.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case "dom":return this._instantiationService.createInstance(F.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);
default:throw Error('Unrecognized rendererType "'+this.options.rendererType+'"');}},b.prototype._setTheme=function(a){var b,e,c;this._theme=a;null===(b=this._colorManager)||void 0===b||b.setTheme(a);null===(e=this._renderService)||void 0===e||e.setColors(this._colorManager.colors);null===(c=this.viewport)||void 0===c||c.onThemeChange(this._colorManager.colors)},b.prototype.bindMouse=function(){function a(a){var b,c=e._mouseService.getRawByteCoords(a,e.screenElement,e.cols,e.rows);if(!c)return!1;switch(a.overrideType||
a.type){case "mousemove":var g=32;void 0===a.buttons?(b=3,void 0!==a.button&&(b=3>a.button?a.button:3)):b=1&a.buttons?0:4&a.buttons?1:2&a.buttons?2:3;break;case "mouseup":g=0;b=3>a.button?a.button:3;break;case "mousedown":g=1;b=3>a.button?a.button:3;break;case "wheel":0!==a.deltaY&&(g=0>a.deltaY?0:1);b=4;break;default:return!1}return!(void 0===g||void 0===b||4<b)&&e._coreMouseService.triggerMouseEvent({col:c.x-33,row:c.y-33,button:b,action:g,ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey})}var b=this,
e=this,c=this.element,l=null,d=null,m=null,f=null,n=function(e){return a(e),e.buttons||(b._document.removeEventListener("mouseup",l),m&&b._document.removeEventListener("mousemove",m)),b.cancel(e)},h=function(e){return a(e),e.preventDefault(),b.cancel(e)},t=function(b){b.buttons&&a(b)},k=function(b){b.buttons||a(b)};this.register(this._coreMouseService.onProtocolChange(function(a){a?("debug"===b.optionsService.options.logLevel&&b._logService.debug("Binding to mouse events:",b._coreMouseService.explainEvents(a)),
b.element.classList.add("enable-mouse-events"),b._selectionService.disable()):(b._logService.debug("Unbinding from mouse events."),b.element.classList.remove("enable-mouse-events"),b._selectionService.enable());8&a?f||(c.addEventListener("mousemove",k),f=k):(c.removeEventListener("mousemove",f),f=null);16&a?d||(c.addEventListener("wheel",h,{passive:!1}),d=h):(c.removeEventListener("wheel",d),d=null);2&a?l||(l=n):(b._document.removeEventListener("mouseup",l),l=null);4&a?m||(m=t):(b._document.removeEventListener("mousemove",
m),m=null)}));this._coreMouseService.activeProtocol=this._coreMouseService.activeProtocol;this.register(v.addDisposableDomListener(c,"mousedown",function(e){if(e.preventDefault(),b.focus(),b._coreMouseService.areMouseEventsActive&&!b._selectionService.shouldForceSelection(e))return a(e),l&&b._document.addEventListener("mouseup",l),m&&b._document.addEventListener("mousemove",m),b.cancel(e)}));this.register(v.addDisposableDomListener(c,"wheel",function(a){if(!d&&!b.buffer.hasScrollback){var e=b.viewport.getLinesScrolled(a);
if(0!==e){a=g.C0.ESC+(b._coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(0>a.deltaY?"A":"B");for(var c="",l=0;l<Math.abs(e);l++)c+=a;b._coreService.triggerDataEvent(c,!0)}}},{passive:!0}));this.register(v.addDisposableDomListener(c,"wheel",function(a){if(!d)return b.viewport.onWheel(a)?void 0:b.cancel(a)},{passive:!1}));this.register(v.addDisposableDomListener(c,"touchstart",function(a){if(!b._coreMouseService.areMouseEventsActive)return b.viewport.onTouchStart(a),b.cancel(a)},{passive:!0}));
this.register(v.addDisposableDomListener(c,"touchmove",function(a){if(!b._coreMouseService.areMouseEventsActive)return b.viewport.onTouchMove(a)?void 0:b.cancel(a)},{passive:!1}))},b.prototype.refresh=function(a,b){var e;null===(e=this._renderService)||void 0===e||e.refreshRows(a,b)},b.prototype._queueLinkification=function(a,b){var e;null===(e=this.linkifier)||void 0===e||e.linkifyRows(a,b)},b.prototype.updateCursorStyle=function(a){this._selectionService&&this._selectionService.shouldColumnSelect(a)?
this.element.classList.add("column-select"):this.element.classList.remove("column-select")},b.prototype._showCursor=function(){this._coreService.isCursorInitialized||(this._coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},b.prototype.scrollLines=function(b,e){a.prototype.scrollLines.call(this,b,e);this.refresh(0,this.rows-1)},b.prototype.paste=function(a){t.paste(a,this.textarea,this._coreService)},b.prototype.attachCustomKeyEventHandler=function(a){this._customKeyEventHandler=
a},b.prototype.registerLinkMatcher=function(a,b,e){a=this.linkifier.registerLinkMatcher(a,b,e);return this.refresh(0,this.rows-1),a},b.prototype.deregisterLinkMatcher=function(a){this.linkifier.deregisterLinkMatcher(a)&&this.refresh(0,this.rows-1)},b.prototype.registerLinkProvider=function(a){return this.linkifier2.registerLinkProvider(a)},b.prototype.registerCharacterJoiner=function(a){a=this._renderService.registerCharacterJoiner(a);return this.refresh(0,this.rows-1),a},b.prototype.deregisterCharacterJoiner=
function(a){this._renderService.deregisterCharacterJoiner(a)&&this.refresh(0,this.rows-1)},Object.defineProperty(b.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),b.prototype.addMarker=function(a){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+a)},b.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},b.prototype.select=function(a,b,e){this._selectionService.setSelection(a,
b,e)},b.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},b.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},b.prototype.clearSelection=function(){var a;null===(a=this._selectionService)||
void 0===a||a.clearSelection()},b.prototype.selectAll=function(){var a;null===(a=this._selectionService)||void 0===a||a.selectAll()},b.prototype.selectLines=function(a,b){var e;null===(e=this._selectionService)||void 0===e||e.selectLines(a,b)},b.prototype._keyDown=function(a){if(this._keyDownHandled=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(a))return!1;if(!this._compositionHelper.keydown(a))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var b=G.evaluateKeyboardEvent(a,
this._coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(a),3===b.type||2===b.type){var e=this.rows-1;return this.scrollLines(2===b.type?-e:e),this.cancel(a,!0)}return 1===b.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,a)||(b.cancel&&this.cancel(a,!0),!b.key||(b.key!==g.C0.ETX&&b.key!==g.C0.CR||(this.textarea.value=""),this._onKey.fire({key:b.key,domEvent:a}),this._showCursor(),this._coreService.triggerDataEvent(b.key,
!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(a,!0)))},b.prototype._isThirdLevelShift=function(a,b){a=a.isMac&&!this.options.macOptionIsMeta&&b.altKey&&!b.ctrlKey&&!b.metaKey||a.isWindows&&b.altKey&&b.ctrlKey&&!b.metaKey;return"keypress"===b.type?a:a&&(!b.keyCode||47<b.keyCode)},b.prototype._keyUp=function(a){this._customKeyEventHandler&&!1===this._customKeyEventHandler(a)||(16===a.keyCode||17===a.keyCode||18===a.keyCode||this.focus(),this.updateCursorStyle(a))},
b.prototype._keyPress=function(a){if(this._keyDownHandled||this._customKeyEventHandler&&!1===this._customKeyEventHandler(a))return!1;if(this.cancel(a),a.charCode)var b=a.charCode;else if(null===a.which||void 0===a.which)b=a.keyCode;else{if(0===a.which||0===a.charCode)return!1;b=a.which}return!(!b||(a.altKey||a.ctrlKey||a.metaKey)&&!this._isThirdLevelShift(this.browser,a)||(b=String.fromCharCode(b),this._onKey.fire({key:b,domEvent:a}),this._showCursor(),this._coreService.triggerDataEvent(b,!0),0))},
b.prototype.bell=function(){this._soundBell()&&this._soundService.playBellSound()},b.prototype.resize=function(b,e){b!==this.cols||e!==this.rows?a.prototype.resize.call(this,b,e):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},b.prototype._afterResize=function(a,b){var e,c;null===(e=this._charSizeService)||void 0===e||e.measure();null===(c=this.viewport)||void 0===c||c.syncScrollArea(!0)},b.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,
this.buffer.lines.get(this.buffer.ybase+this.buffer.y));this.buffer.lines.length=1;this.buffer.ydisp=0;this.buffer.ybase=0;this.buffer.y=0;for(var a=1;a<this.rows;a++)this.buffer.lines.push(this.buffer.getBlankLine(B.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1);this._onScroll.fire(this.buffer.ydisp)}},b.prototype.reset=function(){var b,e;this.options.rows=this.rows;this.options.cols=this.cols;var c=this._customKeyEventHandler;this._setup();a.prototype.reset.call(this);null===(b=this._selectionService)||
void 0===b||b.reset();this._customKeyEventHandler=c;this.refresh(0,this.rows-1);null===(e=this.viewport)||void 0===e||e.syncScrollArea()},b.prototype._reportWindowsOptions=function(a){if(this._renderService)switch(a){case l.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:a=this._renderService.dimensions.scaledCanvasWidth.toFixed(0);var b=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this._coreService.triggerDataEvent(g.C0.ESC+"[4;"+b+";"+a+"t");break;case l.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:a=
this._renderService.dimensions.scaledCellWidth.toFixed(0),b=this._renderService.dimensions.scaledCellHeight.toFixed(0),this._coreService.triggerDataEvent(g.C0.ESC+"[6;"+b+";"+a+"t")}},b.prototype.cancel=function(a,b){if(this.options.cancelEvents||b)return a.preventDefault(),a.stopPropagation(),!1},b.prototype._visualBell=function(){return!1},b.prototype._soundBell=function(){return"sound"===this.options.bellStyle},b}(b.CoreTerminal);a.Terminal=f},1680:function(b,a,f){var d,h=this&&this.__extends||
(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])})(a,b)},function(a,b){function c(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),k=this&&this.__decorate||function(a,b,c,e){var g,l=arguments.length,d=3>l?b:null===e?e=Object.getOwnPropertyDescriptor(b,c):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=
Reflect.decorate(a,b,c,e);else for(var m=a.length-1;0<=m;m--)(g=a[m])&&(d=(3>l?g(d):3<l?g(b,c,d):g(b,c))||d);return 3<l&&d&&Object.defineProperty(b,c,d),d},q=this&&this.__param||function(a,b){return function(c,e){b(c,e,a)}};Object.defineProperty(a,"__esModule",{value:!0});a.Viewport=void 0;b=f(844);var t=f(3656),g=f(4725),l=f(2585);f=function(a){function b(b,e,g,l,d,m,f){var c=a.call(this)||this;return c._scrollLines=b,c._viewportElement=e,c._scrollArea=g,c._bufferService=l,c._optionsService=d,c._charSizeService=
m,c._renderService=f,c.scrollBarWidth=0,c._currentRowHeight=0,c._lastRecordedBufferLength=0,c._lastRecordedViewportHeight=0,c._lastRecordedBufferHeight=0,c._lastTouchY=0,c._lastScrollTop=0,c._wheelPartialScroll=0,c._refreshAnimationFrame=null,c._ignoreNextScrollEvent=!1,c.scrollBarWidth=c._viewportElement.offsetWidth-c._scrollArea.offsetWidth||15,c.register(t.addDisposableDomListener(c._viewportElement,"scroll",c._onScroll.bind(c))),setTimeout(function(){return c.syncScrollArea()},0),c}return h(b,
a),b.prototype.onThemeChange=function(a){this._viewportElement.style.backgroundColor=a.background.css},b.prototype._refresh=function(a){var b=this;if(a)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return b._innerRefresh()}))},b.prototype._innerRefresh=function(){if(0<this._charSizeService.height){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/
window.devicePixelRatio;this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var a=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==a&&(this._lastRecordedBufferHeight=a,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=
!0,this._viewportElement.scrollTop=a);this._refreshAnimationFrame=null},b.prototype.syncScrollArea=function(a){if(void 0===a&&(a=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(a);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight?this._lastScrollTop===this._bufferService.buffer.ydisp*this._currentRowHeight&&this._lastScrollTop===this._viewportElement.scrollTop&&
this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio===this._currentRowHeight||this._refresh(a):this._refresh(a)},b.prototype._onScroll=function(a){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent)this._ignoreNextScrollEvent?this._ignoreNextScrollEvent=!1:this._scrollLines(Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp,!0)},b.prototype._bubbleScroll=function(a,b){var e=this._viewportElement.scrollTop+
this._lastRecordedViewportHeight;return!(0>b&&0!==this._viewportElement.scrollTop||0<b&&e<this._lastRecordedBufferHeight)||(a.cancelable&&a.preventDefault(),!1)},b.prototype.onWheel=function(a){var b=this._getPixelsScrolled(a);return 0!==b&&(this._viewportElement.scrollTop+=b,this._bubbleScroll(a,b))},b.prototype._getPixelsScrolled=function(a){if(0===a.deltaY)return 0;var b=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_LINE?b*=this._currentRowHeight:a.deltaMode===
WheelEvent.DOM_DELTA_PAGE&&(b*=this._currentRowHeight*this._bufferService.rows),b},b.prototype.getLinesScrolled=function(a){if(0===a.deltaY)return 0;var b=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(b/=this._currentRowHeight+0,this._wheelPartialScroll+=b,b=Math.floor(Math.abs(this._wheelPartialScroll))*(0<this._wheelPartialScroll?1:-1),this._wheelPartialScroll%=1):a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(b*=this._bufferService.rows),b},b.prototype._applyScrollModifier=
function(a,b){var e=this._optionsService.options.fastScrollModifier;return"alt"===e&&b.altKey||"ctrl"===e&&b.ctrlKey||"shift"===e&&b.shiftKey?a*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:a*this._optionsService.options.scrollSensitivity},b.prototype.onTouchStart=function(a){this._lastTouchY=a.touches[0].pageY},b.prototype.onTouchMove=function(a){var b=this._lastTouchY-a.touches[0].pageY;return this._lastTouchY=a.touches[0].pageY,0!==b&&(this._viewportElement.scrollTop+=
b,this._bubbleScroll(a,b))},k([q(3,l.IBufferService),q(4,l.IOptionsService),q(5,g.ICharSizeService),q(6,g.IRenderService)],b)}(b.Disposable);a.Viewport=f},2950:function(b,a,f){var d=this&&this.__decorate||function(a,b,l,d){var g,c=arguments.length,e=3>c?b:null===d?d=Object.getOwnPropertyDescriptor(b,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(a,b,l,d);else for(var f=a.length-1;0<=f;f--)(g=a[f])&&(e=(3>c?g(e):3<c?g(b,l,e):g(b,l))||e);return 3<c&&e&&Object.defineProperty(b,
l,e),e},h=this&&this.__param||function(a,b){return function(g,d){b(g,d,a)}};Object.defineProperty(a,"__esModule",{value:!0});a.CompositionHelper=void 0;var k=f(4725),q=f(2585);b=function(){function a(a,b,d,m,c,e){this._textarea=a;this._compositionView=b;this._bufferService=d;this._optionsService=m;this._charSizeService=c;this._coreService=e;this._isSendingComposition=this._isComposing=!1;this._compositionPosition={start:0,end:0};this._dataAlreadySent=""}return Object.defineProperty(a.prototype,"isComposing",
{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),a.prototype.compositionstart=function(){this._isComposing=!0;this._compositionPosition.start=this._textarea.value.length;this._dataAlreadySent=this._compositionView.textContent="";this._compositionView.classList.add("active")},a.prototype.compositionupdate=function(a){var b=this;this._compositionView.textContent=a.data;this.updateCompositionElements();setTimeout(function(){b._compositionPosition.end=b._textarea.value.length},
0)},a.prototype.compositionend=function(){this._finalizeComposition(!0)},a.prototype.keydown=function(a){if(this._isComposing||this._isSendingComposition){if(229===a.keyCode||16===a.keyCode||17===a.keyCode||18===a.keyCode)return!1;this._finalizeComposition(!1)}return 229!==a.keyCode||(this._handleAnyTextareaChanges(),!1)},a.prototype._finalizeComposition=function(a){var b=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,a){var g=this._compositionPosition.start,d=this._compositionPosition.end;
this._isSendingComposition=!0;setTimeout(function(){if(b._isSendingComposition){b._isSendingComposition=!1;var a;g+=b._dataAlreadySent.length;0<(a=b._isComposing?b._textarea.value.substring(g,d):b._textarea.value.substring(g)).length&&b._coreService.triggerDataEvent(a,!0)}},0)}else this._isSendingComposition=!1,a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end),this._coreService.triggerDataEvent(a,!0)},a.prototype._handleAnyTextareaChanges=function(){var a=
this,b=this._textarea.value;setTimeout(function(){if(!a._isComposing){var g=a._textarea.value.replace(b,"");0<g.length&&(a._dataAlreadySent=g,a._coreService.triggerDataEvent(g,!0))}},0)},a.prototype.updateCompositionElements=function(a){var b=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var g=Math.ceil(this._charSizeService.height*this._optionsService.options.lineHeight),d=this._bufferService.buffer.y*g,c=this._bufferService.buffer.x*this._charSizeService.width;this._compositionView.style.left=
c+"px";this._compositionView.style.top=d+"px";this._compositionView.style.height=g+"px";this._compositionView.style.lineHeight=g+"px";this._compositionView.style.fontFamily=this._optionsService.options.fontFamily;this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";g=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px";this._textarea.style.top=d+"px";this._textarea.style.width=g.width+"px";this._textarea.style.height=g.height+"px";this._textarea.style.lineHeight=
g.height+"px"}a||setTimeout(function(){return b.updateCompositionElements(!0)},0)}},d([h(2,q.IBufferService),h(3,q.IOptionsService),h(4,k.ICharSizeService),h(5,q.ICoreService)],a)}();a.CompositionHelper=b},9806:function(b,a){function f(a,b){b=b.getBoundingClientRect();return[a.clientX-b.left,a.clientY-b.top]}Object.defineProperty(a,"__esModule",{value:!0});a.getRawByteCoords=a.getCoords=a.getCoordsRelativeToElement=void 0;a.getCoordsRelativeToElement=f;a.getCoords=function(a,b,h,k,t,g,l,n){if(t&&
(a=f(a,b)))return a[0]=Math.ceil((a[0]+(n?g/2:0))/g),a[1]=Math.ceil(a[1]/l),a[0]=Math.min(Math.max(a[0],1),h+(n?1:0)),a[1]=Math.min(Math.max(a[1],1),k),a};a.getRawByteCoords=function(a){if(a)return{x:a[0]+32,y:a[1]+32}}},9504:function(b,a,f){function d(a,b,g,c){var e=a-h(g,a),l=b-h(g,b);e=Math.abs(e-l);l=0;for(var d=a-h(g,a),m=b-h(g,b),f=0;f<Math.abs(d-m);f++){var n=g.buffer.lines.get(d+("A"===(a>b?"A":"B")?-1:1)*f);n&&n.isWrapped&&l++}return t(e-l,q(a>b?"A":"B",c))}function h(a,b){for(var g=0,c=
a.buffer.lines.get(b),e=c&&c.isWrapped;e&&0<=b&&b<a.rows;)g++,e=(c=a.buffer.lines.get(--b))&&c.isWrapped;return g}function k(a,b,g,c,e,d){for(var l=a,m="";l!==g||b!==c;)l+=e?1:-1,e&&l>d.cols-1?(m+=d.buffer.translateBufferLineToString(b,!1,a,l),l=0,a=0,b++):!e&&0>l&&(m+=d.buffer.translateBufferLineToString(b,!1,0,a+1),a=l=d.cols-1,b--);return m+d.buffer.translateBufferLineToString(b,!1,a,l)}function q(a,b){return g.C0.ESC+(b?"O":"[")+a}function t(a,b){a=Math.floor(a);for(var g="",c=0;c<a;c++)g+=b;
return g}Object.defineProperty(a,"__esModule",{value:!0});a.moveToCellSequence=void 0;var g=f(2584);a.moveToCellSequence=function(a,b,g,c){var e,l=g.buffer.x,m=g.buffer.y;return g.buffer.hasScrollback?m===b?(e=l>a?"D":"C",t(Math.abs(l-a),q(e,c))):t(g.cols-(m>b?a:l)+(Math.abs(m-b)-1)*g.cols+1+((m>b?l:a)-1),q(m>b?"D":"C",c)):function(a,b,e,c,g,l){return 0===d(b,c,g,l).length?"":t(k(a,b,a,b-h(g,b),!1,g).length,q("D",l))}(l,m,0,b,g,c)+d(m,b,g,c)+function(a,b,e,c,g,l){var m=0<d(b,c,g,l).length?c-h(g,c):
b;var f;b=(f=0<d(e,c,g,l).length?c-h(g,c):b,a<e&&f<=c||a>=e&&f<c?"C":"D");return t(k(a,m,e,c,"C"===b,g).length,q(b,l))}(l,m,a,b,g,c)}},244:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.AddonManager=void 0;b=function(){function a(){this._addons=[]}return a.prototype.dispose=function(){for(var a=this._addons.length-1;0<=a;a--)this._addons[a].instance.dispose()},a.prototype.loadAddon=function(a,b){var d=this,f={instance:b,dispose:b.dispose,isDisposed:!1};this._addons.push(f);b.dispose=
function(){return d._wrappedAddonDispose(f)};b.activate(a)},a.prototype._wrappedAddonDispose=function(a){if(!a.isDisposed){for(var b=-1,d=0;d<this._addons.length;d++)if(this._addons[d]===a){b=d;break}if(-1===b)throw Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0;a.dispose.apply(a.instance);this._addons.splice(b,1)}},a}();a.AddonManager=b},4389:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.Terminal=void 0;var d=f(511),h=f(3236),k=f(9042),q=f(8460),
t=f(244);b=function(){function a(a){this._core=new h.Terminal(a);this._addonManager=new t.AddonManager}return a.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw Error("You must set the allowProposedApi option to true to use proposed API");},Object.defineProperty(a.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},
enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},
enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),
Object.defineProperty(a.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new m(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"unicode",{get:function(){return this._checkProposedApi(),new c(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"textarea",{get:function(){return this._core.textarea},
enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new l(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"markers",{get:function(){return this._checkProposedApi(),
this._core.markers},enumerable:!1,configurable:!0}),a.prototype.blur=function(){this._core.blur()},a.prototype.focus=function(){this._core.focus()},a.prototype.resize=function(a,b){this._verifyIntegers(a,b);this._core.resize(a,b)},a.prototype.open=function(a){this._core.open(a)},a.prototype.attachCustomKeyEventHandler=function(a){this._core.attachCustomKeyEventHandler(a)},a.prototype.registerLinkMatcher=function(a,b,c){return this._checkProposedApi(),this._core.registerLinkMatcher(a,b,c)},a.prototype.deregisterLinkMatcher=
function(a){this._checkProposedApi();this._core.deregisterLinkMatcher(a)},a.prototype.registerLinkProvider=function(a){return this._checkProposedApi(),this._core.registerLinkProvider(a)},a.prototype.registerCharacterJoiner=function(a){return this._checkProposedApi(),this._core.registerCharacterJoiner(a)},a.prototype.deregisterCharacterJoiner=function(a){this._checkProposedApi();this._core.deregisterCharacterJoiner(a)},a.prototype.registerMarker=function(a){return this._checkProposedApi(),this._verifyIntegers(a),
this._core.addMarker(a)},a.prototype.addMarker=function(a){return this.registerMarker(a)},a.prototype.hasSelection=function(){return this._core.hasSelection()},a.prototype.select=function(a,b,c){this._verifyIntegers(a,b,c);this._core.select(a,b,c)},a.prototype.getSelection=function(){return this._core.getSelection()},a.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},a.prototype.clearSelection=function(){this._core.clearSelection()},a.prototype.selectAll=function(){this._core.selectAll()},
a.prototype.selectLines=function(a,b){this._verifyIntegers(a,b);this._core.selectLines(a,b)},a.prototype.dispose=function(){this._addonManager.dispose();this._core.dispose()},a.prototype.scrollLines=function(a){this._verifyIntegers(a);this._core.scrollLines(a)},a.prototype.scrollPages=function(a){this._verifyIntegers(a);this._core.scrollPages(a)},a.prototype.scrollToTop=function(){this._core.scrollToTop()},a.prototype.scrollToBottom=function(){this._core.scrollToBottom()},a.prototype.scrollToLine=
function(a){this._verifyIntegers(a);this._core.scrollToLine(a)},a.prototype.clear=function(){this._core.clear()},a.prototype.write=function(a,b){this._core.write(a,b)},a.prototype.writeUtf8=function(a,b){this._core.write(a,b)},a.prototype.writeln=function(a,b){this._core.write(a);this._core.write("\r\n",b)},a.prototype.paste=function(a){this._core.paste(a)},a.prototype.getOption=function(a){return this._core.optionsService.getOption(a)},a.prototype.setOption=function(a,b){this._core.optionsService.setOption(a,
b)},a.prototype.refresh=function(a,b){this._verifyIntegers(a,b);this._core.refresh(a,b)},a.prototype.reset=function(){this._core.reset()},a.prototype.loadAddon=function(a){return this._addonManager.loadAddon(this,a)},Object.defineProperty(a,"strings",{get:function(){return k},enumerable:!1,configurable:!0}),a.prototype._verifyIntegers=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(b=0;b<a.length;b++){var c=a[b];if(c===1/0||isNaN(c)||0!=c%1)throw Error("This API only accepts integers");
}},a}();a.Terminal=b;var g=function(){function a(a,b){this._buffer=a;this.type=b}return a.prototype.init=function(a){return this._buffer=a,this},Object.defineProperty(a.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,
"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),a.prototype.getLine=function(a){if(a=this._buffer.lines.get(a))return new n(a)},a.prototype.getNullCell=function(){return new d.CellData},a}(),l=function(){function a(a){var b=this;this._core=a;this._onBufferChange=new q.EventEmitter;this._normal=new g(this._core.buffers.normal,"normal");this._alternate=
new g(this._core.buffers.alt,"alternate");this._core.buffers.onBufferActivate(function(){return b._onBufferChange.fire(b.active)})}return Object.defineProperty(a.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw Error("Active buffer is neither normal nor alternate");
},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),a}(),n=function(){function a(a){this._line=a}return Object.defineProperty(a.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,
"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),a.prototype.getCell=function(a,b){if(!(0>a||a>=this._line.length))return b?(this._line.loadCell(a,b),b):this._line.loadCell(a,new d.CellData)},a.prototype.translateToString=function(a,b,c){return this._line.translateToString(a,b,c)},a}(),m=function(){function a(a){this._core=a}return a.prototype.registerCsiHandler=function(a,b){return this._core.addCsiHandler(a,function(a){return b(a.toArray())})},a.prototype.addCsiHandler=
function(a,b){return this.registerCsiHandler(a,b)},a.prototype.registerDcsHandler=function(a,b){return this._core.addDcsHandler(a,function(a,c){return b(a,c.toArray())})},a.prototype.addDcsHandler=function(a,b){return this.registerDcsHandler(a,b)},a.prototype.registerEscHandler=function(a,b){return this._core.addEscHandler(a,b)},a.prototype.addEscHandler=function(a,b){return this.registerEscHandler(a,b)},a.prototype.registerOscHandler=function(a,b){return this._core.addOscHandler(a,b)},a.prototype.addOscHandler=
function(a,b){return this.registerOscHandler(a,b)},a}(),c=function(){function a(a){this._core=a}return a.prototype.register=function(a){this._core.unicodeService.register(a)},Object.defineProperty(a.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(a){this._core.unicodeService.activeVersion=a},enumerable:!1,configurable:!0}),
a}()},1546:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.BaseRenderLayer=void 0;var d=f(643),h=f(8803),k=f(1420),q=f(3734),t=f(1752),g=f(4774),l=f(9631);b=function(){function a(a,b,e,g,l,d,f,n){this._container=a;this._alpha=g;this._colors=l;this._rendererId=d;this._bufferService=f;this._optionsService=n;this._scaledCharTop=this._scaledCharLeft=this._scaledCellHeight=this._scaledCellWidth=this._scaledCharHeight=this._scaledCharWidth=0;this._currentGlyphIdentifier={chars:"",code:0,
bg:0,fg:0,bold:!1,dim:!1,italic:!1};this._canvas=document.createElement("canvas");this._canvas.classList.add("xterm-"+b+"-layer");this._canvas.style.zIndex=e.toString();this._initCanvas();this._container.appendChild(this._canvas)}return a.prototype.dispose=function(){var a;l.removeElementFromParent(this._canvas);null===(a=this._charAtlas)||void 0===a||a.dispose()},a.prototype._initCanvas=function(){this._ctx=t.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha}));this._alpha||this._clearAll()},
a.prototype.onOptionsChanged=function(){},a.prototype.onBlur=function(){},a.prototype.onFocus=function(){},a.prototype.onCursorMove=function(){},a.prototype.onGridChanged=function(a,b){},a.prototype.onSelectionChanged=function(a,b,e){},a.prototype.setColors=function(a){this._refreshCharAtlas(a)},a.prototype._setTransparency=function(a){if(a!==this._alpha){var b=this._canvas;this._alpha=a;this._canvas=this._canvas.cloneNode();this._initCanvas();this._container.replaceChild(this._canvas,b);this._refreshCharAtlas(this._colors);
this.onGridChanged(0,this._bufferService.rows-1)}},a.prototype._refreshCharAtlas=function(a){0>=this._scaledCharWidth&&0>=this._scaledCharHeight||(this._charAtlas=k.acquireCharAtlas(this._optionsService.options,this._rendererId,a,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},a.prototype.resize=function(a){this._scaledCellWidth=a.scaledCellWidth;this._scaledCellHeight=a.scaledCellHeight;this._scaledCharWidth=a.scaledCharWidth;this._scaledCharHeight=a.scaledCharHeight;this._scaledCharLeft=
a.scaledCharLeft;this._scaledCharTop=a.scaledCharTop;this._canvas.width=a.scaledCanvasWidth;this._canvas.height=a.scaledCanvasHeight;this._canvas.style.width=a.canvasWidth+"px";this._canvas.style.height=a.canvasHeight+"px";this._alpha||this._clearAll();this._refreshCharAtlas(this._colors)},a.prototype._fillCells=function(a,b,e,g){this._ctx.fillRect(a*this._scaledCellWidth,b*this._scaledCellHeight,e*this._scaledCellWidth,g*this._scaledCellHeight)},a.prototype._fillBottomLineAtCells=function(a,b,e){void 0===
e&&(e=1);this._ctx.fillRect(a*this._scaledCellWidth,(b+1)*this._scaledCellHeight-window.devicePixelRatio-1,e*this._scaledCellWidth,window.devicePixelRatio)},a.prototype._fillLeftLineAtCell=function(a,b,e){this._ctx.fillRect(a*this._scaledCellWidth,b*this._scaledCellHeight,window.devicePixelRatio*e,this._scaledCellHeight)},a.prototype._strokeRectAtCell=function(a,b,e,g){this._ctx.lineWidth=window.devicePixelRatio;this._ctx.strokeRect(a*this._scaledCellWidth+window.devicePixelRatio/2,b*this._scaledCellHeight+
window.devicePixelRatio/2,e*this._scaledCellWidth-window.devicePixelRatio,g*this._scaledCellHeight-window.devicePixelRatio)},a.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},a.prototype._clearCells=function(a,b,e,g){this._alpha?this._ctx.clearRect(a*this._scaledCellWidth,b*this._scaledCellHeight,e*this._scaledCellWidth,g*this._scaledCellHeight):
(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(a*this._scaledCellWidth,b*this._scaledCellHeight,e*this._scaledCellWidth,g*this._scaledCellHeight))},a.prototype._fillCharTrueColor=function(a,b,e){this._ctx.font=this._getFont(!1,!1);this._ctx.textBaseline="middle";this._clipRow(e);this._ctx.fillText(a.getChars(),b*this._scaledCellWidth+this._scaledCharLeft,e*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2)},a.prototype._drawChars=function(a,b,e){var c,g,l=this._getContrastColor(a);
l||a.isFgRGB()||a.isBgRGB()?this._drawUncachedChars(a,b,e,l):(a.isInverse()?(c=a.isBgDefault()?h.INVERTED_DEFAULT_COLOR:a.getBgColor(),g=a.isFgDefault()?h.INVERTED_DEFAULT_COLOR:a.getFgColor()):(g=a.isBgDefault()?d.DEFAULT_COLOR:a.getBgColor(),c=a.isFgDefault()?d.DEFAULT_COLOR:a.getFgColor()),c+=this._optionsService.options.drawBoldTextInBrightColors&&a.isBold()&&8>c?8:0,this._currentGlyphIdentifier.chars=a.getChars()||d.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=a.getCode()||d.WHITESPACE_CELL_CODE,
this._currentGlyphIdentifier.bg=g,this._currentGlyphIdentifier.fg=c,this._currentGlyphIdentifier.bold=!!a.isBold(),this._currentGlyphIdentifier.dim=!!a.isDim(),this._currentGlyphIdentifier.italic=!!a.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,b*this._scaledCellWidth+this._scaledCharLeft,e*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(a,b,e))},a.prototype._drawUncachedChars=function(a,b,e,l){(this._ctx.save(),this._ctx.font=this._getFont(!!a.isBold(),
!!a.isItalic()),this._ctx.textBaseline="middle",a.isInverse())?l?this._ctx.fillStyle=l.css:a.isBgDefault()?this._ctx.fillStyle=g.color.opaque(this._colors.background).css:a.isBgRGB()?this._ctx.fillStyle="rgb("+q.AttributeData.toColorRGB(a.getBgColor()).join(",")+")":(l=a.getBgColor(),this._optionsService.options.drawBoldTextInBrightColors&&a.isBold()&&8>l&&(l+=8),this._ctx.fillStyle=this._colors.ansi[l].css):l?this._ctx.fillStyle=l.css:a.isFgDefault()?this._ctx.fillStyle=this._colors.foreground.css:
a.isFgRGB()?this._ctx.fillStyle="rgb("+q.AttributeData.toColorRGB(a.getFgColor()).join(",")+")":(l=a.getFgColor(),this._optionsService.options.drawBoldTextInBrightColors&&a.isBold()&&8>l&&(l+=8),this._ctx.fillStyle=this._colors.ansi[l].css);this._clipRow(e);a.isDim()&&(this._ctx.globalAlpha=h.DIM_OPACITY);this._ctx.fillText(a.getChars(),b*this._scaledCellWidth+this._scaledCharLeft,e*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2);this._ctx.restore()},a.prototype._clipRow=function(a){this._ctx.beginPath();
this._ctx.rect(0,a*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight);this._ctx.clip()},a.prototype._getFont=function(a,b){return(b?"italic":"")+" "+(a?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},a.prototype._getContrastColor=function(a){if(1!==this._optionsService.options.minimumContrastRatio){var b=this._colors.contrastCache.getColor(a.bg,
a.fg);if(void 0!==b)return b||void 0;b=a.getFgColor();var e=a.getFgColorMode(),l=a.getBgColor(),d=a.getBgColorMode(),f=!!a.isInverse(),m=!!a.isInverse();f&&(l=b=l,d=e=d);l=this._resolveBackgroundRgba(d,l,f);b=this._resolveForegroundRgba(e,b,f,m);if(b=g.rgba.ensureContrastRatio(l,b,this._optionsService.options.minimumContrastRatio))return b={css:g.channels.toCss(b>>24&255,b>>16&255,b>>8&255),rgba:b},this._colors.contrastCache.setColor(a.bg,a.fg,b),b;this._colors.contrastCache.setColor(a.bg,a.fg,null)}},
a.prototype._resolveBackgroundRgba=function(a,b,e){switch(a){case 16777216:case 33554432:return this._colors.ansi[b].rgba;case 50331648:return b<<8;default:return e?this._colors.foreground.rgba:this._colors.background.rgba}},a.prototype._resolveForegroundRgba=function(a,b,e,g){switch(a){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&g&&8>b&&(b+=8),this._colors.ansi[b].rgba;case 50331648:return b<<8;default:return e?this._colors.background.rgba:this._colors.foreground.rgba}},
a}();a.BaseRenderLayer=b},5879:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(a[g]=b[g])})(a,b)},function(a,b){function g(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)});Object.defineProperty(a,"__esModule",{value:!0});a.CharacterJoinerRegistry=a.JoinedCellData=void 0;
b=f(3734);var k=f(643),q=f(511);f=function(a){function b(b,g,d){var c=a.call(this)||this;return c.content=0,c.combinedData="",c.fg=b.fg,c.bg=b.bg,c.combinedData=g,c._width=d,c}return h(b,a),b.prototype.isCombined=function(){return 2097152},b.prototype.getWidth=function(){return this._width},b.prototype.getChars=function(){return this.combinedData},b.prototype.getCode=function(){return 2097151},b.prototype.setFromCharData=function(a){throw Error("not implemented");},b.prototype.getAsCharData=function(){return[this.fg,
this.getChars(),this.getWidth(),this.getCode()]},b}(b.AttributeData);a.JoinedCellData=f;f=function(){function a(a){this._bufferService=a;this._characterJoiners=[];this._nextCharacterJoinerId=0;this._workCell=new q.CellData}return a.prototype.registerCharacterJoiner=function(a){a={id:this._nextCharacterJoinerId++,handler:a};return this._characterJoiners.push(a),a.id},a.prototype.deregisterCharacterJoiner=function(a){for(var b=0;b<this._characterJoiners.length;b++)if(this._characterJoiners[b].id===
a)return this._characterJoiners.splice(b,1),!0;return!1},a.prototype.getJoinedCharacters=function(a){if(0===this._characterJoiners.length)return[];a=this._bufferService.buffer.lines.get(a);if(!a||0===a.length)return[];for(var b=[],g=a.translateToString(!0),d=0,c=0,e=0,f=a.getFg(0),h=a.getBg(0),t=0;t<a.getTrimmedLength();t++)if(a.loadCell(t,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==f||this._workCell.bg!==h){if(1<t-d)for(d=this._getJoinedRanges(g,e,c,a,d),e=0;e<d.length;e++)b.push(d[e]);
d=t;e=c;f=this._workCell.fg;h=this._workCell.bg}c+=this._workCell.getChars().length||k.WHITESPACE_CELL_CHAR.length}if(1<this._bufferService.cols-d)for(d=this._getJoinedRanges(g,e,c,a,d),e=0;e<d.length;e++)b.push(d[e]);return b},a.prototype._getJoinedRanges=function(b,l,d,f,c){b=b.substring(l,d);l=this._characterJoiners[0].handler(b);for(d=1;d<this._characterJoiners.length;d++)for(var e=this._characterJoiners[d].handler(b),g=0;g<e.length;g++)a._mergeRanges(l,e[g]);return this._stringRangesToCellRanges(l,
f,c),l},a.prototype._stringRangesToCellRanges=function(a,b,d){var g=0,c=!1,e=0,l=a[g];if(l){for(;d<this._bufferService.cols;d++){var f=b.getWidth(d),n=b.getString(d).length||k.WHITESPACE_CELL_CHAR.length;if(0!==f){if(!c&&l[0]<=e&&(l[0]=d,c=!0),l[1]<=e){if(l[1]=d,!(l=a[++g]))break;l[0]<=e?(l[0]=d,c=!0):c=!1}e+=n}}l&&(l[1]=this._bufferService.cols)}},a._mergeRanges=function(a,b){for(var g=!1,d=0;d<a.length;d++){var c=a[d];if(g){if(b[1]<=c[0])return a[d-1][1]=b[1],a;if(b[1]<=c[1])return a[d-1][1]=Math.max(b[1],
c[1]),a.splice(d,1),a;a.splice(d,1);d--}else{if(b[1]<=c[0])return a.splice(d,0,b),a;if(b[1]<=c[1])return c[0]=Math.min(b[0],c[0]),a;b[0]<c[1]&&(c[0]=Math.min(b[0],c[0]),g=!0)}}return g?a[a.length-1][1]=b[1]:a.push(b),a},a}();a.CharacterJoinerRegistry=f},2512:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(a[g]=b[g])})(a,
b)},function(a,b){function g(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)});Object.defineProperty(a,"__esModule",{value:!0});a.CursorRenderLayer=void 0;b=f(1546);var k=f(511);f=function(a){function b(b,g,d,c,e,f,h,t,r){b=a.call(this,b,"cursor",g,!0,d,c,f,h)||this;return b._onRequestRedraw=e,b._coreService=t,b._coreBrowserService=r,b._cell=new k.CellData,b._state={x:0,y:0,isFocused:!1,style:"",width:0},b._cursorRenderers={bar:b._renderBarCursor.bind(b),
block:b._renderBlockCursor.bind(b),underline:b._renderUnderlineCursor.bind(b)},b}return h(b,a),b.prototype.resize=function(b){a.prototype.resize.call(this,b);this._state={x:0,y:0,isFocused:!1,style:"",width:0}},b.prototype.reset=function(){this._clearCursor();this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},b.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause();this._onRequestRedraw.fire({start:this._bufferService.buffer.y,
end:this._bufferService.buffer.y})},b.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},b.prototype.onOptionsChanged=function(){var a,b=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new q(this._coreBrowserService.isFocused,function(){b._render(!0)})):(null===(a=this._cursorBlinkStateManager)||
void 0===a||a.dispose(),this._cursorBlinkStateManager=void 0);this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},b.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},b.prototype.onGridChanged=function(a,b){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},b.prototype._render=function(a){if(this._coreService.isCursorInitialized&&
!this._coreService.isCursorHidden){var b=this._bufferService.buffer.ybase+this._bufferService.buffer.y;a=b-this._bufferService.buffer.ydisp;if(0>a||a>=this._bufferService.rows)this._clearCursor();else{var g=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(b).loadCell(g,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused)return this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,b=this._optionsService.options.cursorStyle,
b&&"block"!==b?this._cursorRenderers[b](g,a,this._cell):this._renderBlurCursor(g,a,this._cell),this._ctx.restore(),this._state.x=g,this._state.y=a,this._state.isFocused=!1,this._state.style=b,void(this._state.width=this._cell.getWidth());if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===g&&this._state.y===a&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===
this._cell.getWidth())return;this._clearCursor()}this._ctx.save();this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](g,a,this._cell);this._ctx.restore();this._state.x=g;this._state.y=a;this._state.isFocused=!1;this._state.style=this._optionsService.options.cursorStyle;this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},b.prototype._clearCursor=function(){this._state&&(this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state=
{x:0,y:0,isFocused:!1,style:"",width:0})},b.prototype._renderBarCursor=function(a,b,g){this._ctx.save();this._ctx.fillStyle=this._colors.cursor.css;this._fillLeftLineAtCell(a,b,this._optionsService.options.cursorWidth);this._ctx.restore()},b.prototype._renderBlockCursor=function(a,b,g){this._ctx.save();this._ctx.fillStyle=this._colors.cursor.css;this._fillCells(a,b,g.getWidth(),1);this._ctx.fillStyle=this._colors.cursorAccent.css;this._fillCharTrueColor(g,a,b);this._ctx.restore()},b.prototype._renderUnderlineCursor=
function(a,b,g){this._ctx.save();this._ctx.fillStyle=this._colors.cursor.css;this._fillBottomLineAtCells(a,b);this._ctx.restore()},b.prototype._renderBlurCursor=function(a,b,g){this._ctx.save();this._ctx.strokeStyle=this._colors.cursor.css;this._strokeRectAtCell(a,b,g.getWidth(),1);this._ctx.restore()},b}(b.BaseRenderLayer);a.CursorRenderLayer=f;var q=function(){function a(a,b){this._renderCallback=b;this.isCursorVisible=!0;a&&this._restartInterval()}return Object.defineProperty(a.prototype,"isPaused",
{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),a.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0);this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0);this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},a.prototype.restartBlinkAnimation=function(){var a=this;this.isPaused||
(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){a._renderCallback();a._animationFrame=void 0})))},a.prototype._restartInterval=function(a){var b=this;void 0===a&&(a=600);this._blinkInterval&&window.clearInterval(this._blinkInterval);this._blinkStartTimeout=window.setTimeout(function(){if(b._animationTimeRestarted){var a=600-(Date.now()-b._animationTimeRestarted);if(b._animationTimeRestarted=void 0,
0<a)return void b._restartInterval(a)}b.isCursorVisible=!1;b._animationFrame=window.requestAnimationFrame(function(){b._renderCallback();b._animationFrame=void 0});b._blinkInterval=window.setInterval(function(){if(b._animationTimeRestarted){var a=600-(Date.now()-b._animationTimeRestarted);return b._animationTimeRestarted=void 0,void b._restartInterval(a)}b.isCursorVisible=!b.isCursorVisible;b._animationFrame=window.requestAnimationFrame(function(){b._renderCallback();b._animationFrame=void 0})},600)},
a)},a.prototype.pause=function(){this.isCursorVisible=!0;this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0);this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0);this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},a.prototype.resume=function(){this.pause();this._animationTimeRestarted=void 0;this._restartInterval();this.restartBlinkAnimation()},a}()},3700:function(b,
a){Object.defineProperty(a,"__esModule",{value:!0});a.GridCache=void 0;b=function(){function a(){this.cache=[]}return a.prototype.resize=function(a,b){for(var d=0;d<a;d++){this.cache.length<=d&&this.cache.push([]);for(var f=this.cache[d].length;f<b;f++)this.cache[d].push(void 0);this.cache[d].length=b}this.cache.length=a},a.prototype.clear=function(){for(var a=0;a<this.cache.length;a++)for(var b=0;b<this.cache[a].length;b++)this.cache[a][b]=void 0},a}();a.GridCache=b},5098:function(b,a,f){var d,h=
this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(a[g]=b[g])})(a,b)},function(a,b){function g(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)});Object.defineProperty(a,"__esModule",{value:!0});a.LinkRenderLayer=void 0;b=f(1546);var k=f(8803),q=f(2040);f=function(a){function b(b,g,d,c,e,f,h,k){var l=
a.call(this,b,"link",g,!0,d,c,h,k)||this;return e.onShowLinkUnderline(function(a){return l._onShowLinkUnderline(a)}),e.onHideLinkUnderline(function(a){return l._onHideLinkUnderline(a)}),f.onShowLinkUnderline(function(a){return l._onShowLinkUnderline(a)}),f.onHideLinkUnderline(function(a){return l._onHideLinkUnderline(a)}),l}return h(b,a),b.prototype.resize=function(b){a.prototype.resize.call(this,b);this._state=void 0},b.prototype.reset=function(){this._clearCurrentLink()},b.prototype._clearCurrentLink=
function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var a=this._state.y2-this._state.y1-1;0<a&&this._clearCells(0,this._state.y1+1,this._state.cols,a);this._clearCells(0,this._state.y2,this._state.x2,1);this._state=void 0}},b.prototype._onShowLinkUnderline=function(a){if(a.fg===k.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:a.fg&&q.is256Color(a.fg)?this._ctx.fillStyle=this._colors.ansi[a.fg].css:this._ctx.fillStyle=
this._colors.foreground.css,a.y1===a.y2)this._fillBottomLineAtCells(a.x1,a.y1,a.x2-a.x1);else{this._fillBottomLineAtCells(a.x1,a.y1,a.cols-a.x1);for(var b=a.y1+1;b<a.y2;b++)this._fillBottomLineAtCells(0,b,a.cols);this._fillBottomLineAtCells(0,a.y2,a.x2)}this._state=a},b.prototype._onHideLinkUnderline=function(a){this._clearCurrentLink()},b}(b.BaseRenderLayer);a.LinkRenderLayer=f},3525:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),k=this&&this.__decorate||function(a,b,c,e){var g,d=arguments.length,l=3>d?b:null===e?e=Object.getOwnPropertyDescriptor(b,c):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(a,b,c,e);else for(var f=a.length-1;0<=
f;f--)(g=a[f])&&(l=(3>d?g(l):3<d?g(b,c,l):g(b,c))||l);return 3<d&&l&&Object.defineProperty(b,c,l),l},q=this&&this.__param||function(a,b){return function(c,e){b(c,e,a)}};Object.defineProperty(a,"__esModule",{value:!0});a.Renderer=void 0;var t=f(9596),g=f(4149),l=f(2512),n=f(5098),m=f(5879);b=f(844);var c=f(4725),e=f(2585),v=f(1420),w=f(8460),z=1;f=function(a){function b(b,c,e,d,f,h,k,r,u){var q=a.call(this)||this;q._colors=b;q._screenElement=c;q._bufferService=f;q._charSizeService=h;q._optionsService=
k;q._id=z++;q._onRequestRedraw=new w.EventEmitter;b=q._optionsService.options.allowTransparency;return q._characterJoinerRegistry=new m.CharacterJoinerRegistry(q._bufferService),q._renderLayers=[new t.TextRenderLayer(q._screenElement,0,q._colors,q._characterJoinerRegistry,b,q._id,q._bufferService,k),new g.SelectionRenderLayer(q._screenElement,1,q._colors,q._id,q._bufferService,k),new n.LinkRenderLayer(q._screenElement,2,q._colors,q._id,e,d,q._bufferService,k),new l.CursorRenderLayer(q._screenElement,
3,q._colors,q._id,q._onRequestRedraw,q._bufferService,k,r,u)],q.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},q._devicePixelRatio=window.devicePixelRatio,q._updateDimensions(),q.onOptionsChanged(),q}return h(b,a),Object.defineProperty(b.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,
configurable:!0}),b.prototype.dispose=function(){for(var b=0,c=this._renderLayers;b<c.length;b++)c[b].dispose();a.prototype.dispose.call(this);v.removeTerminalFromCache(this._id)},b.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},b.prototype.setColors=function(a){this._colors=a;a=0;for(var b=this._renderLayers;a<b.length;a++){var c=b[a];
c.setColors(this._colors);c.reset()}},b.prototype.onResize=function(a,b){this._updateDimensions();a=0;for(b=this._renderLayers;a<b.length;a++)b[a].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px";this._screenElement.style.height=this.dimensions.canvasHeight+"px"},b.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},b.prototype.onBlur=function(){this._runOperation(function(a){return a.onBlur()})},b.prototype.onFocus=
function(){this._runOperation(function(a){return a.onFocus()})},b.prototype.onSelectionChanged=function(a,b,c){void 0===c&&(c=!1);this._runOperation(function(e){return e.onSelectionChanged(a,b,c)})},b.prototype.onCursorMove=function(){this._runOperation(function(a){return a.onCursorMove()})},b.prototype.onOptionsChanged=function(){this._runOperation(function(a){return a.onOptionsChanged()})},b.prototype.clear=function(){this._runOperation(function(a){return a.reset()})},b.prototype._runOperation=
function(a){for(var b=0,c=this._renderLayers;b<c.length;b++)a(c[b])},b.prototype.renderRows=function(a,b){for(var c=0,e=this._renderLayers;c<e.length;c++)e[c].onGridChanged(a,b)},b.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*
this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=
this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},b.prototype.registerCharacterJoiner=function(a){return this._characterJoinerRegistry.registerCharacterJoiner(a)},
b.prototype.deregisterCharacterJoiner=function(a){return this._characterJoinerRegistry.deregisterCharacterJoiner(a)},k([q(4,e.IBufferService),q(5,c.ICharSizeService),q(6,e.IOptionsService),q(7,e.ICoreService),q(8,c.ICoreBrowserService)],b)}(b.Disposable);a.Renderer=f},1752:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.throwIfFalsy=void 0;a.throwIfFalsy=function(a){if(!a)throw Error("value must not be falsy");return a}},4149:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,
b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var g in b)Object.prototype.hasOwnProperty.call(b,g)&&(a[g]=b[g])})(a,b)},function(a,b){function f(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)});Object.defineProperty(a,"__esModule",{value:!0});a.SelectionRenderLayer=void 0;b=function(a){function b(b,g,d,f,m,c){b=a.call(this,b,"selection",g,!0,d,f,m,c)||this;return b._clearState(),
b}return h(b,a),b.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},b.prototype.resize=function(b){a.prototype.resize.call(this,b);this._clearState()},b.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},b.prototype.onSelectionChanged=function(a,b,d){if(this._didStateChange(a,b,d,this._bufferService.buffer.ydisp))if(this._clearAll(),a&&b){var g=a[1]-this._bufferService.buffer.ydisp,l=b[1]-
this._bufferService.buffer.ydisp,c=Math.max(g,0),e=Math.min(l,this._bufferService.rows-1);c>=this._bufferService.rows||0>e||((this._ctx.fillStyle=this._colors.selectionTransparent.css,d)?(g=a[0],this._fillCells(g,c,b[0]-g,e-c+1)):(g=g===c?a[0]:0,this._fillCells(g,c,(c===l?b[0]:this._bufferService.cols)-g,1),(this._fillCells(0,c+1,this._bufferService.cols,Math.max(e-c-1,0)),c!==e)&&this._fillCells(0,e,l===e?b[0]:this._bufferService.cols,1)),this._state.start=[a[0],a[1]],this._state.end=[b[0],b[1]],
this._state.columnSelectMode=d);this._state.ydisp=this._bufferService.buffer.ydisp}else this._clearState()},b.prototype._didStateChange=function(a,b,d,f){return!this._areCoordinatesEqual(a,this._state.start)||!this._areCoordinatesEqual(b,this._state.end)||d!==this._state.columnSelectMode||f!==this._state.ydisp},b.prototype._areCoordinatesEqual=function(a,b){return!(!a||!b)&&a[0]===b[0]&&a[1]===b[1]},b}(f(1546).BaseRenderLayer);a.SelectionRenderLayer=b},9596:function(b,a,f){var d,h=this&&this.__extends||
(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)});Object.defineProperty(a,"__esModule",{value:!0});a.TextRenderLayer=void 0;var k=f(3700);b=f(1546);var q=f(3734),t=f(643),g=f(5879),l=f(511);f=function(a){function b(b,e,g,d,
f,m,h,n){b=a.call(this,b,"text",e,f,g,m,h,n)||this;return b._characterWidth=0,b._characterFont="",b._characterOverlapCache={},b._workCell=new l.CellData,b._state=new k.GridCache,b._characterJoinerRegistry=d,b}return h(b,a),b.prototype.resize=function(b){a.prototype.resize.call(this,b);var c=this._getFont(!1,!1);this._characterWidth===b.scaledCharWidth&&this._characterFont===c||(this._characterWidth=b.scaledCharWidth,this._characterFont=c,this._characterOverlapCache={});this._state.clear();this._state.resize(this._bufferService.cols,
this._bufferService.rows)},b.prototype.reset=function(){this._state.clear();this._clearAll()},b.prototype._forEachCell=function(a,b,d,l){for(;a<=b;a++){var c=a+this._bufferService.buffer.ydisp,e=this._bufferService.buffer.lines.get(c);c=d?d.getJoinedCharacters(c):[];for(var f=0;f<this._bufferService.cols;f++){e.loadCell(f,this._workCell);var m=this._workCell,h=!1,n=f;0!==m.getWidth()&&(0<c.length&&f===c[0][0]&&(h=!0,n=c.shift(),m=new g.JoinedCellData(this._workCell,e.translateToString(!0,n[0],n[1]),
n[1]-n[0]),n=n[1]-1),!h&&this._isOverlapping(m)&&n<e.length-1&&e.getCodePoint(n+1)===t.NULL_CELL_CODE&&(m.content&=-12582913,m.content|=8388608),l(m,f,a),f=n)}}},b.prototype._drawBackground=function(a,b){var c=this,e=this._ctx,g=this._bufferService.cols,d=0,l=0,f=null;e.save();this._forEachCell(a,b,null,function(a,b,m){var h=null;a.isInverse()?h=a.isFgDefault()?c._colors.foreground.css:a.isFgRGB()?"rgb("+q.AttributeData.toColorRGB(a.getFgColor()).join(",")+")":c._colors.ansi[a.getFgColor()].css:a.isBgRGB()?
h="rgb("+q.AttributeData.toColorRGB(a.getBgColor()).join(",")+")":a.isBgPalette()&&(h=c._colors.ansi[a.getBgColor()].css);null===f&&(d=b,l=m);m!==l?(e.fillStyle=f||"",c._fillCells(d,l,g-d,1),d=b,l=m):f!==h&&(e.fillStyle=f||"",c._fillCells(d,l,b-d,1),d=b,l=m);f=h});null!==f&&(e.fillStyle=f,this._fillCells(d,l,g-d,1));e.restore()},b.prototype._drawForeground=function(a,b){var c=this;this._forEachCell(a,b,this._characterJoinerRegistry,function(a,b,e){if(!a.isInvisible()&&(c._drawChars(a,b,e),a.isUnderline())){if(c._ctx.save(),
a.isInverse())if(a.isBgDefault())c._ctx.fillStyle=c._colors.background.css;else if(a.isBgRGB())c._ctx.fillStyle="rgb("+q.AttributeData.toColorRGB(a.getBgColor()).join(",")+")";else{var d=a.getBgColor();c._optionsService.options.drawBoldTextInBrightColors&&a.isBold()&&8>d&&(d+=8);c._ctx.fillStyle=c._colors.ansi[d].css}else a.isFgDefault()?c._ctx.fillStyle=c._colors.foreground.css:a.isFgRGB()?c._ctx.fillStyle="rgb("+q.AttributeData.toColorRGB(a.getFgColor()).join(",")+")":(d=a.getFgColor(),c._optionsService.options.drawBoldTextInBrightColors&&
a.isBold()&&8>d&&(d+=8),c._ctx.fillStyle=c._colors.ansi[d].css);c._fillBottomLineAtCells(b,e,a.getWidth());c._ctx.restore()}})},b.prototype.onGridChanged=function(a,b){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,a,this._bufferService.cols,b-a+1),this._drawBackground(a,b),this._drawForeground(a,b))},b.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},b.prototype._isOverlapping=function(a){if(1!==
a.getWidth()||256>a.getCode())return!1;a=a.getChars();if(this._characterOverlapCache.hasOwnProperty(a))return this._characterOverlapCache[a];this._ctx.save();this._ctx.font=this._characterFont;var b=Math.floor(this._ctx.measureText(a).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[a]=b,b},b}(b.BaseRenderLayer);a.TextRenderLayer=f},9616:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.BaseCharAtlas=void 0;b=function(){function a(){this._didWarmUp=
!1}return a.prototype.dispose=function(){},a.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},a.prototype._doWarmUp=function(){},a.prototype.beginFrame=function(){},a}();a.BaseCharAtlas=b},1420:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.removeTerminalFromCache=a.acquireCharAtlas=void 0;var d=f(2040),h=f(1906),k=[];a.acquireCharAtlas=function(a,b,g,l,f){a=d.generateConfig(l,f,a,g);for(g=0;g<k.length;g++)if(l=(f=k[g]).ownedBy.indexOf(b),0<=
l){if(d.configEquals(f.config,a))return f.atlas;1===f.ownedBy.length?(f.atlas.dispose(),k.splice(g,1)):f.ownedBy.splice(l,1);break}for(g=0;g<k.length;g++)if(f=k[g],d.configEquals(f.config,a))return f.ownedBy.push(b),f.atlas;b={atlas:new h.DynamicCharAtlas(document,a),config:a,ownedBy:[b]};return k.push(b),b.atlas};a.removeTerminalFromCache=function(a){for(var b=0;b<k.length;b++){var d=k[b].ownedBy.indexOf(a);if(-1!==d){1===k[b].ownedBy.length?(k[b].atlas.dispose(),k.splice(b,1)):k[b].ownedBy.splice(d,
1);break}}}},2040:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.is256Color=a.configEquals=a.generateConfig=void 0;var d=f(643);a.generateConfig=function(a,b,d,f){return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:a,scaledCharHeight:b,fontFamily:d.fontFamily,fontSize:d.fontSize,fontWeight:d.fontWeight,fontWeightBold:d.fontWeightBold,allowTransparency:d.allowTransparency,colors:{foreground:f.foreground,background:f.background,cursor:void 0,cursorAccent:void 0,selection:void 0,
ansi:f.ansi}}};a.configEquals=function(a,b){for(var d=0;d<a.colors.ansi.length;d++)if(a.colors.ansi[d].rgba!==b.colors.ansi[d].rgba)return!1;return a.devicePixelRatio===b.devicePixelRatio&&a.fontFamily===b.fontFamily&&a.fontSize===b.fontSize&&a.fontWeight===b.fontWeight&&a.fontWeightBold===b.fontWeightBold&&a.allowTransparency===b.allowTransparency&&a.scaledCharWidth===b.scaledCharWidth&&a.scaledCharHeight===b.scaledCharHeight&&a.colors.foreground===b.colors.foreground&&a.colors.background===b.colors.background};
a.is256Color=function(a){return a<d.DEFAULT_COLOR}},8803:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.CHAR_ATLAS_CELL_SPACING=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;a.INVERTED_DEFAULT_COLOR=257;a.DIM_OPACITY=.5;a.CHAR_ATLAS_CELL_SPACING=1},1906:function(b,a,f){function d(a){return a.code<<21|a.bg<<12|a.fg<<3|(a.bold?0:4)+(a.dim?0:2)+(a.italic?0:1)}var h,k=this&&this.__extends||(h=function(a,b){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=
b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}h(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)});Object.defineProperty(a,"__esModule",{value:!0});a.NoneCharAtlas=a.DynamicCharAtlas=a.getGlyphCacheKey=void 0;var q=f(8803);b=f(9616);var t=f(5680),g=f(7001),l=f(6114),n=f(1752),m=f(4774),c={css:"rgba(0, 0, 0, 0)",rgba:0};a.getGlyphCacheKey=d;f=function(a){function b(b,c){var e=a.call(this)||
this;e._config=c;e._drawToCacheCount=0;e._glyphsWaitingOnBitmap=[];e._bitmapCommitTimeout=null;e._bitmap=null;e._cacheCanvas=b.createElement("canvas");e._cacheCanvas.width=1024;e._cacheCanvas.height=1024;e._cacheCtx=n.throwIfFalsy(e._cacheCanvas.getContext("2d",{alpha:!0}));b=b.createElement("canvas");b.width=e._config.scaledCharWidth;b.height=e._config.scaledCharHeight;e._tmpCtx=n.throwIfFalsy(b.getContext("2d",{alpha:e._config.allowTransparency}));e._width=Math.floor(1024/e._config.scaledCharWidth);
e._height=Math.floor(1024/e._config.scaledCharHeight);b=e._width*e._height;return e._cacheMap=new g.LRUMap(b),e._cacheMap.prealloc(b),e}return k(b,a),b.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},b.prototype.beginFrame=function(){this._drawToCacheCount=0},b.prototype.draw=function(a,b,c,e){if(32===b.code)return!0;if(!this._canCache(b))return!1;var g=d(b),l=this._cacheMap.get(g);return null!=l?(this._drawFromCache(a,
l,c,e),!0):100>this._drawToCacheCount?(l=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index,b=this._drawToCache(b,l),this._cacheMap.set(g,b),this._drawFromCache(a,b,c,e),!0):!1},b.prototype._canCache=function(a){return 256>a.code},b.prototype._toCoordinateX=function(a){return a%this._width*this._config.scaledCharWidth},b.prototype._toCoordinateY=function(a){return Math.floor(a/this._width)*this._config.scaledCharHeight},b.prototype._drawFromCache=function(a,
b,c,e){if(!b.isEmpty){var d=this._toCoordinateX(b.index),g=this._toCoordinateY(b.index);a.drawImage(b.inBitmap?this._bitmap:this._cacheCanvas,d,g,this._config.scaledCharWidth,this._config.scaledCharHeight,c,e,this._config.scaledCharWidth,this._config.scaledCharHeight)}},b.prototype._getColorFromAnsiIndex=function(a){return a<this._config.colors.ansi.length?this._config.colors.ansi[a]:t.DEFAULT_ANSI_COLORS[a]},b.prototype._getBackgroundColor=function(a){return this._config.allowTransparency?c:a.bg===
q.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:256>a.bg?this._getColorFromAnsiIndex(a.bg):this._config.colors.background},b.prototype._getForegroundColor=function(a){return a.fg===q.INVERTED_DEFAULT_COLOR?m.color.opaque(this._config.colors.background):256>a.fg?this._getColorFromAnsiIndex(a.fg):this._config.colors.foreground},b.prototype._drawToCache=function(a,b){this._drawToCacheCount++;this._tmpCtx.save();var c=this._getBackgroundColor(a);this._tmpCtx.globalCompositeOperation="copy";this._tmpCtx.fillStyle=
c.css;this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight);this._tmpCtx.globalCompositeOperation="source-over";this._tmpCtx.font=(a.italic?"italic":"")+" "+(a.bold?this._config.fontWeightBold:this._config.fontWeight)+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily;this._tmpCtx.textBaseline="middle";this._tmpCtx.fillStyle=this._getForegroundColor(a).css;a.dim&&(this._tmpCtx.globalAlpha=q.DIM_OPACITY);this._tmpCtx.fillText(a.chars,
0,this._config.scaledCharHeight/2);this._tmpCtx.restore();a=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight);var e=!1;if(!this._config.allowTransparency){e=!0;var d=c.rgba>>>24,g=c.rgba>>>16&255;c=c.rgba>>>8&255;for(var l=0;l<a.data.length;l+=4)a.data[l]===d&&a.data[l+1]===g&&a.data[l+2]===c?a.data[l+3]=0:e=!1}c=this._toCoordinateX(b);d=this._toCoordinateY(b);this._cacheCtx.putImageData(a,c,d);b={index:b,isEmpty:e,inBitmap:!1};return this._addGlyphToBitmap(b),
b},b.prototype._addGlyphToBitmap=function(a){var b=this;!("createImageBitmap"in window)||l.isFirefox||l.isSafari||(this._glyphsWaitingOnBitmap.push(a),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout(function(){return b._generateBitmap()},100)))},b.prototype._generateBitmap=function(){var a=this,b=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[];window.createImageBitmap(this._cacheCanvas).then(function(c){a._bitmap=c;for(c=0;c<b.length;c++)b[c].inBitmap=!0});
this._bitmapCommitTimeout=null},b}(b.BaseCharAtlas);a.DynamicCharAtlas=f;f=function(a){function b(b,c){return a.call(this)||this}return k(b,a),b.prototype.draw=function(a,b,c,e){return!1},b}(b.BaseCharAtlas);a.NoneCharAtlas=f},7001:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.LRUMap=void 0;b=function(){function a(a){this.capacity=a;this._map={};this._tail=this._head=null;this._nodePool=[];this.size=0}return a.prototype._unlinkNode=function(a){var b=a.prev,d=a.next;a===this._head&&
(this._head=d);a===this._tail&&(this._tail=b);null!==b&&(b.next=d);null!==d&&(d.prev=b)},a.prototype._appendNode=function(a){var b=this._tail;null!==b&&(b.next=a);a.prev=b;a.next=null;this._tail=a;null===this._head&&(this._head=a)},a.prototype.prealloc=function(a){for(var b=this._nodePool,d=0;d<a;d++)b.push({prev:null,next:null,key:null,value:null})},a.prototype.get=function(a){a=this._map[a];return void 0!==a?(this._unlinkNode(a),this._appendNode(a),a.value):null},a.prototype.peekValue=function(a){a=
this._map[a];return void 0!==a?a.value:null},a.prototype.peek=function(){var a=this._head;return null===a?null:a.value},a.prototype.set=function(a,b){var d=this._map[a];if(void 0!==d)d=this._map[a],this._unlinkNode(d),d.value=b;else if(this.size>=this.capacity)d=this._head,this._unlinkNode(d),delete this._map[d.key],d.key=a,d.value=b,this._map[a]=d;else{var f=this._nodePool;0<f.length?((d=f.pop()).key=a,d.value=b):d={prev:null,next:null,key:a,value:b};this._map[a]=d;this.size++}this._appendNode(d)},
a}();a.LRUMap=b},1296:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),k=this&&this.__decorate||function(a,b,c,e){var d,g=arguments.length,l=3>g?b:null===e?e=Object.getOwnPropertyDescriptor(b,
c):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(a,b,c,e);else for(var f=a.length-1;0<=f;f--)(d=a[f])&&(l=(3>g?d(l):3<g?d(b,c,l):d(b,c))||l);return 3<g&&l&&Object.defineProperty(b,c,l),l},q=this&&this.__param||function(a,b){return function(c,e){b(c,e,a)}};Object.defineProperty(a,"__esModule",{value:!0});a.DomRenderer=void 0;var t=f(3787),g=f(8803);b=f(844);var l=f(4725),n=f(2585),m=f(8460),c=f(4774),e=f(9631),v=1;f=function(a){function b(b,c,e,d,g,l,f,m,h){var n=
a.call(this)||this;return n._colors=b,n._element=c,n._screenElement=e,n._viewportElement=d,n._linkifier=g,n._linkifier2=l,n._charSizeService=f,n._optionsService=m,n._bufferService=h,n._terminalClass=v++,n._rowElements=[],n._rowContainer=document.createElement("div"),n._rowContainer.classList.add("xterm-rows"),n._rowContainer.style.lineHeight="normal",n._rowContainer.setAttribute("aria-hidden","true"),n._refreshRowElements(n._bufferService.cols,n._bufferService.rows),n._selectionContainer=document.createElement("div"),
n._selectionContainer.classList.add("xterm-selection"),n._selectionContainer.setAttribute("aria-hidden","true"),n.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},n._updateDimensions(),n._injectCss(),n._rowFactory=new t.DomRendererRowFactory(document,n._optionsService,n._colors),n._element.classList.add("xterm-dom-renderer-owner-"+
n._terminalClass),n._screenElement.appendChild(n._rowContainer),n._screenElement.appendChild(n._selectionContainer),n._linkifier.onShowLinkUnderline(function(a){return n._onLinkHover(a)}),n._linkifier.onHideLinkUnderline(function(a){return n._onLinkLeave(a)}),n._linkifier2.onShowLinkUnderline(function(a){return n._onLinkHover(a)}),n._linkifier2.onHideLinkUnderline(function(a){return n._onLinkLeave(a)}),n}return h(b,a),Object.defineProperty(b.prototype,"onRequestRedraw",{get:function(){return(new m.EventEmitter).event},
enumerable:!1,configurable:!0}),b.prototype.dispose=function(){this._element.classList.remove("xterm-dom-renderer-owner-"+this._terminalClass);e.removeElementFromParent(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement);a.prototype.dispose.call(this)},b.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio;this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio);
this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing);this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight);this.dimensions.scaledCharLeft=0;this.dimensions.scaledCharTop=0;this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols;this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows;this.dimensions.canvasWidth=
Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio);this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio);this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols;this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var a=0,b=this._rowElements;a<b.length;a++){var c=b[a];c.style.width=this.dimensions.canvasWidth+"px";c.style.height=this.dimensions.actualCellHeight+"px";
c.style.lineHeight=this.dimensions.actualCellHeight+"px";c.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));this._dimensionsStyleElement.textContent=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._selectionContainer.style.height=this._viewportElement.style.height;
this._screenElement.style.width=this.dimensions.canvasWidth+"px";this._screenElement.style.height=this.dimensions.canvasHeight+"px"},b.prototype.setColors=function(a){this._colors=a;this._injectCss()},b.prototype._injectCss=function(){var a=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var b=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+
"; font-size: "+this._optionsService.options.fontSize+"px;}";b+=this._terminalSelector+" span:not(."+t.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+t.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+t.ITALIC_CLASS+" { font-style: italic;}";b+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}";b+="@keyframes blink_block_"+this._terminalClass+
" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}";b+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+t.CURSOR_CLASS+"."+t.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+t.CURSOR_CLASS+"."+t.CURSOR_BLINK_CLASS+":not(."+t.CURSOR_STYLE_BLOCK_CLASS+
") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+t.CURSOR_CLASS+"."+t.CURSOR_BLINK_CLASS+"."+t.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+t.CURSOR_CLASS+"."+t.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+
t.CURSOR_CLASS+"."+t.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+t.CURSOR_CLASS+"."+t.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}";b+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+
this._colors.selectionTransparent.css+";}";this._colors.ansi.forEach(function(c,e){b+=a._terminalSelector+" .xterm-fg-"+e+" { color: "+c.css+"; }"+a._terminalSelector+" .xterm-bg-"+e+" { background-color: "+c.css+"; }"});b+=this._terminalSelector+" .xterm-fg-"+g.INVERTED_DEFAULT_COLOR+" { color: "+c.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" .xterm-bg-"+g.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }";this._themeStyleElement.textContent=
b},b.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},b.prototype._refreshRowElements=function(a,b){for(a=this._rowElements.length;a<=b;a++){var c=document.createElement("div");this._rowContainer.appendChild(c);this._rowElements.push(c)}for(;this._rowElements.length>b;)this._rowContainer.removeChild(this._rowElements.pop())},b.prototype.onResize=function(a,b){this._refreshRowElements(a,b);this._updateDimensions()},b.prototype.onCharSizeChanged=function(){this._updateDimensions()},
b.prototype.onBlur=function(){this._rowContainer.classList.remove("xterm-focus")},b.prototype.onFocus=function(){this._rowContainer.classList.add("xterm-focus")},b.prototype.onSelectionChanged=function(a,b,c){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(a&&b){var e=a[1]-this._bufferService.buffer.ydisp,d=b[1]-this._bufferService.buffer.ydisp,g=Math.max(e,0),l=Math.min(d,this._bufferService.rows-1);if(!(g>=this._bufferService.rows||
0>l)){var f=document.createDocumentFragment();c?f.appendChild(this._createSelectionElement(g,a[0],b[0],l-g+1)):(f.appendChild(this._createSelectionElement(g,e===g?a[0]:0,g===d?b[0]:this._bufferService.cols)),(f.appendChild(this._createSelectionElement(g+1,0,this._bufferService.cols,l-g-1)),g!==l)&&f.appendChild(this._createSelectionElement(l,0,d===l?b[0]:this._bufferService.cols)));this._selectionContainer.appendChild(f)}}},b.prototype._createSelectionElement=function(a,b,c,e){void 0===e&&(e=1);var d=
document.createElement("div");return d.style.height=e*this.dimensions.actualCellHeight+"px",d.style.top=a*this.dimensions.actualCellHeight+"px",d.style.left=b*this.dimensions.actualCellWidth+"px",d.style.width=this.dimensions.actualCellWidth*(c-b)+"px",d},b.prototype.onCursorMove=function(){},b.prototype.onOptionsChanged=function(){this._updateDimensions();this._injectCss()},b.prototype.clear=function(){for(var a=0,b=this._rowElements;a<b.length;a++)b[a].innerText=""},b.prototype.renderRows=function(a,
b){for(var c=this._bufferService.buffer.ybase+this._bufferService.buffer.y,e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),d=this._optionsService.options.cursorBlink;a<=b;a++){var g=this._rowElements[a];g.innerText="";var l=a+this._bufferService.buffer.ydisp,f=this._bufferService.buffer.lines.get(l);g.appendChild(this._rowFactory.createRow(f,l===c,this._optionsService.options.cursorStyle,e,d,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(b.prototype,
"_terminalSelector",{get:function(){return".xterm-dom-renderer-owner-"+this._terminalClass},enumerable:!1,configurable:!0}),b.prototype.registerCharacterJoiner=function(a){return-1},b.prototype.deregisterCharacterJoiner=function(a){return!1},b.prototype._onLinkHover=function(a){this._setCellUnderline(a.x1,a.x2,a.y1,a.y2,a.cols,!0)},b.prototype._onLinkLeave=function(a){this._setCellUnderline(a.x1,a.x2,a.y1,a.y2,a.cols,!1)},b.prototype._setCellUnderline=function(a,b,c,e,d,g){for(;a!==b||c!==e;){var l=
this._rowElements[c];if(!l)break;(l=l.children[a])&&(l.style.textDecoration=g?"underline":"none");++a>=d&&(a=0,c++)}},k([q(6,l.ICharSizeService),q(7,n.IOptionsService),q(8,n.IBufferService)],b)}(b.Disposable);a.DomRenderer=f},3787:function(b,a,f){function d(a,b,d){for(;a.length<d;)a=b+a;return a}Object.defineProperty(a,"__esModule",{value:!0});a.DomRendererRowFactory=a.CURSOR_STYLE_UNDERLINE_CLASS=a.CURSOR_STYLE_BAR_CLASS=a.CURSOR_STYLE_BLOCK_CLASS=a.CURSOR_BLINK_CLASS=a.CURSOR_CLASS=a.UNDERLINE_CLASS=
a.ITALIC_CLASS=a.DIM_CLASS=a.BOLD_CLASS=void 0;var h=f(8803),k=f(643),q=f(511),t=f(4774);a.BOLD_CLASS="xterm-bold";a.DIM_CLASS="xterm-dim";a.ITALIC_CLASS="xterm-italic";a.UNDERLINE_CLASS="xterm-underline";a.CURSOR_CLASS="xterm-cursor";a.CURSOR_BLINK_CLASS="xterm-cursor-blink";a.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block";a.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar";a.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";b=function(){function b(a,b,d){this._document=a;this._optionsService=b;this._colors=
d;this._workCell=new q.CellData}return b.prototype.setColors=function(a){this._colors=a},b.prototype.createRow=function(b,g,f,c,e,q,r){var l=this._document.createDocumentFragment(),m=0;for(r=Math.min(b.length,r)-1;0<=r;r--)if(b.loadCell(r,this._workCell).getCode()!==k.NULL_CELL_CODE||g&&r===c){m=r+1;break}for(r=0;r<m;r++){b.loadCell(r,this._workCell);var n=this._workCell.getWidth();if(0!==n){var u=this._document.createElement("span");if(1<n&&(u.style.width=q*n+"px"),g&&r===c)switch(u.classList.add(a.CURSOR_CLASS),
e&&u.classList.add(a.CURSOR_BLINK_CLASS),f){case "bar":u.classList.add(a.CURSOR_STYLE_BAR_CLASS);break;case "underline":u.classList.add(a.CURSOR_STYLE_UNDERLINE_CLASS);break;default:u.classList.add(a.CURSOR_STYLE_BLOCK_CLASS)}this._workCell.isBold()&&u.classList.add(a.BOLD_CLASS);this._workCell.isItalic()&&u.classList.add(a.ITALIC_CLASS);this._workCell.isDim()&&u.classList.add(a.DIM_CLASS);this._workCell.isUnderline()&&u.classList.add(a.UNDERLINE_CLASS);this._workCell.isInvisible()?u.textContent=
k.WHITESPACE_CELL_CHAR:u.textContent=this._workCell.getChars()||k.WHITESPACE_CELL_CHAR;n=this._workCell.getFgColor();var v=this._workCell.getFgColorMode(),w=this._workCell.getBgColor(),B=this._workCell.getBgColorMode(),p=!!this._workCell.isInverse();if(p){var C=n;n=w;w=C;C=v;v=B;B=C}switch(v){case 16777216:case 33554432:this._workCell.isBold()&&8>n&&this._optionsService.options.drawBoldTextInBrightColors&&(n+=8);this._applyMinimumContrast(u,this._colors.background,this._colors.ansi[n])||u.classList.add("xterm-fg-"+
n);break;case 50331648:v=t.rgba.toColor(n>>16&255,n>>8&255,255&n);this._applyMinimumContrast(u,this._colors.background,v)||this._addStyle(u,"color:#"+d(n.toString(16),"0",6));break;default:this._applyMinimumContrast(u,this._colors.background,this._colors.foreground)||p&&u.classList.add("xterm-fg-"+h.INVERTED_DEFAULT_COLOR)}switch(B){case 16777216:case 33554432:u.classList.add("xterm-bg-"+w);break;case 50331648:this._addStyle(u,"background-color:#"+d(w.toString(16),"0",6));break;default:p&&u.classList.add("xterm-bg-"+
h.INVERTED_DEFAULT_COLOR)}l.appendChild(u)}}return l},b.prototype._applyMinimumContrast=function(a,b,d){if(1===this._optionsService.options.minimumContrastRatio)return!1;var c=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return void 0===c&&(c=t.color.ensureContrastRatio(b,d,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,null!=c?c:null)),!!c&&(this._addStyle(a,"color:"+c.css),!0)},b.prototype._addStyle=
function(a,b){a.setAttribute("style",""+(a.getAttribute("style")||"")+b+";")},b}();a.DomRendererRowFactory=b},456:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.SelectionModel=void 0;b=function(){function a(a){this._bufferService=a;this.isSelectAllActive=!1;this.selectionStartLength=0}return a.prototype.clearSelection=function(){this.selectionEnd=this.selectionStart=void 0;this.isSelectAllActive=!1;this.selectionStartLength=0},Object.defineProperty(a.prototype,"finalSelectionStart",
{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var a=this.selectionStart[0]+this.selectionStartLength;
return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),a.prototype.areSelectionValuesReversed=function(){var a=this.selectionStart,b=this.selectionEnd;return!(!a||!b)&&(a[1]>
b[1]||a[1]===b[1]&&a[0]>b[0])},a.prototype.onTrim=function(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&0>this.selectionEnd[1]?(this.clearSelection(),!0):(this.selectionStart&&0>this.selectionStart[1]&&(this.selectionStart[1]=0),!1)},a}();a.SelectionModel=b},428:function(b,a,f){var d=this&&this.__decorate||function(a,b,d,f){var c,e=arguments.length,g=3>e?b:null===f?f=Object.getOwnPropertyDescriptor(b,d):f;if("object"==typeof Reflect&&
"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,d,f);else for(var l=a.length-1;0<=l;l--)(c=a[l])&&(g=(3>e?c(g):3<e?c(b,d,g):c(b,d))||g);return 3<e&&g&&Object.defineProperty(b,d,g),g},h=this&&this.__param||function(a,b){return function(d,g){b(d,g,a)}};Object.defineProperty(a,"__esModule",{value:!0});a.CharSizeService=void 0;var k=f(2585),q=f(8460);b=function(){function a(a,b,d){this._optionsService=d;this.height=this.width=0;this._onCharSizeChange=new q.EventEmitter;this._measureStrategy=
new t(a,b,this._optionsService)}return Object.defineProperty(a.prototype,"hasValidSize",{get:function(){return 0<this.width&&0<this.height},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),a.prototype.measure=function(){var a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())},d([h(2,
k.IOptionsService)],a)}();a.CharSizeService=b;var t=function(){function a(a,b,d){this._document=a;this._parentElement=b;this._optionsService=d;this._result={width:0,height:0};this._measureElement=this._document.createElement("span");this._measureElement.classList.add("xterm-char-measure-element");this._measureElement.textContent="W";this._measureElement.setAttribute("aria-hidden","true");this._parentElement.appendChild(this._measureElement)}return a.prototype.measure=function(){this._measureElement.style.fontFamily=
this._optionsService.options.fontFamily;this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var a=this._measureElement.getBoundingClientRect();return 0!==a.width&&0!==a.height&&(this._result.width=a.width,this._result.height=Math.ceil(a.height)),this._result},a}()},5114:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.CoreBrowserService=void 0;b=function(){function a(a){this._textarea=a}return Object.defineProperty(a.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?
this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),a}();a.CoreBrowserService=b},8934:function(b,a,f){var d=this&&this.__decorate||function(a,b,d,f){var g,c=arguments.length,e=3>c?b:null===f?f=Object.getOwnPropertyDescriptor(b,d):f;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(a,b,d,f);else for(var l=a.length-1;0<=l;l--)(g=a[l])&&(e=(3>c?g(e):3<c?g(b,d,e):g(b,d))||e);return 3<c&&e&&Object.defineProperty(b,
d,e),e},h=this&&this.__param||function(a,b){return function(d,g){b(d,g,a)}};Object.defineProperty(a,"__esModule",{value:!0});a.MouseService=void 0;var k=f(4725),q=f(9806);b=function(){function a(a,b){this._renderService=a;this._charSizeService=b}return a.prototype.getCoords=function(a,b,d,f,c){return q.getCoords(a,b,d,f,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,c)},a.prototype.getRawByteCoords=function(a,b,d,f){a=
this.getCoords(a,b,d,f);return q.getRawByteCoords(a)},d([h(0,k.IRenderService),h(1,k.ICharSizeService)],a)}();a.MouseService=b},3230:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),
k=this&&this.__decorate||function(a,b,c,d){var e,g=arguments.length,l=3>g?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(a,b,c,d);else for(var f=a.length-1;0<=f;f--)(e=a[f])&&(l=(3>g?e(l):3<g?e(b,c,l):e(b,c))||l);return 3<g&&l&&Object.defineProperty(b,c,l),l},q=this&&this.__param||function(a,b){return function(c,e){b(c,e,a)}};Object.defineProperty(a,"__esModule",{value:!0});a.RenderService=void 0;var t=f(6193),
g=f(8460);b=f(844);var l=f(5596),n=f(3656),m=f(2585),c=f(4725);f=function(a){function b(b,c,e,d,f,m){var h=a.call(this)||this;if(h._renderer=b,h._rowCount=c,h._charSizeService=f,h._isPaused=!1,h._needsFullRefresh=!1,h._isNextRenderRedrawOnly=!0,h._needsSelectionRefresh=!1,h._canvasWidth=0,h._canvasHeight=0,h._selectionState={start:void 0,end:void 0,columnSelectMode:!1},h._onDimensionsChange=new g.EventEmitter,h._onRender=new g.EventEmitter,h._onRefreshRequest=new g.EventEmitter,h.register({dispose:function(){return h._renderer.dispose()}}),
h._renderDebouncer=new t.RenderDebouncer(function(a,b){return h._renderRows(a,b)}),h.register(h._renderDebouncer),h._screenDprMonitor=new l.ScreenDprMonitor,h._screenDprMonitor.setListener(function(){return h.onDevicePixelRatioChange()}),h.register(h._screenDprMonitor),h.register(m.onResize(function(a){return h._fullRefresh()})),h.register(d.onOptionChange(function(){return h._renderer.onOptionsChanged()})),h.register(h._charSizeService.onCharSizeChange(function(){return h.onCharSizeChanged()})),
h._renderer.onRequestRedraw(function(a){return h.refreshRows(a.start,a.end,!0)}),h.register(n.addDisposableDomListener(window,"resize",function(){return h.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var k=new IntersectionObserver(function(a){return h._onIntersectionChange(a[a.length-1])},{threshold:0});k.observe(e);h.register({dispose:function(){return k.disconnect()}})}return h}return h(b,a),Object.defineProperty(b.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},
enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),b.prototype._onIntersectionChange=function(a){(this._isPaused=void 0===
a.isIntersecting?0===a.intersectionRatio:!a.isIntersecting)||this._charSizeService.hasValidSize||this._charSizeService.measure();!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},b.prototype.refreshRows=function(a,b,c){void 0===c&&(c=!1);this._isPaused?this._needsFullRefresh=!0:(c||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(a,b,this._rowCount))},b.prototype._renderRows=function(a,b){this._renderer.renderRows(a,b);this._needsSelectionRefresh&&
(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1);this._isNextRenderRedrawOnly||this._onRender.fire({start:a,end:b});this._isNextRenderRedrawOnly=!0},b.prototype.resize=function(a,b){this._rowCount=b;this._fireOnCanvasResize()},b.prototype.changeOptions=function(){this._renderer.onOptionsChanged();this.refreshRows(0,this._rowCount-1);this._fireOnCanvasResize()},b.prototype._fireOnCanvasResize=
function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},b.prototype.dispose=function(){a.prototype.dispose.call(this)},b.prototype.setRenderer=function(a){var b=this;this._renderer.dispose();this._renderer=a;this._renderer.onRequestRedraw(function(a){return b.refreshRows(a.start,a.end,!0)});this._needsSelectionRefresh=!0;this._fullRefresh()},b.prototype._fullRefresh=
function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},b.prototype.setColors=function(a){this._renderer.setColors(a);this._fullRefresh()},b.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure();this._renderer.onDevicePixelRatioChange();this.refreshRows(0,this._rowCount-1)},b.prototype.onResize=function(a,b){this._renderer.onResize(a,b);this._fullRefresh()},b.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},b.prototype.onBlur=
function(){this._renderer.onBlur()},b.prototype.onFocus=function(){this._renderer.onFocus()},b.prototype.onSelectionChanged=function(a,b,c){this._selectionState.start=a;this._selectionState.end=b;this._selectionState.columnSelectMode=c;this._renderer.onSelectionChanged(a,b,c)},b.prototype.onCursorMove=function(){this._renderer.onCursorMove()},b.prototype.clear=function(){this._renderer.clear()},b.prototype.registerCharacterJoiner=function(a){return this._renderer.registerCharacterJoiner(a)},b.prototype.deregisterCharacterJoiner=
function(a){return this._renderer.deregisterCharacterJoiner(a)},k([q(3,m.IOptionsService),q(4,c.ICharSizeService),q(5,m.IBufferService)],b)}(b.Disposable);a.RenderService=f},9312:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}d(a,b);a.prototype=null===b?
Object.create(b):(c.prototype=b.prototype,new c)}),k=this&&this.__decorate||function(a,b,c,e){var d,g=arguments.length,l=3>g?b:null===e?e=Object.getOwnPropertyDescriptor(b,c):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(a,b,c,e);else for(var f=a.length-1;0<=f;f--)(d=a[f])&&(l=(3>g?d(l):3<g?d(b,c,l):d(b,c))||l);return 3<g&&l&&Object.defineProperty(b,c,l),l},q=this&&this.__param||function(a,b){return function(c,e){b(c,e,a)}};Object.defineProperty(a,"__esModule",
{value:!0});a.SelectionService=void 0;var t=f(6114),g=f(456),l=f(511),n=f(8460),m=f(4725),c=f(2585),e=f(9806),v=f(9504);b=f(844);f=String.fromCharCode(160);var w=new RegExp(f,"g");b=function(a){function b(b,c,e,d,f,h,m){var k=a.call(this)||this;return k._element=b,k._screenElement=c,k._bufferService=e,k._coreService=d,k._mouseService=f,k._optionsService=h,k._renderService=m,k._dragScrollAmount=0,k._enabled=!0,k._workCell=new l.CellData,k._mouseDownTimeStamp=0,k._oldHasSelection=!1,k._oldSelectionStart=
void 0,k._oldSelectionEnd=void 0,k._onLinuxMouseSelection=k.register(new n.EventEmitter),k._onRedrawRequest=k.register(new n.EventEmitter),k._onSelectionChange=k.register(new n.EventEmitter),k._onRequestScrollLines=k.register(new n.EventEmitter),k._mouseMoveListener=function(a){return k._onMouseMove(a)},k._mouseUpListener=function(a){return k._onMouseUp(a)},k._coreService.onUserInput(function(){k.hasSelection&&k.clearSelection()}),k._trimListener=k._bufferService.buffer.lines.onTrim(function(a){return k._onTrim(a)}),
k.register(k._bufferService.buffers.onBufferActivate(function(a){return k._onBufferActivate(a)})),k.enable(),k._model=new g.SelectionModel(k._bufferService),k._activeSelectionMode=0,k}return h(b,a),Object.defineProperty(b.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,
"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),b.prototype.dispose=function(){this._removeMouseDownListeners()},b.prototype.reset=function(){this.clearSelection()},b.prototype.disable=function(){this.clearSelection();this._enabled=!1},b.prototype.enable=function(){this._enabled=!0},Object.defineProperty(b.prototype,
"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"hasSelection",{get:function(){var a=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!a||!b||a[0]===b[0]&&a[1]===b[1])},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"selectionText",{get:function(){var a=
this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!a||!b)return"";var c=this._bufferService.buffer,e=[];if(3===this._activeSelectionMode){if(a[0]===b[0])return"";for(var d=a[1];d<=b[1];d++){var g=c.translateBufferLineToString(d,!0,a[0],b[0]);e.push(g)}}else{e.push(c.translateBufferLineToString(a[1],!0,a[0],a[1]===b[1]?b[0]:void 0));for(d=a[1]+1;d<=b[1]-1;d++){var l=c.lines.get(d);g=c.translateBufferLineToString(d,!0);l&&l.isWrapped?e[e.length-1]+=g:e.push(g)}a[1]!==b[1]&&(l=c.lines.get(b[1]),
g=c.translateBufferLineToString(b[1],!0,0,b[0]),l&&l.isWrapped?e[e.length-1]+=g:e.push(g))}return e.map(function(a){return a.replace(w," ")}).join(t.isWindows?"\r\n":"\n")},enumerable:!1,configurable:!0}),b.prototype.clearSelection=function(){this._model.clearSelection();this._removeMouseDownListeners();this.refresh();this._onSelectionChange.fire()},b.prototype.refresh=function(a){var b=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return b._refresh()}));
t.isLinux&&a&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},b.prototype._refresh=function(){this._refreshAnimationFrame=void 0;this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},b.prototype._isClickInSelection=function(a){a=this._getMouseBufferCoords(a);var b=this._model.finalSelectionStart,c=this._model.finalSelectionEnd;return!!(b&&c&&a)&&this._areCoordsInSelection(a,
b,c)},b.prototype._areCoordsInSelection=function(a,b,c){return a[1]>b[1]&&a[1]<c[1]||b[1]===c[1]&&a[1]===b[1]&&a[0]>=b[0]&&a[0]<c[0]||b[1]<c[1]&&a[1]===c[1]&&a[0]<c[0]||b[1]<c[1]&&a[1]===b[1]&&a[0]>=b[0]},b.prototype._selectWordAtCursor=function(a){(a=this._getMouseBufferCoords(a))&&(this._selectWordAt(a,!1),this._model.selectionEnd=void 0,this.refresh(!0))},b.prototype.selectAll=function(){this._model.isSelectAllActive=!0;this.refresh();this._onSelectionChange.fire()},b.prototype.selectLines=function(a,
b){this._model.clearSelection();a=Math.max(a,0);b=Math.min(b,this._bufferService.buffer.lines.length-1);this._model.selectionStart=[0,a];this._model.selectionEnd=[this._bufferService.cols,b];this.refresh();this._onSelectionChange.fire()},b.prototype._onTrim=function(a){this._model.onTrim(a)&&this.refresh()},b.prototype._getMouseBufferCoords=function(a){if(a=this._mouseService.getCoords(a,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0))return a[0]--,a[1]--,a[1]+=this._bufferService.buffer.ydisp,
a},b.prototype._getMouseEventScrollAmount=function(a){a=e.getCoordsRelativeToElement(a,this._screenElement)[1];var b=this._renderService.dimensions.canvasHeight;return 0<=a&&a<=b?0:(a>b&&(a-=b),a=Math.min(Math.max(a,-50),50),(a/=50)/Math.abs(a)+Math.round(14*a))},b.prototype.shouldForceSelection=function(a){return t.isMac?a.altKey&&this._optionsService.options.macOptionClickForcesSelection:a.shiftKey},b.prototype.onMouseDown=function(a){if(this._mouseDownTimeStamp=a.timeStamp,(2!==a.button||!this.hasSelection)&&
0===a.button){if(!this._enabled){if(!this.shouldForceSelection(a))return;a.stopPropagation()}a.preventDefault();this._dragScrollAmount=0;this._enabled&&a.shiftKey?this._onIncrementalClick(a):1===a.detail?this._onSingleClick(a):2===a.detail?this._onDoubleClick(a):3===a.detail&&this._onTripleClick(a);this._addMouseDownListeners();this.refresh(!0)}},b.prototype._addMouseDownListeners=function(){var a=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",
this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener));this._dragScrollIntervalTimer=window.setInterval(function(){return a._dragScroll()},50)},b.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener));clearInterval(this._dragScrollIntervalTimer);
this._dragScrollIntervalTimer=void 0},b.prototype._onIncrementalClick=function(a){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(a))},b.prototype._onSingleClick=function(a){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(a)?3:0,this._model.selectionStart=this._getMouseBufferCoords(a),this._model.selectionStart)this._model.selectionEnd=void 0,(a=this._bufferService.buffer.lines.get(this._model.selectionStart[1]))&&
a.length!==this._model.selectionStart[0]&&0===a.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++},b.prototype._onDoubleClick=function(a){(a=this._getMouseBufferCoords(a))&&(this._activeSelectionMode=1,this._selectWordAt(a,!0))},b.prototype._onTripleClick=function(a){(a=this._getMouseBufferCoords(a))&&(this._activeSelectionMode=2,this._selectLineAt(a[1]))},b.prototype.shouldColumnSelect=function(a){return a.altKey&&!(t.isMac&&this._optionsService.options.macOptionClickForcesSelection)},
b.prototype._onMouseMove=function(a){if(a.stopImmediatePropagation(),this._model.selectionStart){var b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;(this._model.selectionEnd=this._getMouseBufferCoords(a),this._model.selectionEnd)?(2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),
this._dragScrollAmount=this._getMouseEventScrollAmount(a),3!==this._activeSelectionMode&&(0<this._dragScrollAmount?this._model.selectionEnd[0]=this._bufferService.cols:0>this._dragScrollAmount&&(this._model.selectionEnd[0]=0)),a=this._bufferService.buffer,this._model.selectionEnd[1]<a.lines.length&&(a=a.lines.get(this._model.selectionEnd[1]))&&0===a.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++,b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)):
this.refresh(!0)}},b.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var a=this._bufferService.buffer;0<this._dragScrollAmount?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(a.ydisp+this._bufferService.rows,a.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=
0),this._model.selectionEnd[1]=a.ydisp);this.refresh()}},b.prototype._onMouseUp=function(a){var b=a.timeStamp-this._mouseDownTimeStamp;(this._removeMouseDownListeners(),1>=this.selectionText.length&&500>b&&a.altKey&&this._optionsService.getOption("altClickMovesCursor"))?this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp&&(a=this._mouseService.getCoords(a,this._element,this._bufferService.cols,this._bufferService.rows,!1))&&void 0!==a[0]&&void 0!==a[1]&&(a=v.moveToCellSequence(a[0]-
1,a[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys),this._coreService.triggerDataEvent(a,!0)):this._fireEventIfSelectionChanged()},b.prototype._fireEventIfSelectionChanged=function(){var a=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,c=!(!a||!b||a[0]===b[0]&&a[1]===b[1]);c?a&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&a[0]===this._oldSelectionStart[0]&&a[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||
this._fireOnSelectionChange(a,b,c)):this._oldHasSelection&&this._fireOnSelectionChange(a,b,c)},b.prototype._fireOnSelectionChange=function(a,b,c){this._oldSelectionStart=a;this._oldSelectionEnd=b;this._oldHasSelection=c;this._onSelectionChange.fire()},b.prototype._onBufferActivate=function(a){var b=this;this.clearSelection();this._trimListener.dispose();this._trimListener=a.activeBuffer.lines.onTrim(function(a){return b._onTrim(a)})},b.prototype._convertViewportColToCharacterIndex=function(a,b){for(var c=
b[0],e=0;b[0]>=e;e++){var d=a.loadCell(e,this._workCell).getChars().length;0===this._workCell.getWidth()?c--:1<d&&b[0]!==e&&(c+=d-1)}return c},b.prototype.setSelection=function(a,b,c){this._model.clearSelection();this._removeMouseDownListeners();this._model.selectionStart=[a,b];this._model.selectionStartLength=c;this.refresh()},b.prototype.rightClickSelect=function(a){this._isClickInSelection(a)||(this._selectWordAtCursor(a),this._fireEventIfSelectionChanged())},b.prototype._getWordAt=function(a,
b,c,e){if(void 0===c&&(c=!0),void 0===e&&(e=!0),!(a[0]>=this._bufferService.cols)){var d=this._bufferService.buffer,g=d.lines.get(a[1]);if(g){var l=d.translateBufferLineToString(a[1],!1),f=this._convertViewportColToCharacterIndex(g,a),h=f,m=a[0]-f,k=0,n=0,t=0,q=0;if(" "===l.charAt(f)){for(;0<f&&" "===l.charAt(f-1);)f--;for(;h<l.length&&" "===l.charAt(h+1);)h++}else{var r=a[0],u=a[0];0===g.getWidth(r)&&(k++,r--);2===g.getWidth(u)&&(n++,u++);var v=g.getString(u).length;for(1<v&&(q+=v-1,h+=v-1);0<r&&
0<f&&!this._isCharWordSeparator(g.loadCell(r-1,this._workCell));)g.loadCell(r-1,this._workCell),v=this._workCell.getChars().length,0===this._workCell.getWidth()?(k++,r--):1<v&&(t+=v-1,f-=v-1),f--,r--;for(;u<g.length&&h+1<l.length&&!this._isCharWordSeparator(g.loadCell(u+1,this._workCell));)g.loadCell(u+1,this._workCell),r=this._workCell.getChars().length,2===this._workCell.getWidth()?(n++,u++):1<r&&(q+=r-1,h+=r-1),h++,u++}h++;m=f+m-k+t;k=Math.min(this._bufferService.cols,h-f+k+n-t-q);if(b||""!==l.slice(f,
h).trim())return c&&0===m&&32!==g.getCodePoint(0)&&(b=d.lines.get(a[1]-1))&&g.isWrapped&&32!==b.getCodePoint(this._bufferService.cols-1)&&(b=this._getWordAt([this._bufferService.cols-1,a[1]-1],!1,!0,!1))&&(b=this._bufferService.cols-b.start,m-=b,k+=b),e&&m+k===this._bufferService.cols&&32!==g.getCodePoint(this._bufferService.cols-1)&&(e=d.lines.get(a[1]+1))&&e.isWrapped&&32!==e.getCodePoint(0)&&(a=this._getWordAt([0,a[1]+1],!1,!1,!0))&&(k+=a.length),{start:m,length:k}}}},b.prototype._selectWordAt=
function(a,b){if(b=this._getWordAt(a,b)){for(;0>b.start;)b.start+=this._bufferService.cols,a[1]--;this._model.selectionStart=[b.start,a[1]];this._model.selectionStartLength=b.length}},b.prototype._selectToWordAt=function(a){var b=this._getWordAt(a,!0);if(b){for(a=a[1];0>b.start;)b.start+=this._bufferService.cols,a--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,a++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?
b.start:b.start+b.length,a]}},b.prototype._isCharWordSeparator=function(a){return 0!==a.getWidth()&&0<=this._optionsService.options.wordSeparator.indexOf(a.getChars())},b.prototype._selectLineAt=function(a){a=this._bufferService.buffer.getWrappedRangeForLine(a);this._model.selectionStart=[0,a.first];this._model.selectionEnd=[this._bufferService.cols,a.last];this._model.selectionStartLength=0},k([q(2,c.IBufferService),q(3,c.ICoreService),q(4,m.IMouseService),q(5,c.IOptionsService),q(6,m.IRenderService)],
b)}(b.Disposable);a.SelectionService=b},4725:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.ISoundService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;b=f(8343);a.ICharSizeService=b.createDecorator("CharSizeService");a.ICoreBrowserService=b.createDecorator("CoreBrowserService");a.IMouseService=b.createDecorator("MouseService");a.IRenderService=b.createDecorator("RenderService");a.ISelectionService=b.createDecorator("SelectionService");
a.ISoundService=b.createDecorator("SoundService")},357:function(b,a,f){var d=this&&this.__decorate||function(a,b,d,l){var g,f=arguments.length,c=3>f?b:null===l?l=Object.getOwnPropertyDescriptor(b,d):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(a,b,d,l);else for(var e=a.length-1;0<=e;e--)(g=a[e])&&(c=(3>f?g(c):3<f?g(b,d,c):g(b,d))||c);return 3<f&&c&&Object.defineProperty(b,d,c),c},h=this&&this.__param||function(a,b){return function(d,l){b(d,l,a)}};Object.defineProperty(a,
"__esModule",{value:!0});a.SoundService=void 0;var k=f(2585);b=function(){function a(a){this._optionsService=a}return Object.defineProperty(a,"audioContext",{get:function(){if(!a._audioContext){var b=window.AudioContext||window.webkitAudioContext;if(!b)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;a._audioContext=new b}return a._audioContext},enumerable:!1,configurable:!0}),a.prototype.playBellSound=function(){var b=a.audioContext;
if(b){var d=b.createBufferSource();b.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(a){d.buffer=a;d.connect(b.destination);d.start(0)})}},a.prototype._base64ToArrayBuffer=function(a){a=window.atob(a);for(var b=a.length,d=new Uint8Array(b),f=0;f<b;f++)d[f]=a.charCodeAt(f);return d.buffer},a.prototype._removeMimeType=function(a){return a.split(",")[1]},a=d([h(0,k.IOptionsService)],a)}();a.SoundService=b},6349:function(b,a,f){Object.defineProperty(a,
"__esModule",{value:!0});a.CircularList=void 0;var d=f(8460);b=function(){function a(a){this._maxLength=a;this.onDeleteEmitter=new d.EventEmitter;this.onInsertEmitter=new d.EventEmitter;this.onTrimEmitter=new d.EventEmitter;this._array=Array(this._maxLength);this._length=this._startIndex=0}return Object.defineProperty(a.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},
enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxLength",{get:function(){return this._maxLength},set:function(a){if(this._maxLength!==a){for(var b=Array(a),d=0;d<Math.min(a,this.length);d++)b[d]=this._array[this._getCyclicIndex(d)];this._array=b;this._maxLength=a;this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"length",
{get:function(){return this._length},set:function(a){if(a>this._length)for(var b=this._length;b<a;b++)this._array[b]=void 0;this._length=a},enumerable:!1,configurable:!0}),a.prototype.get=function(a){return this._array[this._getCyclicIndex(a)]},a.prototype.set=function(a,b){this._array[this._getCyclicIndex(a)]=b},a.prototype.push=function(a){this._array[this._getCyclicIndex(this._length)]=a;this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):
this._length++},a.prototype.recycle=function(){if(this._length!==this._maxLength)throw Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(a.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),a.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length-- -1)]},a.prototype.splice=
function(a,b){for(var d=[],g=2;g<arguments.length;g++)d[g-2]=arguments[g];if(b){for(g=a;g<this._length-b;g++)this._array[this._getCyclicIndex(g)]=this._array[this._getCyclicIndex(g+b)];this._length-=b;this.onDeleteEmitter.fire({index:a,amount:b})}for(g=this._length-1;g>=a;g--)this._array[this._getCyclicIndex(g+d.length)]=this._array[this._getCyclicIndex(g)];for(g=0;g<d.length;g++)this._array[this._getCyclicIndex(a+g)]=d[g];(d.length&&this.onInsertEmitter.fire({index:a,amount:d.length}),this._length+
d.length>this._maxLength)?(d=this._length+d.length-this._maxLength,this._startIndex+=d,this._length=this._maxLength,this.onTrimEmitter.fire(d)):this._length+=d.length},a.prototype.trimStart=function(a){a>this._length&&(a=this._length);this._startIndex+=a;this._length-=a;this.onTrimEmitter.fire(a)},a.prototype.shiftElements=function(a,b,d){if(!(0>=b)){if(0>a||a>=this._length)throw Error("start argument out of range");if(0>a+d)throw Error("Cannot shift elements in list beyond index 0");if(0<d){for(var g=
b-1;0<=g;g--)this.set(a+g+d,this.get(a+g));a=a+b+d-this._length;if(0<a)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(g=0;g<b;g++)this.set(a+g+d,this.get(a+g))}},a.prototype._getCyclicIndex=function(a){return(this._startIndex+a)%this._maxLength},a}();a.CircularList=b},1439:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.clone=void 0;a.clone=function u(a,b){if(void 0===b&&(b=5),"object"!=typeof a)return a;var d=
Array.isArray(a)?[]:{},h;for(h in a)d[h]=1>=b?a[h]:a[h]?u(a[h],b-1):a[h];return d}},8969:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)});Object.defineProperty(a,"__esModule",{value:!0});
a.CoreTerminal=void 0;b=f(844);var k=f(2585),q=f(4348),t=f(7866),g=f(744),l=f(7302),n=f(6975),m=f(8460),c=f(1753),e=f(3730),v=f(1480),w=f(7994),z=f(9282),y=f(5435),x=f(5981);f=function(a){function b(b){var d=a.call(this)||this;return d._onBinary=new m.EventEmitter,d._onData=new m.EventEmitter,d._onLineFeed=new m.EventEmitter,d._onResize=new m.EventEmitter,d._onScroll=new m.EventEmitter,d._instantiationService=new q.InstantiationService,d.optionsService=new l.OptionsService(b),d._instantiationService.setService(k.IOptionsService,
d.optionsService),d._bufferService=d.register(d._instantiationService.createInstance(g.BufferService)),d._instantiationService.setService(k.IBufferService,d._bufferService),d._logService=d._instantiationService.createInstance(t.LogService),d._instantiationService.setService(k.ILogService,d._logService),d._coreService=d.register(d._instantiationService.createInstance(n.CoreService,function(){return d.scrollToBottom()})),d._instantiationService.setService(k.ICoreService,d._coreService),d._coreMouseService=
d._instantiationService.createInstance(c.CoreMouseService),d._instantiationService.setService(k.ICoreMouseService,d._coreMouseService),d._dirtyRowService=d._instantiationService.createInstance(e.DirtyRowService),d._instantiationService.setService(k.IDirtyRowService,d._dirtyRowService),d.unicodeService=d._instantiationService.createInstance(v.UnicodeService),d._instantiationService.setService(k.IUnicodeService,d.unicodeService),d._charsetService=d._instantiationService.createInstance(w.CharsetService),
d._instantiationService.setService(k.ICharsetService,d._charsetService),d._inputHandler=new y.InputHandler(d._bufferService,d._charsetService,d._coreService,d._dirtyRowService,d._logService,d.optionsService,d._coreMouseService,d.unicodeService),d.register(m.forwardEvent(d._inputHandler.onLineFeed,d._onLineFeed)),d.register(d._inputHandler),d.register(m.forwardEvent(d._bufferService.onResize,d._onResize)),d.register(m.forwardEvent(d._coreService.onData,d._onData)),d.register(m.forwardEvent(d._coreService.onBinary,
d._onBinary)),d.register(d.optionsService.onOptionChange(function(a){return d._updateOptions(a)})),d._writeBuffer=new x.WriteBuffer(function(a){return d._inputHandler.parse(a)}),d}return h(b,a),Object.defineProperty(b.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},
enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,
configurable:!0}),Object.defineProperty(b.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),b.prototype.dispose=function(){var b;this._isDisposed||(a.prototype.dispose.call(this),null===(b=this._windowsMode)||void 0===b||b.dispose(),this._windowsMode=void 0)},b.prototype.write=function(a,b){this._writeBuffer.write(a,b)},b.prototype.writeSync=function(a){this._writeBuffer.writeSync(a)},b.prototype.resize=function(a,b){isNaN(a)||isNaN(b)||(a=Math.max(a,
g.MINIMUM_COLS),b=Math.max(b,g.MINIMUM_ROWS),this._bufferService.resize(a,b))},b.prototype.scroll=function(a,b){void 0===b&&(b=!1);var c,e=this._bufferService.buffer;(c=this._cachedBlankLine)&&c.length===this.cols&&c.getFg(0)===a.fg&&c.getBg(0)===a.bg||(c=e.getBlankLine(a,b),this._cachedBlankLine=c);c.isWrapped=b;b=e.ybase+e.scrollTop;a=e.ybase+e.scrollBottom;0===e.scrollTop?(b=e.lines.isFull,a===e.lines.length-1?b?e.lines.recycle().copyFrom(c):e.lines.push(c.clone()):e.lines.splice(a+1,0,c.clone()),
b?this._bufferService.isUserScrolling&&(e.ydisp=Math.max(e.ydisp-1,0)):(e.ybase++,this._bufferService.isUserScrolling||e.ydisp++)):(e.lines.shiftElements(b+1,a-b+1-1,-1),e.lines.set(a,c.clone()));this._bufferService.isUserScrolling||(e.ydisp=e.ybase);this._dirtyRowService.markRangeDirty(e.scrollTop,e.scrollBottom);this._onScroll.fire(e.ydisp)},b.prototype.scrollLines=function(a,b){var c=this._bufferService.buffer;if(0>a){if(0===c.ydisp)return;this._bufferService.isUserScrolling=!0}else a+c.ydisp>=
c.ybase&&(this._bufferService.isUserScrolling=!1);var e=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+a,c.ybase),0);e!==c.ydisp&&(b||this._onScroll.fire(c.ydisp))},b.prototype.scrollPages=function(a){this.scrollLines(a*(this.rows-1))},b.prototype.scrollToTop=function(){this.scrollLines(-this._bufferService.buffer.ydisp)},b.prototype.scrollToBottom=function(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)},b.prototype.scrollToLine=function(a){a-=this._bufferService.buffer.ydisp;
0!==a&&this.scrollLines(a)},b.prototype.addEscHandler=function(a,b){return this._inputHandler.addEscHandler(a,b)},b.prototype.addDcsHandler=function(a,b){return this._inputHandler.addDcsHandler(a,b)},b.prototype.addCsiHandler=function(a,b){return this._inputHandler.addCsiHandler(a,b)},b.prototype.addOscHandler=function(a,b){return this._inputHandler.addOscHandler(a,b)},b.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},b.prototype.reset=function(){this._inputHandler.reset();
this._bufferService.reset();this._charsetService.reset();this._coreService.reset();this._coreMouseService.reset()},b.prototype._updateOptions=function(a){var b;switch(a){case "scrollback":this.buffers.resize(this.cols,this.rows);break;case "windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():(null===(b=this._windowsMode)||void 0===b||b.dispose(),this._windowsMode=void 0)}},b.prototype._enableWindowsMode=function(){var a=this;if(!this._windowsMode){var b=[];b.push(this.onLineFeed(z.updateWindowsModeWrappedState.bind(null,
this._bufferService)));b.push(this.addCsiHandler({final:"H"},function(){return z.updateWindowsModeWrappedState(a._bufferService),!1}));this._windowsMode={dispose:function(){for(var a=0;a<b.length;a++)b[a].dispose()}}}},b}(b.Disposable);a.CoreTerminal=f},8460:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.forwardEvent=a.EventEmitter=void 0;b=function(){function a(){this._listeners=[];this._disposed=!1}return Object.defineProperty(a.prototype,"event",{get:function(){var a=this;return this._event||
(this._event=function(b){return a._listeners.push(b),{dispose:function(){if(!a._disposed)for(var d=0;d<a._listeners.length;d++)if(a._listeners[d]===b)return void a._listeners.splice(d,1)}}}),this._event},enumerable:!1,configurable:!0}),a.prototype.fire=function(a,b){for(var d=[],f=0;f<this._listeners.length;f++)d.push(this._listeners[f]);for(f=0;f<d.length;f++)d[f].call(void 0,a,b)},a.prototype.dispose=function(){this._listeners&&(this._listeners.length=0);this._disposed=!0},a}();a.EventEmitter=b;
a.forwardEvent=function(a,b){return a(function(a){return b.fire(a)})}},5435:function(b,a,f){function d(a,b){if(24<a)return b.setWinLines||!1;switch(a){case 1:return!!b.restoreWin;case 2:return!!b.minimizeWin;case 3:return!!b.setWinPosition;case 4:return!!b.setWinSizePixels;case 5:return!!b.raiseWin;case 6:return!!b.lowerWin;case 7:return!!b.refreshWin;case 8:return!!b.setWinSizeChars;case 9:return!!b.maximizeWin;case 10:return!!b.fullscreenWin;case 11:return!!b.getWinState;case 13:return!!b.getWinPosition;
case 14:return!!b.getWinSizePixels;case 15:return!!b.getScreenSizePixels;case 16:return!!b.getCellSizePixels;case 18:return!!b.getWinSizeChars;case 19:return!!b.getScreenSizeChars;case 20:return!!b.getIconTitle;case 21:return!!b.getWinTitle;case 22:return!!b.pushTitle;case 23:return!!b.popTitle;case 24:return!!b.setWinLines}return!1}var h,k=this&&this.__extends||(h=function(a,b){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,
c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}h(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)});Object.defineProperty(a,"__esModule",{value:!0});a.InputHandler=a.WindowsOptionsReportType=void 0;var q,t=f(2584),g=f(7116),l=f(2015);b=f(844);var n=f(8273),m=f(482),c=f(8437),e=f(8460),v=f(643),w=f(511),z=f(3734),y=f(6242),x=f(6351),F={"(":0,")":1,"*":2,"+":3,"-":1,".":2};!function(a){a[a.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS";a[a.GET_CELL_SIZE_PIXELS=
1]="GET_CELL_SIZE_PIXELS"}(q=a.WindowsOptionsReportType||(a.WindowsOptionsReportType={}));var G=function(){function a(a,b,c,e){this._bufferService=a;this._coreService=b;this._logService=c;this._optionsService=e;this._data=new Uint32Array(0)}return a.prototype.hook=function(a){this._data=new Uint32Array(0)},a.prototype.put=function(a,b,c){this._data=n.concat(this._data,a.subarray(b,c))},a.prototype.unhook=function(a){if(!a)return this._data=new Uint32Array(0),!0;a=m.utf32ToString(this._data);switch(this._data=
new Uint32Array(0),a){case '"q':this._coreService.triggerDataEvent(t.C0.ESC+'P1$r0"q'+t.C0.ESC+"\\");break;case '"p':this._coreService.triggerDataEvent(t.C0.ESC+'P1$r61;1"p'+t.C0.ESC+"\\");break;case "r":this._coreService.triggerDataEvent(t.C0.ESC+"P1$r"+(this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r")+t.C0.ESC+"\\");break;case "m":this._coreService.triggerDataEvent(t.C0.ESC+"P1$r0m"+t.C0.ESC+"\\");break;case " q":a={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];
a-=this._optionsService.options.cursorBlink?1:0;this._coreService.triggerDataEvent(t.C0.ESC+"P1$r"+a+" q"+t.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",a),this._coreService.triggerDataEvent(t.C0.ESC+"P0$r"+t.C0.ESC+"\\")}return!0},a}();f=function(a){function b(b,d,f,h,k,n,r,q,u){void 0===u&&(u=new l.EscapeSequenceParser);var p=a.call(this)||this;p._bufferService=b;p._charsetService=d;p._coreService=f;p._dirtyRowService=h;p._logService=k;p._optionsService=n;p._coreMouseService=
r;p._unicodeService=q;p._parser=u;p._parseBuffer=new Uint32Array(4096);p._stringDecoder=new m.StringToUtf32;p._utf8Decoder=new m.Utf8ToUtf32;p._workCell=new w.CellData;p._windowTitle="";p._iconName="";p._windowTitleStack=[];p._iconNameStack=[];p._curAttrData=c.DEFAULT_ATTR_DATA.clone();p._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone();p._onRequestBell=new e.EventEmitter;p._onRequestRefreshRows=new e.EventEmitter;p._onRequestReset=new e.EventEmitter;p._onRequestScroll=new e.EventEmitter;p._onRequestSyncScrollBar=
new e.EventEmitter;p._onRequestWindowsOptionsReport=new e.EventEmitter;p._onA11yChar=new e.EventEmitter;p._onA11yTab=new e.EventEmitter;p._onCursorMove=new e.EventEmitter;p._onLineFeed=new e.EventEmitter;p._onScroll=new e.EventEmitter;p._onTitleChange=new e.EventEmitter;p._onAnsiColorChange=new e.EventEmitter;p.register(p._parser);p._parser.setCsiHandlerFallback(function(a,b){p._logService.debug("Unknown CSI code: ",{identifier:p._parser.identToString(a),params:b.toArray()})});p._parser.setEscHandlerFallback(function(a){p._logService.debug("Unknown ESC code: ",
{identifier:p._parser.identToString(a)})});p._parser.setExecuteHandlerFallback(function(a){p._logService.debug("Unknown EXECUTE code: ",{code:a})});p._parser.setOscHandlerFallback(function(a,b,c){p._logService.debug("Unknown OSC code: ",{identifier:a,action:b,data:c})});p._parser.setDcsHandlerFallback(function(a,b,c){"HOOK"===b&&(c=c.toArray());p._logService.debug("Unknown DCS code: ",{identifier:p._parser.identToString(a),action:b,payload:c})});p._parser.setPrintHandler(function(a,b,c){return p.print(a,
b,c)});p._parser.registerCsiHandler({final:"@"},function(a){return p.insertChars(a)});p._parser.registerCsiHandler({intermediates:" ",final:"@"},function(a){return p.scrollLeft(a)});p._parser.registerCsiHandler({final:"A"},function(a){return p.cursorUp(a)});p._parser.registerCsiHandler({intermediates:" ",final:"A"},function(a){return p.scrollRight(a)});p._parser.registerCsiHandler({final:"B"},function(a){return p.cursorDown(a)});p._parser.registerCsiHandler({final:"C"},function(a){return p.cursorForward(a)});
p._parser.registerCsiHandler({final:"D"},function(a){return p.cursorBackward(a)});p._parser.registerCsiHandler({final:"E"},function(a){return p.cursorNextLine(a)});p._parser.registerCsiHandler({final:"F"},function(a){return p.cursorPrecedingLine(a)});p._parser.registerCsiHandler({final:"G"},function(a){return p.cursorCharAbsolute(a)});p._parser.registerCsiHandler({final:"H"},function(a){return p.cursorPosition(a)});p._parser.registerCsiHandler({final:"I"},function(a){return p.cursorForwardTab(a)});
p._parser.registerCsiHandler({final:"J"},function(a){return p.eraseInDisplay(a)});p._parser.registerCsiHandler({prefix:"?",final:"J"},function(a){return p.eraseInDisplay(a)});p._parser.registerCsiHandler({final:"K"},function(a){return p.eraseInLine(a)});p._parser.registerCsiHandler({prefix:"?",final:"K"},function(a){return p.eraseInLine(a)});p._parser.registerCsiHandler({final:"L"},function(a){return p.insertLines(a)});p._parser.registerCsiHandler({final:"M"},function(a){return p.deleteLines(a)});
p._parser.registerCsiHandler({final:"P"},function(a){return p.deleteChars(a)});p._parser.registerCsiHandler({final:"S"},function(a){return p.scrollUp(a)});p._parser.registerCsiHandler({final:"T"},function(a){return p.scrollDown(a)});p._parser.registerCsiHandler({final:"X"},function(a){return p.eraseChars(a)});p._parser.registerCsiHandler({final:"Z"},function(a){return p.cursorBackwardTab(a)});p._parser.registerCsiHandler({final:"`"},function(a){return p.charPosAbsolute(a)});p._parser.registerCsiHandler({final:"a"},
function(a){return p.hPositionRelative(a)});p._parser.registerCsiHandler({final:"b"},function(a){return p.repeatPrecedingCharacter(a)});p._parser.registerCsiHandler({final:"c"},function(a){return p.sendDeviceAttributesPrimary(a)});p._parser.registerCsiHandler({prefix:">",final:"c"},function(a){return p.sendDeviceAttributesSecondary(a)});p._parser.registerCsiHandler({final:"d"},function(a){return p.linePosAbsolute(a)});p._parser.registerCsiHandler({final:"e"},function(a){return p.vPositionRelative(a)});
p._parser.registerCsiHandler({final:"f"},function(a){return p.hVPosition(a)});p._parser.registerCsiHandler({final:"g"},function(a){return p.tabClear(a)});p._parser.registerCsiHandler({final:"h"},function(a){return p.setMode(a)});p._parser.registerCsiHandler({prefix:"?",final:"h"},function(a){return p.setModePrivate(a)});p._parser.registerCsiHandler({final:"l"},function(a){return p.resetMode(a)});p._parser.registerCsiHandler({prefix:"?",final:"l"},function(a){return p.resetModePrivate(a)});p._parser.registerCsiHandler({final:"m"},
function(a){return p.charAttributes(a)});p._parser.registerCsiHandler({final:"n"},function(a){return p.deviceStatus(a)});p._parser.registerCsiHandler({prefix:"?",final:"n"},function(a){return p.deviceStatusPrivate(a)});p._parser.registerCsiHandler({intermediates:"!",final:"p"},function(a){return p.softReset(a)});p._parser.registerCsiHandler({intermediates:" ",final:"q"},function(a){return p.setCursorStyle(a)});p._parser.registerCsiHandler({final:"r"},function(a){return p.setScrollRegion(a)});p._parser.registerCsiHandler({final:"s"},
function(a){return p.saveCursor(a)});p._parser.registerCsiHandler({final:"t"},function(a){return p.windowOptions(a)});p._parser.registerCsiHandler({final:"u"},function(a){return p.restoreCursor(a)});p._parser.registerCsiHandler({intermediates:"'",final:"}"},function(a){return p.insertColumns(a)});p._parser.registerCsiHandler({intermediates:"'",final:"~"},function(a){return p.deleteColumns(a)});p._parser.setExecuteHandler(t.C0.BEL,function(){return p.bell()});p._parser.setExecuteHandler(t.C0.LF,function(){return p.lineFeed()});
p._parser.setExecuteHandler(t.C0.VT,function(){return p.lineFeed()});p._parser.setExecuteHandler(t.C0.FF,function(){return p.lineFeed()});p._parser.setExecuteHandler(t.C0.CR,function(){return p.carriageReturn()});p._parser.setExecuteHandler(t.C0.BS,function(){return p.backspace()});p._parser.setExecuteHandler(t.C0.HT,function(){return p.tab()});p._parser.setExecuteHandler(t.C0.SO,function(){return p.shiftOut()});p._parser.setExecuteHandler(t.C0.SI,function(){return p.shiftIn()});p._parser.setExecuteHandler(t.C1.IND,
function(){return p.index()});p._parser.setExecuteHandler(t.C1.NEL,function(){return p.nextLine()});p._parser.setExecuteHandler(t.C1.HTS,function(){return p.tabSet()});p._parser.registerOscHandler(0,new y.OscHandler(function(a){return p.setTitle(a),p.setIconName(a),!0}));p._parser.registerOscHandler(1,new y.OscHandler(function(a){return p.setIconName(a)}));p._parser.registerOscHandler(2,new y.OscHandler(function(a){return p.setTitle(a)}));p._parser.registerOscHandler(4,new y.OscHandler(function(a){return p.setAnsiColor(a)}));
p._parser.registerEscHandler({final:"7"},function(){return p.saveCursor()});p._parser.registerEscHandler({final:"8"},function(){return p.restoreCursor()});p._parser.registerEscHandler({final:"D"},function(){return p.index()});p._parser.registerEscHandler({final:"E"},function(){return p.nextLine()});p._parser.registerEscHandler({final:"H"},function(){return p.tabSet()});p._parser.registerEscHandler({final:"M"},function(){return p.reverseIndex()});p._parser.registerEscHandler({final:"="},function(){return p.keypadApplicationMode()});
p._parser.registerEscHandler({final:">"},function(){return p.keypadNumericMode()});p._parser.registerEscHandler({final:"c"},function(){return p.fullReset()});p._parser.registerEscHandler({final:"n"},function(){return p.setgLevel(2)});p._parser.registerEscHandler({final:"o"},function(){return p.setgLevel(3)});p._parser.registerEscHandler({final:"|"},function(){return p.setgLevel(3)});p._parser.registerEscHandler({final:"}"},function(){return p.setgLevel(2)});p._parser.registerEscHandler({final:"~"},
function(){return p.setgLevel(1)});p._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return p.selectDefaultCharset()});p._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return p.selectDefaultCharset()});b=function(a){v._parser.registerEscHandler({intermediates:"(",final:a},function(){return p.selectCharset("("+a)});v._parser.registerEscHandler({intermediates:")",final:a},function(){return p.selectCharset(")"+a)});v._parser.registerEscHandler({intermediates:"*",
final:a},function(){return p.selectCharset("*"+a)});v._parser.registerEscHandler({intermediates:"+",final:a},function(){return p.selectCharset("+"+a)});v._parser.registerEscHandler({intermediates:"-",final:a},function(){return p.selectCharset("-"+a)});v._parser.registerEscHandler({intermediates:".",final:a},function(){return p.selectCharset("."+a)});v._parser.registerEscHandler({intermediates:"/",final:a},function(){return p.selectCharset("/"+a)})};var v=this,C;for(C in g.CHARSETS)b(C);return p._parser.registerEscHandler({intermediates:"#",
final:"8"},function(){return p.screenAlignmentPattern()}),p._parser.setErrorHandler(function(a){return p._logService.error("Parsing error: ",a),a}),p._parser.registerDcsHandler({intermediates:"$",final:"q"},new G(p._bufferService,p._coreService,p._logService,p._optionsService)),p}return k(b,a),Object.defineProperty(b.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},
enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRequestScroll",{get:function(){return this._onRequestScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onRequestWindowsOptionsReport",
{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,
"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onAnsiColorChange",{get:function(){return this._onAnsiColorChange.event},enumerable:!1,configurable:!0}),b.prototype.dispose=
function(){a.prototype.dispose.call(this)},b.prototype.parse=function(a){var b=this._bufferService.buffer,c=b.x,e=b.y;if(this._logService.debug("parsing data",a),this._parseBuffer.length<a.length&&131072>this._parseBuffer.length&&(this._parseBuffer=new Uint32Array(Math.min(a.length,131072))),this._dirtyRowService.clearRange(),131072<a.length)for(var d=0;d<a.length;d+=131072){var g=d+131072<a.length?d+131072:a.length;g="string"==typeof a?this._stringDecoder.decode(a.substring(d,g),this._parseBuffer):
this._utf8Decoder.decode(a.subarray(d,g),this._parseBuffer);this._parser.parse(this._parseBuffer,g)}else g="string"==typeof a?this._stringDecoder.decode(a,this._parseBuffer):this._utf8Decoder.decode(a,this._parseBuffer),this._parser.parse(this._parseBuffer,g);(b=this._bufferService.buffer).x===c&&b.y===e||this._onCursorMove.fire();this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},b.prototype.print=function(a,b,c){var e,d,g=this._bufferService.buffer,f=this._charsetService.charset,
l=this._optionsService.options.screenReaderMode,h=this._bufferService.cols,k=this._coreService.decPrivateModes.wraparound,n=this._coreService.modes.insertMode,p=this._curAttrData,r=g.lines.get(g.ybase+g.y);this._dirtyRowService.markDirty(g.y);g.x&&0<c-b&&2===r.getWidth(g.x-1)&&r.setCellFromCodePoint(g.x-1,0,1,p.fg,p.bg,p.extended);for(var q=b;q<c;++q){if(e=a[q],d=this._unicodeService.wcwidth(e),127>e&&f){var t=f[String.fromCharCode(e)];t&&(e=t.charCodeAt(0))}if(l&&this._onA11yChar.fire(m.stringFromCodePoint(e)),
d||!g.x){if(g.x+d-1>=h)if(k){for(;g.x<h;)r.setCellFromCodePoint(g.x++,0,1,p.fg,p.bg,p.extended);g.x=0;g.y++;g.y===g.scrollBottom+1?(g.y--,this._onRequestScroll.fire(this._eraseAttrData(),!0)):(g.y>=this._bufferService.rows&&(g.y=this._bufferService.rows-1),g.lines.get(g.ybase+g.y).isWrapped=!0);r=g.lines.get(g.ybase+g.y)}else if(g.x=h-1,2===d)continue;if(n&&(r.insertCells(g.x,d,g.getNullCell(p),p),2===r.getWidth(h-1)&&r.setCellFromCodePoint(h-1,v.NULL_CELL_CODE,v.NULL_CELL_WIDTH,p.fg,p.bg,p.extended)),
r.setCellFromCodePoint(g.x++,e,d,p.fg,p.bg,p.extended),0<d)for(;--d;)r.setCellFromCodePoint(g.x++,0,0,p.fg,p.bg,p.extended)}else r.getWidth(g.x-1)?r.addCodepointToCell(g.x-1,e):r.addCodepointToCell(g.x-2,e)}0<c-b&&(r.loadCell(g.x-1,this._workCell),2===this._workCell.getWidth()||65535<this._workCell.getCode()?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content);g.x<
h&&0<c-b&&0===r.getWidth(g.x)&&!r.hasContent(g.x)&&r.setCellFromCodePoint(g.x,0,1,p.fg,p.bg,p.extended);this._dirtyRowService.markDirty(g.y)},b.prototype.addCsiHandler=function(a,b){var c=this;return"t"!==a.final||a.prefix||a.intermediates?this._parser.registerCsiHandler(a,b):this._parser.registerCsiHandler(a,function(a){return!d(a.params[0],c._optionsService.options.windowOptions)||b(a)})},b.prototype.addDcsHandler=function(a,b){return this._parser.registerDcsHandler(a,new x.DcsHandler(b))},b.prototype.addEscHandler=
function(a,b){return this._parser.registerEscHandler(a,b)},b.prototype.addOscHandler=function(a,b){return this._parser.registerOscHandler(a,new y.OscHandler(b))},b.prototype.bell=function(){return this._onRequestBell.fire(),!0},b.prototype.lineFeed=function(){var a=this._bufferService.buffer;return this._dirtyRowService.markDirty(a.y),this._optionsService.options.convertEol&&(a.x=0),a.y++,a.y===a.scrollBottom+1?(a.y--,this._onRequestScroll.fire(this._eraseAttrData())):a.y>=this._bufferService.rows&&
(a.y=this._bufferService.rows-1),a.x>=this._bufferService.cols&&a.x--,this._dirtyRowService.markDirty(a.y),this._onLineFeed.fire(),!0},b.prototype.carriageReturn=function(){return this._bufferService.buffer.x=0,!0},b.prototype.backspace=function(){var a,b=this._bufferService.buffer;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),0<b.x&&b.x--,!0;(this._restrictCursor(this._bufferService.cols),0<b.x)?b.x--:0===b.x&&b.y>b.scrollTop&&b.y<=b.scrollBottom&&(null===
(a=b.lines.get(b.ybase+b.y))||void 0===a?0:a.isWrapped)&&(b.lines.get(b.ybase+b.y).isWrapped=!1,b.y--,b.x=this._bufferService.cols-1,a=b.lines.get(b.ybase+b.y),a.hasWidth(b.x)&&!a.hasContent(b.x)&&b.x--);return this._restrictCursor(),!0},b.prototype.tab=function(){if(this._bufferService.buffer.x>=this._bufferService.cols)return!0;var a=this._bufferService.buffer.x;return this._bufferService.buffer.x=this._bufferService.buffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._bufferService.buffer.x-
a),!0},b.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},b.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},b.prototype._restrictCursor=function(a){void 0===a&&(a=this._bufferService.cols-1);this._bufferService.buffer.x=Math.min(a,Math.max(0,this._bufferService.buffer.x));this._bufferService.buffer.y=this._coreService.decPrivateModes.origin?Math.min(this._bufferService.buffer.scrollBottom,Math.max(this._bufferService.buffer.scrollTop,this._bufferService.buffer.y)):
Math.min(this._bufferService.rows-1,Math.max(0,this._bufferService.buffer.y));this._dirtyRowService.markDirty(this._bufferService.buffer.y)},b.prototype._setCursor=function(a,b){this._dirtyRowService.markDirty(this._bufferService.buffer.y);this._coreService.decPrivateModes.origin?(this._bufferService.buffer.x=a,this._bufferService.buffer.y=this._bufferService.buffer.scrollTop+b):(this._bufferService.buffer.x=a,this._bufferService.buffer.y=b);this._restrictCursor();this._dirtyRowService.markDirty(this._bufferService.buffer.y)},
b.prototype._moveCursor=function(a,b){this._restrictCursor();this._setCursor(this._bufferService.buffer.x+a,this._bufferService.buffer.y+b)},b.prototype.cursorUp=function(a){var b=this._bufferService.buffer.y-this._bufferService.buffer.scrollTop;return 0<=b?this._moveCursor(0,-Math.min(b,a.params[0]||1)):this._moveCursor(0,-(a.params[0]||1)),!0},b.prototype.cursorDown=function(a){var b=this._bufferService.buffer.scrollBottom-this._bufferService.buffer.y;return 0<=b?this._moveCursor(0,Math.min(b,a.params[0]||
1)):this._moveCursor(0,a.params[0]||1),!0},b.prototype.cursorForward=function(a){return this._moveCursor(a.params[0]||1,0),!0},b.prototype.cursorBackward=function(a){return this._moveCursor(-(a.params[0]||1),0),!0},b.prototype.cursorNextLine=function(a){return this.cursorDown(a),this._bufferService.buffer.x=0,!0},b.prototype.cursorPrecedingLine=function(a){return this.cursorUp(a),this._bufferService.buffer.x=0,!0},b.prototype.cursorCharAbsolute=function(a){return this._setCursor((a.params[0]||1)-
1,this._bufferService.buffer.y),!0},b.prototype.cursorPosition=function(a){return this._setCursor(2<=a.length?(a.params[1]||1)-1:0,(a.params[0]||1)-1),!0},b.prototype.charPosAbsolute=function(a){return this._setCursor((a.params[0]||1)-1,this._bufferService.buffer.y),!0},b.prototype.hPositionRelative=function(a){return this._moveCursor(a.params[0]||1,0),!0},b.prototype.linePosAbsolute=function(a){return this._setCursor(this._bufferService.buffer.x,(a.params[0]||1)-1),!0},b.prototype.vPositionRelative=
function(a){return this._moveCursor(0,a.params[0]||1),!0},b.prototype.hVPosition=function(a){return this.cursorPosition(a),!0},b.prototype.tabClear=function(a){a=a.params[0];return 0===a?delete this._bufferService.buffer.tabs[this._bufferService.buffer.x]:3===a&&(this._bufferService.buffer.tabs={}),!0},b.prototype.cursorForwardTab=function(a){if(this._bufferService.buffer.x>=this._bufferService.cols)return!0;for(a=a.params[0]||1;a--;)this._bufferService.buffer.x=this._bufferService.buffer.nextStop();
return!0},b.prototype.cursorBackwardTab=function(a){if(this._bufferService.buffer.x>=this._bufferService.cols)return!0;a=a.params[0]||1;for(var b=this._bufferService.buffer;a--;)b.x=b.prevStop();return!0},b.prototype._eraseInBufferLine=function(a,b,c,e){void 0===e&&(e=!1);a=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+a);a.replaceCells(b,c,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData());e&&(a.isWrapped=!1)},b.prototype._resetBufferLine=
function(a){a=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+a);a.fill(this._bufferService.buffer.getNullCell(this._eraseAttrData()));a.isWrapped=!1},b.prototype.eraseInDisplay=function(a){switch(this._restrictCursor(),a.params[0]){case 0:a=this._bufferService.buffer.y;this._dirtyRowService.markDirty(a);for(this._eraseInBufferLine(a++,this._bufferService.buffer.x,this._bufferService.cols,0===this._bufferService.buffer.x);a<this._bufferService.rows;a++)this._resetBufferLine(a);
this._dirtyRowService.markDirty(a);break;case 1:a=this._bufferService.buffer.y;this._dirtyRowService.markDirty(a);this._eraseInBufferLine(a,0,this._bufferService.buffer.x+1,!0);for(this._bufferService.buffer.x+1>=this._bufferService.cols&&(this._bufferService.buffer.lines.get(a+1).isWrapped=!1);a--;)this._resetBufferLine(a);this._dirtyRowService.markDirty(0);break;case 2:a=this._bufferService.rows;for(this._dirtyRowService.markDirty(a-1);a--;)this._resetBufferLine(a);this._dirtyRowService.markDirty(0);
break;case 3:a=this._bufferService.buffer.lines.length-this._bufferService.rows,0<a&&(this._bufferService.buffer.lines.trimStart(a),this._bufferService.buffer.ybase=Math.max(this._bufferService.buffer.ybase-a,0),this._bufferService.buffer.ydisp=Math.max(this._bufferService.buffer.ydisp-a,0),this._onScroll.fire(0))}return!0},b.prototype.eraseInLine=function(a){switch(this._restrictCursor(),a.params[0]){case 0:this._eraseInBufferLine(this._bufferService.buffer.y,this._bufferService.buffer.x,this._bufferService.cols);
break;case 1:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.buffer.x+1);break;case 2:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.cols)}return this._dirtyRowService.markDirty(this._bufferService.buffer.y),!0},b.prototype.insertLines=function(a){this._restrictCursor();a=a.params[0]||1;var b=this._bufferService.buffer;if(b.y>b.scrollBottom||b.y<b.scrollTop)return!0;for(var c=b.ybase+b.y,e=this._bufferService.rows-1+b.ybase-(this._bufferService.rows-
1-b.scrollBottom)+1;a--;)b.lines.splice(e-1,1),b.lines.splice(c,0,b.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(b.y,b.scrollBottom),b.x=0,!0},b.prototype.deleteLines=function(a){this._restrictCursor();a=a.params[0]||1;var b=this._bufferService.buffer;if(b.y>b.scrollBottom||b.y<b.scrollTop)return!0;var c=b.ybase+b.y;var e=this._bufferService.rows-1-b.scrollBottom;for(e=this._bufferService.rows-1+b.ybase-e;a--;)b.lines.splice(c,1),b.lines.splice(e,0,b.getBlankLine(this._eraseAttrData()));
return this._dirtyRowService.markRangeDirty(b.y,b.scrollBottom),b.x=0,!0},b.prototype.insertChars=function(a){this._restrictCursor();var b=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);return b&&(b.insertCells(this._bufferService.buffer.x,a.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y)),!0},b.prototype.deleteChars=function(a){this._restrictCursor();
var b=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);return b&&(b.deleteCells(this._bufferService.buffer.x,a.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y)),!0},b.prototype.scrollUp=function(a){a=a.params[0]||1;for(var b=this._bufferService.buffer;a--;)b.lines.splice(b.ybase+b.scrollTop,1),b.lines.splice(b.ybase+b.scrollBottom,0,b.getBlankLine(this._eraseAttrData()));
return this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom),!0},b.prototype.scrollDown=function(a){a=a.params[0]||1;for(var b=this._bufferService.buffer;a--;)b.lines.splice(b.ybase+b.scrollBottom,1),b.lines.splice(b.ybase+b.scrollTop,0,b.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom),!0},b.prototype.scrollLeft=function(a){var b=this._bufferService.buffer;if(b.y>b.scrollBottom||b.y<b.scrollTop)return!0;a=a.params[0]||1;for(var c=
b.scrollTop;c<=b.scrollBottom;++c){var e=b.lines.get(b.ybase+c);e.deleteCells(0,a,b.getNullCell(this._eraseAttrData()),this._eraseAttrData());e.isWrapped=!1}return this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom),!0},b.prototype.scrollRight=function(a){var b=this._bufferService.buffer;if(b.y>b.scrollBottom||b.y<b.scrollTop)return!0;a=a.params[0]||1;for(var c=b.scrollTop;c<=b.scrollBottom;++c){var e=b.lines.get(b.ybase+c);e.insertCells(0,a,b.getNullCell(this._eraseAttrData()),this._eraseAttrData());
e.isWrapped=!1}return this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom),!0},b.prototype.insertColumns=function(a){var b=this._bufferService.buffer;if(b.y>b.scrollBottom||b.y<b.scrollTop)return!0;a=a.params[0]||1;for(var c=b.scrollTop;c<=b.scrollBottom;++c){var e=this._bufferService.buffer.lines.get(b.ybase+c);e.insertCells(b.x,a,b.getNullCell(this._eraseAttrData()),this._eraseAttrData());e.isWrapped=!1}return this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom),!0},b.prototype.deleteColumns=
function(a){var b=this._bufferService.buffer;if(b.y>b.scrollBottom||b.y<b.scrollTop)return!0;a=a.params[0]||1;for(var c=b.scrollTop;c<=b.scrollBottom;++c){var e=b.lines.get(b.ybase+c);e.deleteCells(b.x,a,b.getNullCell(this._eraseAttrData()),this._eraseAttrData());e.isWrapped=!1}return this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom),!0},b.prototype.eraseChars=function(a){this._restrictCursor();var b=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);
return b&&(b.replaceCells(this._bufferService.buffer.x,this._bufferService.buffer.x+(a.params[0]||1),this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y)),!0},b.prototype.repeatPrecedingCharacter=function(a){if(!this._parser.precedingCodepoint)return!0;a=a.params[0]||1;for(var b=new Uint32Array(a),c=0;c<a;++c)b[c]=this._parser.precedingCodepoint;return this.print(b,0,b.length),!0},b.prototype.sendDeviceAttributesPrimary=
function(a){return 0<a.params[0]||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(t.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(t.C0.ESC+"[?6c")),!0},b.prototype.sendDeviceAttributesSecondary=function(a){return 0<a.params[0]||(this._is("xterm")?this._coreService.triggerDataEvent(t.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(t.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(a.params[0]+
"c"):this._is("screen")&&this._coreService.triggerDataEvent(t.C0.ESC+"[>83;40003;0c")),!0},b.prototype._is=function(a){return 0===(this._optionsService.options.termName+"").indexOf(a)},b.prototype.setMode=function(a){for(var b=0;b<a.length;b++)switch(a.params[b]){case 4:this._coreService.modes.insertMode=!0}return!0},b.prototype.setModePrivate=function(a){for(var b=0;b<a.length;b++)switch(a.params[b]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,
g.DEFAULT_CHARSET);this._charsetService.setgCharset(1,g.DEFAULT_CHARSET);this._charsetService.setgCharset(2,g.DEFAULT_CHARSET);this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0;this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=
!0;break;case 66:this._logService.debug("Serial port requested application keypad.");this._coreService.decPrivateModes.applicationKeypad=!0;this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1E3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");
break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData());this._coreService.isCursorInitialized=!0;this._onRequestRefreshRows.fire(0,this._bufferService.rows-1);this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=
!0}return!0},b.prototype.resetMode=function(a){for(var b=0;b<a.length;b++)switch(a.params[b]){case 4:this._coreService.modes.insertMode=!1}return!0},b.prototype.resetModePrivate=function(a){for(var b=0;b<a.length;b++)switch(a.params[b]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=
!1;this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad.");this._coreService.decPrivateModes.applicationKeypad=!1;this._onRequestSyncScrollBar.fire();break;case 9:case 1E3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");
break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer();1049===a.params[b]&&this.restoreCursor();this._coreService.isCursorInitialized=!0;this._onRequestRefreshRows.fire(0,this._bufferService.rows-1);this._onRequestSyncScrollBar.fire();break;
case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},b.prototype._updateAttrColor=function(a,b,c,e,d){return 2===b?(a|=50331648,a&=-16777216,a|=z.AttributeData.fromColorRGB([c,e,d])):5===b&&(a&=-50331904,a|=33554432|255&c),a},b.prototype._extractColor=function(a,b,c){var e=[0,0,-1,0,0,0],d=0,g=0;do{if(e[g+d]=a.params[b+g],a.hasSubParams(b+g)){a=a.getSubParams(b+g);b=0;do 5===e[1]&&(d=1),e[g+b+1+d]=a[b];while(++b<a.length&&b+g+1+d<e.length);break}if(5===e[1]&&2<=g+d||2===e[1]&&
5<=g+d)break;e[1]&&(d=1)}while(++g+b<a.length&&g+d<e.length);for(b=2;b<e.length;++b)-1===e[b]&&(e[b]=0);switch(e[0]){case 38:c.fg=this._updateAttrColor(c.fg,e[1],e[3],e[4],e[5]);break;case 48:c.bg=this._updateAttrColor(c.bg,e[1],e[3],e[4],e[5]);break;case 58:c.extended=c.extended.clone(),c.extended.underlineColor=this._updateAttrColor(c.extended.underlineColor,e[1],e[3],e[4],e[5])}return g},b.prototype._processUnderline=function(a,b){b.extended=b.extended.clone();(!~a||5<a)&&(a=1);b.extended.underlineStyle=
a;b.fg|=268435456;0===a&&(b.fg&=-268435457);b.updateExtended()},b.prototype.charAttributes=function(a){if(1===a.length&&0===a.params[0])return this._curAttrData.fg=c.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=c.DEFAULT_ATTR_DATA.bg,!0;for(var b,e=a.length,d=this._curAttrData,g=0;g<e;g++)30<=(b=a.params[g])&&37>=b?(d.fg&=-50331904,d.fg=d.fg|16777216|b-30):40<=b&&47>=b?(d.bg&=-50331904,d.bg=d.bg|16777216|b-40):90<=b&&97>=b?(d.fg&=-50331904,d.fg=d.fg|16777224|b-90):100<=b&&107>=b?(d.bg&=-50331904,d.bg=
d.bg|16777224|b-100):0===b?(d.fg=c.DEFAULT_ATTR_DATA.fg,d.bg=c.DEFAULT_ATTR_DATA.bg):1===b?d.fg|=134217728:3===b?d.bg|=67108864:4===b?(d.fg|=268435456,this._processUnderline(a.hasSubParams(g)?a.getSubParams(g)[0]:1,d)):5===b?d.fg|=536870912:7===b?d.fg|=67108864:8===b?d.fg|=1073741824:2===b?d.bg|=134217728:21===b?this._processUnderline(2,d):22===b?(d.fg&=-134217729,d.bg&=-134217729):23===b?d.bg&=-67108865:24===b?d.fg&=-268435457:25===b?d.fg&=-536870913:27===b?d.fg&=-67108865:28===b?d.fg&=-1073741825:
39===b?(d.fg&=-67108864,d.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):49===b?(d.bg&=-67108864,d.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):38===b||48===b||58===b?g+=this._extractColor(a,g,d):59===b?(d.extended=d.extended.clone(),d.extended.underlineColor=-1,d.updateExtended()):100===b?(d.fg&=-67108864,d.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,d.bg&=-67108864,d.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",b);return!0},b.prototype.deviceStatus=function(a){switch(a.params[0]){case 5:this._coreService.triggerDataEvent(t.C0.ESC+
"[0n");break;case 6:this._coreService.triggerDataEvent(t.C0.ESC+"["+(this._bufferService.buffer.y+1)+";"+(this._bufferService.buffer.x+1)+"R")}return!0},b.prototype.deviceStatusPrivate=function(a){switch(a.params[0]){case 6:this._coreService.triggerDataEvent(t.C0.ESC+"[?"+(this._bufferService.buffer.y+1)+";"+(this._bufferService.buffer.x+1)+"R")}return!0},b.prototype.softReset=function(a){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._bufferService.buffer.scrollTop=
0,this._bufferService.buffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._bufferService.buffer.savedX=0,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=
!1,!0},b.prototype.setCursorStyle=function(a){a=a.params[0]||1;switch(a){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}return this._optionsService.options.cursorBlink=1==a%2,!0},b.prototype.setScrollRegion=function(a){var b,c=a.params[0]||1;return(2>a.length||(b=a.params[1])>this._bufferService.rows||0===b)&&(b=this._bufferService.rows),b>c&&
(this._bufferService.buffer.scrollTop=c-1,this._bufferService.buffer.scrollBottom=b-1,this._setCursor(0,0)),!0},b.prototype.windowOptions=function(a){if(!d(a.params[0],this._optionsService.options.windowOptions))return!0;var b=1<a.length?a.params[1]:0;switch(a.params[0]){case 14:2!==b&&this._onRequestWindowsOptionsReport.fire(q.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(q.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(t.C0.ESC+
"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:0!==b&&2!==b||(this._windowTitleStack.push(this._windowTitle),10<this._windowTitleStack.length&&this._windowTitleStack.shift());0!==b&&1!==b||(this._iconNameStack.push(this._iconName),10<this._iconNameStack.length&&this._iconNameStack.shift());break;case 23:0!==b&&2!==b||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==b&&1!==b||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},
b.prototype.saveCursor=function(a){return this._bufferService.buffer.savedX=this._bufferService.buffer.x,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase+this._bufferService.buffer.y,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset,!0},b.prototype.restoreCursor=function(a){return this._bufferService.buffer.x=this._bufferService.buffer.savedX||
0,this._bufferService.buffer.y=Math.max(this._bufferService.buffer.savedY-this._bufferService.buffer.ybase,0),this._curAttrData.fg=this._bufferService.buffer.savedCurAttrData.fg,this._curAttrData.bg=this._bufferService.buffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._bufferService.buffer.savedCharset&&(this._charsetService.charset=this._bufferService.buffer.savedCharset),this._restrictCursor(),!0},b.prototype.setTitle=function(a){return this._windowTitle=a,this._onTitleChange.fire(a),
!0},b.prototype.setIconName=function(a){return this._iconName=a,!0},b.prototype._parseAnsiColorChange=function(a){for(var b,c={colors:[]},e=/(\d+);rgb:([0-9a-f]{2})\/([0-9a-f]{2})\/([0-9a-f]{2})/gi;null!==(b=e.exec(a));)c.colors.push({colorIndex:parseInt(b[1]),red:parseInt(b[2],16),green:parseInt(b[3],16),blue:parseInt(b[4],16)});return 0===c.colors.length?null:c},b.prototype.setAnsiColor=function(a){var b=this._parseAnsiColorChange(a);return b?this._onAnsiColorChange.fire(b):this._logService.warn("Expected format <num>;rgb:<rr>/<gg>/<bb> but got data: "+
a),!0},b.prototype.nextLine=function(){return this._bufferService.buffer.x=0,this.index(),!0},b.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},b.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),
!0},b.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0},b.prototype.selectCharset=function(a){return 2!==a.length?(this.selectDefaultCharset(),!0):("/"===a[0]||this._charsetService.setgCharset(F[a[0]],g.CHARSETS[a[1]]||g.DEFAULT_CHARSET),!0)},b.prototype.index=function(){this._restrictCursor();var a=this._bufferService.buffer;return this._bufferService.buffer.y++,a.y===a.scrollBottom+1?(a.y--,this._onRequestScroll.fire(this._eraseAttrData())):
a.y>=this._bufferService.rows&&(a.y=this._bufferService.rows-1),this._restrictCursor(),!0},b.prototype.tabSet=function(){return this._bufferService.buffer.tabs[this._bufferService.buffer.x]=!0,!0},b.prototype.reverseIndex=function(){this._restrictCursor();var a=this._bufferService.buffer;a.y===a.scrollTop?(a.lines.shiftElements(a.ybase+a.y,a.scrollBottom-a.scrollTop,1),a.lines.set(a.ybase+a.y,a.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(a.scrollTop,a.scrollBottom)):
(a.y--,this._restrictCursor());return!0},b.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},b.prototype.reset=function(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone();this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()},b.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},b.prototype.setgLevel=function(a){return this._charsetService.setgLevel(a),
!0},b.prototype.screenAlignmentPattern=function(){var a=new w.CellData;a.content=4194373;a.fg=this._curAttrData.fg;a.bg=this._curAttrData.bg;var b=this._bufferService.buffer;this._setCursor(0,0);for(var c=0;c<this._bufferService.rows;++c){var e=b.lines.get(b.ybase+b.y+c);e&&(e.fill(a),e.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},b}(b.Disposable);a.InputHandler=f},844:function(b,a){function f(a){for(var b=0;b<a.length;b++)a[b].dispose();a.length=0}Object.defineProperty(a,
"__esModule",{value:!0});a.getDisposeArrayDisposable=a.disposeArray=a.Disposable=void 0;b=function(){function a(){this._disposables=[];this._isDisposed=!1}return a.prototype.dispose=function(){this._isDisposed=!0;for(var a=0,b=this._disposables;a<b.length;a++)b[a].dispose();this._disposables.length=0},a.prototype.register=function(a){return this._disposables.push(a),a},a.prototype.unregister=function(a){a=this._disposables.indexOf(a);-1!==a&&this._disposables.splice(a,1)},a}();a.Disposable=b;a.disposeArray=
f;a.getDisposeArrayDisposable=function(a){return{dispose:function(){return f(a)}}}},6114:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.isSafari=a.isFirefox=void 0;var f="undefined"==typeof navigator;b=f?"node":navigator.userAgent;f=f?"node":navigator.platform;a.isFirefox=b.includes("Firefox");a.isSafari=/^((?!chrome|android).)*safari/i.test(b);a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f);a.isIpad="iPad"===f;a.isIphone=
"iPhone"===f;a.isWindows=["Windows","Win16","Win32","WinCE"].includes(f);a.isLinux=0<=f.indexOf("Linux")},8273:function(b,a){function f(a,b,f,h){if(void 0===f&&(f=0),void 0===h&&(h=a.length),f>=a.length)return a;f=(a.length+f)%a.length;for(h=h>=a.length?a.length:(a.length+h)%a.length;f<h;++f)a[f]=b;return a}Object.defineProperty(a,"__esModule",{value:!0});a.concat=a.fillFallback=a.fill=void 0;a.fill=function(a,b,h,k){return a.fill?a.fill(b,h,k):f(a,b,h,k)};a.fillFallback=f;a.concat=function(a,b){var d=
new a.constructor(a.length+b.length);return d.set(a),d.set(b,a.length),d}},9282:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.updateWindowsModeWrappedState=void 0;var d=f(643);a.updateWindowsModeWrappedState=function(a){var b=a.buffer.lines.get(a.buffer.ybase+a.buffer.y-1);b=null==b?void 0:b.get(a.cols-1);(a=a.buffer.lines.get(a.buffer.ybase+a.buffer.y))&&b&&(a.isWrapped=b[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&b[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:function(b,
a){Object.defineProperty(a,"__esModule",{value:!0});a.ExtendedAttrs=a.AttributeData=void 0;b=function(){function a(){this.bg=this.fg=0;this.extended=new f}return a.toColorRGB=function(a){return[a>>>16&255,a>>>8&255,255&a]},a.fromColorRGB=function(a){return(255&a[0])<<16|(255&a[1])<<8|255&a[2]},a.prototype.clone=function(){var b=new a;return b.fg=this.fg,b.bg=this.bg,b.extended=this.extended.clone(),b},a.prototype.isInverse=function(){return 67108864&this.fg},a.prototype.isBold=function(){return 134217728&
this.fg},a.prototype.isUnderline=function(){return 268435456&this.fg},a.prototype.isBlink=function(){return 536870912&this.fg},a.prototype.isInvisible=function(){return 1073741824&this.fg},a.prototype.isItalic=function(){return 67108864&this.bg},a.prototype.isDim=function(){return 134217728&this.bg},a.prototype.getFgColorMode=function(){return 50331648&this.fg},a.prototype.getBgColorMode=function(){return 50331648&this.bg},a.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},a.prototype.isBgRGB=
function(){return 50331648==(50331648&this.bg)},a.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},a.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},a.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},a.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},a.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},a.prototype.getFgColor=function(){switch(50331648&
this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},a.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},a.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},a.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},a.prototype.getUnderlineColor=function(){if(268435456&this.bg&&
~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor}return this.getFgColor()},a.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},a.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&
this.extended.underlineColor):this.isFgRGB()},a.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},a.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()},a.prototype.getUnderlineStyle=function(){return 268435456&this.fg?
268435456&this.bg?this.extended.underlineStyle:1:0},a}();a.AttributeData=b;var f=function(){function a(a,b){void 0===a&&(a=0);void 0===b&&(b=-1);this.underlineStyle=a;this.underlineColor=b}return a.prototype.clone=function(){return new a(this.underlineStyle,this.underlineColor)},a.prototype.isEmpty=function(){return 0===this.underlineStyle},a}();a.ExtendedAttrs=f},9092:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.BufferStringIterator=a.Buffer=a.MAX_BUFFER_SIZE=void 0;var d=f(6349),
h=f(8437),k=f(511),q=f(643),t=f(4634),g=f(4863),l=f(7116),n=f(3734);a.MAX_BUFFER_SIZE=4294967295;b=function(){function b(a,b,c){this._hasScrollback=a;this._optionsService=b;this._bufferService=c;this.savedX=this.savedY=this.x=this.y=this.ybase=this.ydisp=0;this.savedCurAttrData=h.DEFAULT_ATTR_DATA.clone();this.savedCharset=l.DEFAULT_CHARSET;this.markers=[];this._nullCell=k.CellData.fromCharData([0,q.NULL_CELL_CHAR,q.NULL_CELL_WIDTH,q.NULL_CELL_CODE]);this._whitespaceCell=k.CellData.fromCharData([0,
q.WHITESPACE_CELL_CHAR,q.WHITESPACE_CELL_WIDTH,q.WHITESPACE_CELL_CODE]);this._cols=this._bufferService.cols;this._rows=this._bufferService.rows;this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows));this.scrollTop=0;this.scrollBottom=this._rows-1;this.setupTabStops()}return b.prototype.getNullCell=function(a){return a?(this._nullCell.fg=a.fg,this._nullCell.bg=a.bg,this._nullCell.extended=a.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new n.ExtendedAttrs),
this._nullCell},b.prototype.getWhitespaceCell=function(a){return a?(this._whitespaceCell.fg=a.fg,this._whitespaceCell.bg=a.bg,this._whitespaceCell.extended=a.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new n.ExtendedAttrs),this._whitespaceCell},b.prototype.getBlankLine=function(a,b){return new h.BufferLine(this._bufferService.cols,this.getNullCell(a),b)},Object.defineProperty(b.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>
this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"isCursorInViewport",{get:function(){var a=this.ybase+this.y-this.ydisp;return 0<=a&&a<this._rows},enumerable:!1,configurable:!0}),b.prototype._getCorrectBufferLength=function(b){if(!this._hasScrollback)return b;b+=this._optionsService.options.scrollback;return b>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:b},b.prototype.fillViewportRows=function(a){if(0===this.lines.length){void 0===a&&(a=h.DEFAULT_ATTR_DATA);for(var b=this._rows;b--;)this.lines.push(this.getBlankLine(a))}},
b.prototype.clear=function(){this.x=this.y=this.ybase=this.ydisp=0;this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows));this.scrollTop=0;this.scrollBottom=this._rows-1;this.setupTabStops()},b.prototype.resize=function(a,b){var c=this.getNullCell(h.DEFAULT_ATTR_DATA),e=this._getCorrectBufferLength(b);if(e>this.lines.maxLength&&(this.lines.maxLength=e),0<this.lines.length){if(this._cols<a)for(var d=0;d<this.lines.length;d++)this.lines.get(d).resize(a,c);d=0;if(this._rows<b)for(var g=
this._rows;g<b;g++)this.lines.length<b+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new h.BufferLine(a,c)):0<this.ybase&&this.lines.length<=this.ybase+this.y+d+1?(this.ybase--,d++,0<this.ydisp&&this.ydisp--):this.lines.push(new h.BufferLine(a,c)));else for(g=this._rows;g>b;g--)this.lines.length>b+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));e<this.lines.maxLength&&(g=this.lines.length-e,0<g&&(this.lines.trimStart(g),this.ybase=
Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=e);this.x=Math.min(this.x,a-1);this.y=Math.min(this.y,b-1);d&&(this.y+=d);this.savedX=Math.min(this.savedX,a-1);this.scrollTop=0}if(this.scrollBottom=b-1,this._isReflowEnabled&&(this._reflow(a,b),this._cols>a))for(d=0;d<this.lines.length;d++)this.lines.get(d).resize(a,c);this._cols=a;this._rows=b},Object.defineProperty(b.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&
!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),b.prototype._reflow=function(a,b){this._cols!==a&&(a>this._cols?this._reflowLarger(a,b):this._reflowSmaller(a,b))},b.prototype._reflowLarger=function(a,b){var c=t.reflowLargerGetLinesToRemove(this.lines,this._cols,a,this.ybase+this.y,this.getNullCell(h.DEFAULT_ATTR_DATA));0<c.length&&(c=t.reflowLargerCreateNewLayout(this.lines,c),t.reflowLargerApplyNewLayout(this.lines,c.layout),this._reflowLargerAdjustViewport(a,b,c.countRemoved))},
b.prototype._reflowLargerAdjustViewport=function(a,b,c){for(var e=this.getNullCell(h.DEFAULT_ATTR_DATA),d=c;0<d--;)0===this.ybase?(0<this.y&&this.y--,this.lines.length<b&&this.lines.push(new h.BufferLine(a,e))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-c,0)},b.prototype._reflowSmaller=function(a,b){for(var c=this.getNullCell(h.DEFAULT_ATTR_DATA),e=[],d=0,g=this.lines.length-1;0<=g;g--){var f=this.lines.get(g);if(!(!f||!f.isWrapped&&f.getTrimmedLength()<=
a)){for(var l=[f];f.isWrapped&&0<g;)f=this.lines.get(--g),l.unshift(f);f=this.ybase+this.y;if(!(f>=g&&f<g+l.length)){var k=l[l.length-1].getTrimmedLength(),m=t.reflowSmallerGetNewLineLengths(l,this._cols,a),n=m.length-l.length;var q=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+n):Math.max(0,this.lines.length-this.lines.maxLength+n);var r=[];for(f=0;f<n;f++){var u=this.getBlankLine(h.DEFAULT_ATTR_DATA,!0);r.push(u)}0<r.length&&(e.push({start:g+l.length+d,newLines:r}),
d+=r.length);l.push.apply(l,r);f=m.length-1;r=m[f];0===r&&(r=m[--f]);for(u=l.length-n-1;0<=u;){var v=Math.min(k,r);if(l[f].copyCellsFrom(l[u],k-v,r-v,v,!0),0==(r-=v)&&(r=m[--f]),0==(k-=v))u--,k=t.getWrappedLineTrimmedLength(l,Math.max(u,0),this._cols)}for(f=0;f<l.length;f++)m[f]<a&&l[f].setCell(m[f],c);for(f=n-q;0<f--;)0===this.ybase?this.y<b-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+d)-b&&(this.ybase===this.ydisp&&this.ydisp++,
this.ybase++);this.savedY=Math.min(this.savedY+n,this.ybase+b-1)}}}if(0<e.length){a=[];c=[];for(f=0;f<this.lines.length;f++)c.push(this.lines.get(f));b=this.lines.length;g=b-1;l=0;n=e[l];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+d);q=0;for(f=Math.min(this.lines.maxLength-1,b+d-1);0<=f;f--)if(n&&n.start>g+q){for(m=n.newLines.length-1;0<=m;m--)this.lines.set(f--,n.newLines[m]);f++;a.push({index:g+1,amount:n.newLines.length});q+=n.newLines.length;n=e[++l]}else this.lines.set(f,
c[g--]);e=0;for(f=a.length-1;0<=f;f--)a[f].index+=e,this.lines.onInsertEmitter.fire(a[f]),e+=a[f].amount;d=Math.max(0,b+d-this.lines.maxLength);0<d&&this.lines.onTrimEmitter.fire(d)}},b.prototype.stringIndexToBufferIndex=function(a,b,c){for(void 0===c&&(c=!1);b;){var e=this.lines.get(a);if(!e)return[-1,-1];for(var d=c?e.getTrimmedLength():e.length,g=0;g<d;++g)if(e.get(g)[q.CHAR_DATA_WIDTH_INDEX]&&(b-=e.get(g)[q.CHAR_DATA_CHAR_INDEX].length||1),0>b)return[a,g];a++}return[a,0]},b.prototype.translateBufferLineToString=
function(a,b,c,d){void 0===c&&(c=0);return(a=this.lines.get(a))?a.translateToString(b,c,d):""},b.prototype.getWrappedRangeForLine=function(a){for(var b=a;0<b&&this.lines.get(b).isWrapped;)b--;for(;a+1<this.lines.length&&this.lines.get(a+1).isWrapped;)a++;return{first:b,last:a}},b.prototype.setupTabStops=function(a){for(null!=a?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);a<this._cols;a+=this._optionsService.options.tabStopWidth)this.tabs[a]=!0},b.prototype.prevStop=function(a){for(null==
a&&(a=this.x);!this.tabs[--a]&&0<a;);return a>=this._cols?this._cols-1:0>a?0:a},b.prototype.nextStop=function(a){for(null==a&&(a=this.x);!this.tabs[++a]&&a<this._cols;);return a>=this._cols?this._cols-1:0>a?0:a},b.prototype.addMarker=function(a){var b=this,c=new g.Marker(a);return this.markers.push(c),c.register(this.lines.onTrim(function(a){c.line-=a;0>c.line&&c.dispose()})),c.register(this.lines.onInsert(function(a){c.line>=a.index&&(c.line+=a.amount)})),c.register(this.lines.onDelete(function(a){c.line>=
a.index&&c.line<a.index+a.amount&&c.dispose();c.line>a.index&&(c.line-=a.amount)})),c.register(c.onDispose(function(){return b._removeMarker(c)})),c},b.prototype._removeMarker=function(a){this.markers.splice(this.markers.indexOf(a),1)},b.prototype.iterator=function(a,b,c,d,g){return new m(this,a,b,c,d,g)},b}();a.Buffer=b;var m=function(){function a(a,b,c,d,g,f){void 0===c&&(c=0);void 0===d&&(d=a.lines.length);void 0===g&&(g=0);void 0===f&&(f=0);this._buffer=a;this._trimRight=b;this._startIndex=c;
this._endIndex=d;this._startOverscan=g;this._endOverscan=f;0>this._startIndex&&(this._startIndex=0);this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length);this._current=this._startIndex}return a.prototype.hasNext=function(){return this._current<this._endIndex},a.prototype.next=function(){var a=this._buffer.getWrappedRangeForLine(this._current);a.first<this._startIndex-this._startOverscan&&(a.first=this._startIndex-this._startOverscan);a.last>this._endIndex+this._endOverscan&&
(a.last=this._endIndex+this._endOverscan);a.first=Math.max(a.first,0);a.last=Math.min(a.last,this._buffer.lines.length);for(var b="",c=a.first;c<=a.last;++c)b+=this._buffer.translateBufferLineToString(c,this._trimRight);return this._current=a.last+1,{range:a,content:b}},a}();a.BufferStringIterator=m},8437:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;var d=f(482),h=f(643),k=f(511),q=f(3734);a.DEFAULT_ATTR_DATA=Object.freeze(new q.AttributeData);
b=function(){function a(a,b,d){void 0===d&&(d=!1);this.isWrapped=d;this._combined={};this._extendedAttrs={};this._data=new Uint32Array(3*a);b=b||k.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(d=0;d<a;++d)this.setCell(d,b);this.length=a}return a.prototype.get=function(a){var b=this._data[3*a],g=2097151&b;return[this._data[3*a+1],2097152&b?this._combined[a]:g?d.stringFromCodePoint(g):"",b>>22,2097152&b?this._combined[a].charCodeAt(this._combined[a].length-1):g]},
a.prototype.set=function(a,b){this._data[3*a+1]=b[h.CHAR_DATA_ATTR_INDEX];1<b[h.CHAR_DATA_CHAR_INDEX].length?(this._combined[a]=b[1],this._data[3*a]=2097152|a|b[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*a]=b[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[h.CHAR_DATA_WIDTH_INDEX]<<22},a.prototype.getWidth=function(a){return this._data[3*a]>>22},a.prototype.hasWidth=function(a){return 12582912&this._data[3*a]},a.prototype.getFg=function(a){return this._data[3*a+1]},a.prototype.getBg=function(a){return this._data[3*
a+2]},a.prototype.hasContent=function(a){return 4194303&this._data[3*a]},a.prototype.getCodePoint=function(a){var b=this._data[3*a];return 2097152&b?this._combined[a].charCodeAt(this._combined[a].length-1):2097151&b},a.prototype.isCombined=function(a){return 2097152&this._data[3*a]},a.prototype.getString=function(a){var b=this._data[3*a];return 2097152&b?this._combined[a]:2097151&b?d.stringFromCodePoint(2097151&b):""},a.prototype.loadCell=function(a,b){var d=3*a;return b.content=this._data[d+0],b.fg=
this._data[d+1],b.bg=this._data[d+2],2097152&b.content&&(b.combinedData=this._combined[a]),268435456&b.bg&&(b.extended=this._extendedAttrs[a]),b},a.prototype.setCell=function(a,b){2097152&b.content&&(this._combined[a]=b.combinedData);268435456&b.bg&&(this._extendedAttrs[a]=b.extended);this._data[3*a]=b.content;this._data[3*a+1]=b.fg;this._data[3*a+2]=b.bg},a.prototype.setCellFromCodePoint=function(a,b,d,f,c,e){268435456&c&&(this._extendedAttrs[a]=e);this._data[3*a]=b|d<<22;this._data[3*a+1]=f;this._data[3*
a+2]=c},a.prototype.addCodepointToCell=function(a,b){var g=this._data[3*a];2097152&g?this._combined[a]+=d.stringFromCodePoint(b):(2097151&g?(this._combined[a]=d.stringFromCodePoint(2097151&g)+d.stringFromCodePoint(b),g&=-2097152,g|=2097152):g=b|4194304,this._data[3*a]=g)},a.prototype.insertCells=function(a,b,d,f){if((a%=this.length)&&2===this.getWidth(a-1)&&this.setCellFromCodePoint(a-1,0,1,(null==f?void 0:f.fg)||0,(null==f?void 0:f.bg)||0,(null==f?void 0:f.extended)||new q.ExtendedAttrs),b<this.length-
a){for(var c=new k.CellData,e=this.length-a-b-1;0<=e;--e)this.setCell(a+b+e,this.loadCell(a+e,c));for(e=0;e<b;++e)this.setCell(a+e,d)}else for(e=a;e<this.length;++e)this.setCell(e,d);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==f?void 0:f.fg)||0,(null==f?void 0:f.bg)||0,(null==f?void 0:f.extended)||new q.ExtendedAttrs)},a.prototype.deleteCells=function(a,b,d,f){if(a%=this.length,b<this.length-a){for(var c=new k.CellData,e=0;e<this.length-a-b;++e)this.setCell(a+
e,this.loadCell(a+b+e,c));e=this.length-b}else e=a;for(;e<this.length;++e)this.setCell(e,d);a&&2===this.getWidth(a-1)&&this.setCellFromCodePoint(a-1,0,1,(null==f?void 0:f.fg)||0,(null==f?void 0:f.bg)||0,(null==f?void 0:f.extended)||new q.ExtendedAttrs);0!==this.getWidth(a)||this.hasContent(a)||this.setCellFromCodePoint(a,0,1,(null==f?void 0:f.fg)||0,(null==f?void 0:f.bg)||0,(null==f?void 0:f.extended)||new q.ExtendedAttrs)},a.prototype.replaceCells=function(a,b,d,f){a&&2===this.getWidth(a-1)&&this.setCellFromCodePoint(a-
1,0,1,(null==f?void 0:f.fg)||0,(null==f?void 0:f.bg)||0,(null==f?void 0:f.extended)||new q.ExtendedAttrs);for(b<this.length&&2===this.getWidth(b-1)&&this.setCellFromCodePoint(b,0,1,(null==f?void 0:f.fg)||0,(null==f?void 0:f.bg)||0,(null==f?void 0:f.extended)||new q.ExtendedAttrs);a<b&&a<this.length;)this.setCell(a++,d)},a.prototype.resize=function(a,b){if(a!==this.length){if(a>this.length){var d=new Uint32Array(3*a);this.length&&(3*a<this._data.length?d.set(this._data.subarray(0,3*a)):d.set(this._data));
this._data=d;for(d=this.length;d<a;++d)this.setCell(d,b)}else if(a)for((d=new Uint32Array(3*a)).set(this._data.subarray(0,3*a)),this._data=d,b=Object.keys(this._combined),d=0;d<b.length;d++){var g=parseInt(b[d],10);g>=a&&delete this._combined[g]}else this._data=new Uint32Array(0),this._combined={};this.length=a}},a.prototype.fill=function(a){this._combined={};this._extendedAttrs={};for(var b=0;b<this.length;++b)this.setCell(b,a)},a.prototype.copyFrom=function(a){for(var b in this.length!==a.length?
this._data=new Uint32Array(a._data):this._data.set(a._data),this.length=a.length,this._combined={},a._combined)this._combined[b]=a._combined[b];for(b in this._extendedAttrs={},a._extendedAttrs)this._extendedAttrs[b]=a._extendedAttrs[b];this.isWrapped=a.isWrapped},a.prototype.clone=function(){var b=new a(0),d;for(d in b._data=new Uint32Array(this._data),b.length=this.length,this._combined)b._combined[d]=this._combined[d];for(d in this._extendedAttrs)b._extendedAttrs[d]=this._extendedAttrs[d];return b.isWrapped=
this.isWrapped,b},a.prototype.getTrimmedLength=function(){for(var a=this.length-1;0<=a;--a)if(4194303&this._data[3*a])return a+(this._data[3*a]>>22);return 0},a.prototype.copyCellsFrom=function(a,b,d,f,c){var e=a._data;if(c)for(var g=f-1;0<=g;g--)for(c=0;3>c;c++)this._data[3*(d+g)+c]=e[3*(b+g)+c];else for(g=0;g<f;g++)for(c=0;3>c;c++)this._data[3*(d+g)+c]=e[3*(b+g)+c];f=Object.keys(a._combined);for(c=0;c<f.length;c++)e=parseInt(f[c],10),e>=b&&(this._combined[e-b+d]=a._combined[e])},a.prototype.translateToString=
function(a,b,f){void 0===a&&(a=!1);void 0===b&&(b=0);void 0===f&&(f=this.length);a&&(f=Math.min(f,this.getTrimmedLength()));for(a="";b<f;){var g=this._data[3*b],c=2097151&g;a+=2097152&g?this._combined[b]:c?d.stringFromCodePoint(c):h.WHITESPACE_CELL_CHAR;b+=g>>22||1}return a},a}();a.BufferLine=b},4634:function(b,a){function f(a,b,f){if(b===a.length-1)return a[b].getTrimmedLength();var d=!a[b].hasContent(f-1)&&1===a[b].getWidth(f-1);a=2===a[b+1].getWidth(0);return d&&a?f-1:f}Object.defineProperty(a,
"__esModule",{value:!0});a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0;a.reflowLargerGetLinesToRemove=function(a,b,h,k,t){for(var d=[],l=0;l<a.length-1;l++){var n=l,m=a.get(++n);if(m.isWrapped){for(var c=[a.get(l)];n<a.length&&m.isWrapped;)c.push(m),m=a.get(++n);if(!(k>=l&&k<n)){n=0;m=f(c,n,b);for(var e=1,q=0;e<c.length;){var r=f(c,e,b),u=Math.min(r-q,h-m);c[n].copyCellsFrom(c[e],q,m,
u,!1);(m+=u)===h&&(n++,m=0);(q+=u)===r&&(e++,q=0);0===m&&0!==n&&2===c[n-1].getWidth(h-1)&&(c[n].copyCellsFrom(c[n-1],h-1,m++,1,!1),c[n-1].setCell(h-1,t))}c[n].replaceCells(m,h,t);m=0;for(e=c.length-1;0<e&&(e>n||0===c[e].getTrimmedLength());e--)m++;0<m&&(d.push(l+c.length-m),d.push(m))}l+=c.length-1}}return d};a.reflowLargerCreateNewLayout=function(a,b){for(var d=[],f=0,h=b[f],g=0,l=0;l<a.length;l++)h===l?(h=b[++f],a.onDeleteEmitter.fire({index:l-g,amount:h}),l+=h-1,g+=h,h=b[++f]):d.push(l);return{layout:d,
countRemoved:g}};a.reflowLargerApplyNewLayout=function(a,b){for(var d=[],f=0;f<b.length;f++)d.push(a.get(b[f]));for(f=0;f<d.length;f++)a.set(f,d[f]);a.length=b.length};a.reflowSmallerGetNewLineLengths=function(a,b,h){for(var d=[],k=a.map(function(c,d){return f(a,d,b)}).reduce(function(a,b){return a+b}),g=0,l=0,n=0;n<k;){if(k-n<h){d.push(k-n);break}g+=h;var m=f(a,l,b);g>m&&(g-=m,l++);(m=2===a[l].getWidth(g-1))&&g--;m=m?h-1:h;d.push(m);n+=m}return d};a.getWrappedLineTrimmedLength=f},5295:function(b,
a,f){var d,h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d])})(a,b)},function(a,b){function f(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)});Object.defineProperty(a,"__esModule",{value:!0});a.BufferSet=void 0;var k=f(9092),q=f(8460);b=function(a){function b(b,d){var f=a.call(this)||
this;return f._optionsService=b,f._bufferService=d,f._onBufferActivate=f.register(new q.EventEmitter),f.reset(),f}return h(b,a),Object.defineProperty(b.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),b.prototype.reset=function(){this._normal=new k.Buffer(!0,this._optionsService,this._bufferService);this._normal.fillViewportRows();this._alt=new k.Buffer(!1,this._optionsService,this._bufferService);this._activeBuffer=this._normal;this.setupTabStops()},
Object.defineProperty(b.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),b.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=
this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},b.prototype.activateAltBuffer=function(a){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(a),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},b.prototype.resize=function(a,b){this._normal.resize(a,b);this._alt.resize(a,b)},b.prototype.setupTabStops=function(a){this._normal.setupTabStops(a);
this._alt.setupTabStops(a)},b}(f(844).Disposable);a.BufferSet=b},511:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},function(a,b){function f(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)});Object.defineProperty(a,"__esModule",{value:!0});a.CellData=
void 0;var k=f(482),q=f(643),t=f(3734);b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.content=0,b.fg=0,b.bg=0,b.extended=new t.ExtendedAttrs,b.combinedData="",b}return h(b,a),b.fromCharData=function(a){var d=new b;return d.setFromCharData(a),d},b.prototype.isCombined=function(){return 2097152&this.content},b.prototype.getWidth=function(){return this.content>>22},b.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?k.stringFromCodePoint(2097151&
this.content):""},b.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},b.prototype.setFromCharData=function(a){this.fg=a[q.CHAR_DATA_ATTR_INDEX];this.bg=0;var b=!1;if(2<a[q.CHAR_DATA_CHAR_INDEX].length)b=!0;else if(2===a[q.CHAR_DATA_CHAR_INDEX].length){var c=a[q.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&56319>=c){var d=a[q.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&57343>=d?this.content=1024*(c-55296)+d-56320+
65536|a[q.CHAR_DATA_WIDTH_INDEX]<<22:b=!0}else b=!0}else this.content=a[q.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[q.CHAR_DATA_WIDTH_INDEX]<<22;b&&(this.combinedData=a[q.CHAR_DATA_CHAR_INDEX],this.content=2097152|a[q.CHAR_DATA_WIDTH_INDEX]<<22)},b.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},b}(t.AttributeData);a.CellData=b},643:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=
a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0;a.DEFAULT_COLOR=256;a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9;a.CHAR_DATA_ATTR_INDEX=0;a.CHAR_DATA_CHAR_INDEX=1;a.CHAR_DATA_WIDTH_INDEX=2;a.CHAR_DATA_CODE_INDEX=3;a.NULL_CELL_CHAR="";a.NULL_CELL_WIDTH=1;a.NULL_CELL_CODE=0;a.WHITESPACE_CELL_CHAR=" ";a.WHITESPACE_CELL_WIDTH=1;a.WHITESPACE_CELL_CODE=32},4863:function(b,a,f){var d,
h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d])})(a,b)},function(a,b){function f(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)});Object.defineProperty(a,"__esModule",{value:!0});a.Marker=void 0;var k=f(8460);b=function(a){function b(d){var f=a.call(this)||this;return f.line=d,f._id=
b._nextId++,f.isDisposed=!1,f._onDispose=new k.EventEmitter,f}return h(b,a),Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),b.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),a.prototype.dispose.call(this))},b._nextId=1,b}(f(844).Disposable);a.Marker=b},7116:function(b,
a){Object.defineProperty(a,"__esModule",{value:!0});a.DEFAULT_CHARSET=a.CHARSETS=void 0;a.CHARSETS={};a.DEFAULT_CHARSET=a.CHARSETS.B;a.CHARSETS[0]={"`":"\u25c6",a:"\u2592",b:"\u2409",c:"\u240c",d:"\u240d",e:"\u240a",f:"\u00b0",g:"\u00b1",h:"\u2424",i:"\u240b",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\u00a3","~":"\u00b7"};a.CHARSETS.A=
{"#":"\u00a3"};a.CHARSETS.B=void 0;a.CHARSETS[4]={"#":"\u00a3","@":"\u00be","[":"ij","\\":"\u00bd","]":"|","{":"\u00a8","|":"f","}":"\u00bc","~":"\u00b4"};a.CHARSETS.C=a.CHARSETS[5]={"[":"\u00c4","\\":"\u00d6","]":"\u00c5","^":"\u00dc","`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};a.CHARSETS.R={"#":"\u00a3","@":"\u00e0","[":"\u00b0","\\":"\u00e7","]":"\u00a7","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00a8"};a.CHARSETS.Q={"@":"\u00e0","[":"\u00e2","\\":"\u00e7","]":"\u00ea",
"^":"\u00ee","`":"\u00f4","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00fb"};a.CHARSETS.K={"@":"\u00a7","[":"\u00c4","\\":"\u00d6","]":"\u00dc","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00df"};a.CHARSETS.Y={"#":"\u00a3","@":"\u00a7","[":"\u00b0","\\":"\u00e7","]":"\u00e9","`":"\u00f9","{":"\u00e0","|":"\u00f2","}":"\u00e8","~":"\u00ec"};a.CHARSETS.E=a.CHARSETS[6]={"@":"\u00c4","[":"\u00c6","\\":"\u00d8","]":"\u00c5","^":"\u00dc","`":"\u00e4","{":"\u00e6","|":"\u00f8","}":"\u00e5","~":"\u00fc"};
a.CHARSETS.Z={"#":"\u00a3","@":"\u00a7","[":"\u00a1","\\":"\u00d1","]":"\u00bf","{":"\u00b0","|":"\u00f1","}":"\u00e7"};a.CHARSETS.H=a.CHARSETS[7]={"@":"\u00c9","[":"\u00c4","\\":"\u00d6","]":"\u00c5","^":"\u00dc","`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};a.CHARSETS["="]={"#":"\u00f9","@":"\u00e0","[":"\u00e9","\\":"\u00e7","]":"\u00ea","^":"\u00ee",_:"\u00e8","`":"\u00f4","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00fb"}},2584:function(b,a){Object.defineProperty(a,"__esModule",
{value:!0});a.C1=a.C0=void 0;(b=a.C0||(a.C0={})).NUL="\x00";b.SOH="\u0001";b.STX="\u0002";b.ETX="\u0003";b.EOT="\u0004";b.ENQ="\u0005";b.ACK="\u0006";b.BEL="\u0007";b.BS="\b";b.HT="\t";b.LF="\n";b.VT="\v";b.FF="\f";b.CR="\r";b.SO="\u000e";b.SI="\u000f";b.DLE="\u0010";b.DC1="\u0011";b.DC2="\u0012";b.DC3="\u0013";b.DC4="\u0014";b.NAK="\u0015";b.SYN="\u0016";b.ETB="\u0017";b.CAN="\u0018";b.EM="\u0019";b.SUB="\u001a";b.ESC="\u001b";b.FS="\u001c";b.GS="\u001d";b.RS="\u001e";b.US="\u001f";b.SP=" ";b.DEL=
"\u007f";(a=a.C1||(a.C1={})).PAD="\u0080";a.HOP="\u0081";a.BPH="\u0082";a.NBH="\u0083";a.IND="\u0084";a.NEL="\u0085";a.SSA="\u0086";a.ESA="\u0087";a.HTS="\u0088";a.HTJ="\u0089";a.VTS="\u008a";a.PLD="\u008b";a.PLU="\u008c";a.RI="\u008d";a.SS2="\u008e";a.SS3="\u008f";a.DCS="\u0090";a.PU1="\u0091";a.PU2="\u0092";a.STS="\u0093";a.CCH="\u0094";a.MW="\u0095";a.SPA="\u0096";a.EPA="\u0097";a.SOS="\u0098";a.SGCI="\u0099";a.SCI="\u009a";a.CSI="\u009b";a.ST="\u009c";a.OSC="\u009d";a.PM="\u009e";a.APC="\u009f"},
7399:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.evaluateKeyboardEvent=void 0;var d=f(2584),k={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(a,b,f,g){var l={type:0,cancel:!1,key:void 0},h=(a.shiftKey?1:0)|
(a.altKey?2:0)|(a.ctrlKey?4:0)|(a.metaKey?8:0);switch(a.keyCode){case 0:"UIKeyInputUpArrow"===a.key?l.key=b?d.C0.ESC+"OA":d.C0.ESC+"[A":"UIKeyInputLeftArrow"===a.key?l.key=b?d.C0.ESC+"OD":d.C0.ESC+"[D":"UIKeyInputRightArrow"===a.key?l.key=b?d.C0.ESC+"OC":d.C0.ESC+"[C":"UIKeyInputDownArrow"===a.key&&(l.key=b?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:if(a.shiftKey){l.key=d.C0.BS;break}if(a.altKey){l.key=d.C0.ESC+d.C0.DEL;break}l.key=d.C0.DEL;break;case 9:if(a.shiftKey){l.key=d.C0.ESC+"[Z";break}l.key=
d.C0.HT;l.cancel=!0;break;case 13:l.key=a.altKey?d.C0.ESC+d.C0.CR:d.C0.CR;l.cancel=!0;break;case 27:l.key=d.C0.ESC;a.altKey&&(l.key=d.C0.ESC+d.C0.ESC);l.cancel=!0;break;case 37:if(a.metaKey)break;h?(l.key=d.C0.ESC+"[1;"+(h+1)+"D",l.key===d.C0.ESC+"[1;3D"&&(l.key=d.C0.ESC+(f?"b":"[1;5D"))):l.key=b?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(a.metaKey)break;h?(l.key=d.C0.ESC+"[1;"+(h+1)+"C",l.key===d.C0.ESC+"[1;3C"&&(l.key=d.C0.ESC+(f?"f":"[1;5C"))):l.key=b?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(a.metaKey)break;
h?(l.key=d.C0.ESC+"[1;"+(h+1)+"A",f||l.key!==d.C0.ESC+"[1;3A"||(l.key=d.C0.ESC+"[1;5A")):l.key=b?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(a.metaKey)break;h?(l.key=d.C0.ESC+"[1;"+(h+1)+"B",f||l.key!==d.C0.ESC+"[1;3B"||(l.key=d.C0.ESC+"[1;5B")):l.key=b?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:a.shiftKey||a.ctrlKey||(l.key=d.C0.ESC+"[2~");break;case 46:l.key=h?d.C0.ESC+"[3;"+(h+1)+"~":d.C0.ESC+"[3~";break;case 36:l.key=h?d.C0.ESC+"[1;"+(h+1)+"H":b?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:l.key=
h?d.C0.ESC+"[1;"+(h+1)+"F":b?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:a.shiftKey?l.type=2:l.key=d.C0.ESC+"[5~";break;case 34:a.shiftKey?l.type=3:l.key=d.C0.ESC+"[6~";break;case 112:l.key=h?d.C0.ESC+"[1;"+(h+1)+"P":d.C0.ESC+"OP";break;case 113:l.key=h?d.C0.ESC+"[1;"+(h+1)+"Q":d.C0.ESC+"OQ";break;case 114:l.key=h?d.C0.ESC+"[1;"+(h+1)+"R":d.C0.ESC+"OR";break;case 115:l.key=h?d.C0.ESC+"[1;"+(h+1)+"S":d.C0.ESC+"OS";break;case 116:l.key=h?d.C0.ESC+"[15;"+(h+1)+"~":d.C0.ESC+"[15~";break;case 117:l.key=
h?d.C0.ESC+"[17;"+(h+1)+"~":d.C0.ESC+"[17~";break;case 118:l.key=h?d.C0.ESC+"[18;"+(h+1)+"~":d.C0.ESC+"[18~";break;case 119:l.key=h?d.C0.ESC+"[19;"+(h+1)+"~":d.C0.ESC+"[19~";break;case 120:l.key=h?d.C0.ESC+"[20;"+(h+1)+"~":d.C0.ESC+"[20~";break;case 121:l.key=h?d.C0.ESC+"[21;"+(h+1)+"~":d.C0.ESC+"[21~";break;case 122:l.key=h?d.C0.ESC+"[23;"+(h+1)+"~":d.C0.ESC+"[23~";break;case 123:l.key=h?d.C0.ESC+"[24;"+(h+1)+"~":d.C0.ESC+"[24~";break;default:!a.ctrlKey||a.shiftKey||a.altKey||a.metaKey?f&&!g||!a.altKey||
a.metaKey?!f||a.altKey||a.ctrlKey||a.shiftKey||!a.metaKey?a.key&&!a.ctrlKey&&!a.altKey&&!a.metaKey&&48<=a.keyCode&&1===a.key.length?l.key=a.key:a.key&&a.ctrlKey&&"_"===a.key&&(l.key=d.C0.US):65===a.keyCode&&(l.type=1):(b=(b=k[a.keyCode])&&b[a.shiftKey?1:0])?l.key=d.C0.ESC+b:65<=a.keyCode&&90>=a.keyCode&&(l.key=d.C0.ESC+String.fromCharCode(a.ctrlKey?a.keyCode-64:a.keyCode+32)):65<=a.keyCode&&90>=a.keyCode?l.key=String.fromCharCode(a.keyCode-64):32===a.keyCode?l.key=d.C0.NUL:51<=a.keyCode&&55>=a.keyCode?
l.key=String.fromCharCode(a.keyCode-51+27):56===a.keyCode?l.key=d.C0.DEL:219===a.keyCode?l.key=d.C0.ESC:220===a.keyCode?l.key=d.C0.FS:221===a.keyCode&&(l.key=d.C0.GS)}return l}},482:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0;a.stringFromCodePoint=function(a){return 65535<a?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)};a.utf32ToString=function(a,b,
h){void 0===b&&(b=0);void 0===h&&(h=a.length);for(var d="";b<h;++b){var f=a[b];65535<f?(f-=65536,d+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):d+=String.fromCharCode(f)}return d};b=function(){function a(){this._interim=0}return a.prototype.clear=function(){this._interim=0},a.prototype.decode=function(a,b){var d=a.length;if(!d)return 0;var f=0,h=0;for(this._interim&&(56320<=(l=a.charCodeAt(h++))&&57343>=l?b[f++]=1024*(this._interim-55296)+l-56320+65536:(b[f++]=this._interim,
b[f++]=l),this._interim=0);h<d;++h){var g=a.charCodeAt(h);if(55296<=g&&56319>=g){if(++h>=d)return this._interim=g,f;var l;56320<=(l=a.charCodeAt(h))&&57343>=l?b[f++]=1024*(g-55296)+l-56320+65536:(b[f++]=g,b[f++]=l)}else 65279!==g&&(b[f++]=g)}return f},a}();a.StringToUtf32=b;b=function(){function a(){this.interim=new Uint8Array(3)}return a.prototype.clear=function(){this.interim.fill(0)},a.prototype.decode=function(a,b){var d=a.length;if(!d)return 0;var f,h,g,l,k=0,m=0,c=0;if(this.interim[0]){var e=
!1,r=this.interim[0];r&=192==(224&r)?31:224==(240&r)?15:7;for(var w=0,z;(z=63&this.interim[++w])&&4>w;)r<<=6,r|=z;for(var y=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,x=y-w;c<x;){if(c>=d)return 0;if(128!=(192&(z=a[c++]))){c--;e=!0;break}this.interim[w++]=z;r<<=6;r|=63&z}e||(2===y?128>r?c--:b[k++]=r:3===y?2048>r||55296<=r&&57343>=r||65279===r||(b[k++]=r):65536>r||1114111<r||(b[k++]=r));this.interim.fill(0)}for(e=d-4;c<d;){for(;!(!(c<e)||128&(f=a[c])||128&(h=a[c+1])||128&(g=a[c+2])||
128&(l=a[c+3]));)b[k++]=f,b[k++]=h,b[k++]=g,b[k++]=l,c+=4;if(128>(f=a[c++]))b[k++]=f;else if(192==(224&f)){if(c>=d)return this.interim[0]=f,k;128!=(192&(h=a[c++]))?c--:128>(m=(31&f)<<6|63&h)?c--:b[k++]=m}else if(224==(240&f)){if(c>=d)return this.interim[0]=f,k;if(128!=(192&(h=a[c++])))c--;else{if(c>=d)return this.interim[0]=f,this.interim[1]=h,k;128!=(192&(g=a[c++]))?c--:2048>(m=(15&f)<<12|(63&h)<<6|63&g)||55296<=m&&57343>=m||65279===m||(b[k++]=m)}}else if(240==(248&f)){if(c>=d)return this.interim[0]=
f,k;if(128!=(192&(h=a[c++])))c--;else{if(c>=d)return this.interim[0]=f,this.interim[1]=h,k;if(128!=(192&(g=a[c++])))c--;else{if(c>=d)return this.interim[0]=f,this.interim[1]=h,this.interim[2]=g,k;128!=(192&(l=a[c++]))?c--:65536>(m=(7&f)<<18|(63&h)<<12|(63&g)<<6|63&l)||1114111<m||(b[k++]=m)}}}}return k},a}();a.Utf8ToUtf32=b},225:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.UnicodeV6=void 0;var d,h=f(8273),k=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],
[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],
[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],
[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],q=[[68097,68099],
[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];b=function(){function a(){if(this.version="6",!d){d=new Uint8Array(65536);h.fill(d,1);d[0]=0;h.fill(d,0,1,32);h.fill(d,0,127,160);h.fill(d,2,4352,4448);d[9001]=2;d[9002]=2;h.fill(d,2,11904,42192);d[12351]=1;h.fill(d,2,44032,55204);h.fill(d,2,63744,64256);h.fill(d,2,65040,65050);h.fill(d,2,65072,65136);h.fill(d,2,65280,
65377);h.fill(d,2,65504,65511);for(var a=0;a<k.length;++a)h.fill(d,0,k[a][0],k[a][1]+1)}}return a.prototype.wcwidth=function(a){if(32>a)a=0;else if(127>a)a=1;else if(65536>a)a=d[a];else{var b;a:{var f=0,g=q.length-1;if(!(a<q[0][0]||a>q[g][1]))for(;g>=f;)if(a>q[b=f+g>>1][1])f=b+1;else{if(!(a<q[b][0])){b=!0;break a}g=b-1}b=!1}a=b?0:131072<=a&&196605>=a||196608<=a&&262141>=a?2:1}return a},a}();a.UnicodeV6=b},5981:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.WriteBuffer=void 0;b=function(){function a(a){this._action=
a;this._writeBuffer=[];this._callbacks=[];this._bufferOffset=this._pendingData=0}return a.prototype.writeSync=function(a){if(this._writeBuffer.length){for(var b=this._bufferOffset;b<this._writeBuffer.length;++b){var d=this._callbacks[b];this._action(this._writeBuffer[b]);d&&d()}this._writeBuffer=[];this._callbacks=[];this._pendingData=0;this._bufferOffset=2147483647}this._action(a)},a.prototype.write=function(a,b){var d=this;if(5E7<this._pendingData)throw Error("write data discarded, use flow control to avoid losing data");
this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return d._innerWrite()}));this._pendingData+=a.length;this._writeBuffer.push(a);this._callbacks.push(b)},a.prototype._innerWrite=function(){for(var a=this,b=Date.now();this._writeBuffer.length>this._bufferOffset;){var f=this._writeBuffer[this._bufferOffset],h=this._callbacks[this._bufferOffset];if(this._bufferOffset++,this._action(f),this._pendingData-=f.length,h&&h(),12<=Date.now()-b)break}this._writeBuffer.length>this._bufferOffset?
(50<this._bufferOffset&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return a._innerWrite()},0)):(this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0)},a}();a.WriteBuffer=b},5770:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.PAYLOAD_LIMIT=void 0;a.PAYLOAD_LIMIT=1E7},6351:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});
a.DcsHandler=a.DcsParser=void 0;var d=f(482);b=f(8742);var h=f(5770),k=[];f=function(){function a(){this._handlers=Object.create(null);this._active=k;this._ident=0;this._handlerFb=function(){}}return a.prototype.dispose=function(){this._handlers=Object.create(null);this._handlerFb=function(){};this._active=k},a.prototype.registerHandler=function(a,b){void 0===this._handlers[a]&&(this._handlers[a]=[]);var d=this._handlers[a];return d.push(b),{dispose:function(){var a=d.indexOf(b);-1!==a&&d.splice(a,
1)}}},a.prototype.clearHandler=function(a){this._handlers[a]&&delete this._handlers[a]},a.prototype.setHandlerFallback=function(a){this._handlerFb=a},a.prototype.reset=function(){this._active.length&&this.unhook(!1);this._active=k;this._ident=0},a.prototype.hook=function(a,b){if(this.reset(),this._ident=a,this._active=this._handlers[a]||k,this._active.length)for(a=this._active.length-1;0<=a;a--)this._active[a].hook(b);else this._handlerFb(this._ident,"HOOK",b)},a.prototype.put=function(a,b,f){if(this._active.length)for(var g=
this._active.length-1;0<=g;g--)this._active[g].put(a,b,f);else this._handlerFb(this._ident,"PUT",d.utf32ToString(a,b,f))},a.prototype.unhook=function(a){if(this._active.length){for(var b=this._active.length-1;0<=b&&!this._active[b].unhook(a);b--);for(b--;0<=b;b--)this._active[b].unhook(!1)}else this._handlerFb(this._ident,"UNHOOK",a);this._active=k;this._ident=0},a}();a.DcsParser=f;var q=new b.Params;q.addParam(0);f=function(){function a(a){this._handler=a;this._data="";this._params=q;this._hitLimit=
!1}return a.prototype.hook=function(a){this._params=1<a.length||a.params[0]?a.clone():q;this._data="";this._hitLimit=!1},a.prototype.put=function(a,b,f){this._hitLimit||(this._data+=d.utf32ToString(a,b,f),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},a.prototype.unhook=function(a){var b=!1;return this._hitLimit?b=!1:a&&(b=this._handler(this._data,this._params)),this._params=q,this._data="",this._hitLimit=!1,b},a}();a.DcsHandler=f},2015:function(b,a,f){var d,h=this&&this.__extends||
(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)});Object.defineProperty(a,"__esModule",{value:!0});a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;b=f(844);var k=f(8273),q=f(8742),t=f(6242),g=f(6351),
l=function(){function a(a){this.table=new Uint8Array(a)}return a.prototype.setDefault=function(a,b){k.fill(this.table,a<<4|b)},a.prototype.add=function(a,b,d,f){this.table[b<<8|a]=d<<4|f},a.prototype.addMany=function(a,b,d,f){for(var c=0;c<a.length;c++)this.table[b<<8|a[c]]=d<<4|f},a}();a.TransitionTable=l;a.VT500_TRANSITION_TABLE=function(){var a=new l(4095),b=Array.apply(null,Array(256)).map(function(a,b){return b}),c=function(a,c){return b.slice(a,c)},d=c(32,127),f=c(0,24);f.push(25);f.push.apply(f,
c(28,32));var g,h=c(0,14);for(g in a.setDefault(1,0),a.addMany(d,0,2,0),h)a.addMany([24,26,153,154],g,3,0),a.addMany(c(128,144),g,3,0),a.addMany(c(144,152),g,3,0),a.add(156,g,0,0),a.add(27,g,11,1),a.add(157,g,4,8),a.addMany([152,158,159],g,0,7),a.add(155,g,11,3),a.add(144,g,11,9);return a.addMany(f,0,3,0),a.addMany(f,1,3,1),a.add(127,1,0,1),a.addMany(f,8,0,8),a.addMany(f,3,3,3),a.add(127,3,0,3),a.addMany(f,4,3,4),a.add(127,4,0,4),a.addMany(f,6,3,6),a.addMany(f,5,3,5),a.add(127,5,0,5),a.addMany(f,
2,3,2),a.add(127,2,0,2),a.add(93,1,4,8),a.addMany(d,8,5,8),a.add(127,8,5,8),a.addMany([156,27,24,26,7],8,6,0),a.addMany(c(28,32),8,0,8),a.addMany([88,94,95],1,0,7),a.addMany(d,7,0,7),a.addMany(f,7,0,7),a.add(156,7,0,0),a.add(127,7,0,7),a.add(91,1,11,3),a.addMany(c(64,127),3,7,0),a.addMany(c(48,60),3,8,4),a.addMany([60,61,62,63],3,9,4),a.addMany(c(48,60),4,8,4),a.addMany(c(64,127),4,7,0),a.addMany([60,61,62,63],4,0,6),a.addMany(c(32,64),6,0,6),a.add(127,6,0,6),a.addMany(c(64,127),6,0,0),a.addMany(c(32,
48),3,9,5),a.addMany(c(32,48),5,9,5),a.addMany(c(48,64),5,0,6),a.addMany(c(64,127),5,7,0),a.addMany(c(32,48),4,9,5),a.addMany(c(32,48),1,9,2),a.addMany(c(32,48),2,9,2),a.addMany(c(48,127),2,10,0),a.addMany(c(48,80),1,10,0),a.addMany(c(81,88),1,10,0),a.addMany([89,90,92],1,10,0),a.addMany(c(96,127),1,10,0),a.add(80,1,11,9),a.addMany(f,9,0,9),a.add(127,9,0,9),a.addMany(c(28,32),9,0,9),a.addMany(c(32,48),9,9,12),a.addMany(c(48,60),9,8,10),a.addMany([60,61,62,63],9,9,10),a.addMany(f,11,0,11),a.addMany(c(32,
128),11,0,11),a.addMany(c(28,32),11,0,11),a.addMany(f,10,0,10),a.add(127,10,0,10),a.addMany(c(28,32),10,0,10),a.addMany(c(48,60),10,8,10),a.addMany([60,61,62,63],10,0,11),a.addMany(c(32,48),10,9,12),a.addMany(f,12,0,12),a.add(127,12,0,12),a.addMany(c(28,32),12,0,12),a.addMany(c(32,48),12,9,12),a.addMany(c(48,64),12,0,11),a.addMany(c(64,127),12,12,13),a.addMany(c(64,127),10,12,13),a.addMany(c(64,127),9,12,13),a.addMany(f,13,13,13),a.addMany(d,13,13,13),a.add(127,13,0,13),a.addMany([27,156,24,26],13,
14,0),a.add(160,0,2,0),a.add(160,8,5,8),a.add(160,6,0,6),a.add(160,11,0,11),a.add(160,13,13,13),a}();f=function(b){function d(c){void 0===c&&(c=a.VT500_TRANSITION_TABLE);var d=b.call(this)||this;return d._transitions=c,d.initialState=0,d.currentState=d.initialState,d._params=new q.Params,d._params.addParam(0),d._collect=0,d.precedingCodepoint=0,d._printHandlerFb=function(a,b,c){},d._executeHandlerFb=function(a){},d._csiHandlerFb=function(a,b){},d._escHandlerFb=function(a){},d._errorHandlerFb=function(a){return a},
d._printHandler=d._printHandlerFb,d._executeHandlers=Object.create(null),d._csiHandlers=Object.create(null),d._escHandlers=Object.create(null),d._oscParser=new t.OscParser,d._dcsParser=new g.DcsParser,d._errorHandler=d._errorHandlerFb,d.registerEscHandler({final:"\\"},function(){return!0}),d}return h(d,b),d.prototype._identifier=function(a,b){void 0===b&&(b=[64,126]);var c=0;if(a.prefix){if(1<a.prefix.length)throw Error("only one byte as prefix supported");if((c=a.prefix.charCodeAt(0))&&60>c||63<
c)throw Error("prefix must be in range 0x3c .. 0x3f");}if(a.intermediates){if(2<a.intermediates.length)throw Error("only two bytes as intermediates are supported");for(var d=0;d<a.intermediates.length;++d){var e=a.intermediates.charCodeAt(d);if(32>e||47<e)throw Error("intermediate must be in range 0x20 .. 0x2f");c<<=8;c|=e}}if(1!==a.final.length)throw Error("final must be a single byte");a=a.final.charCodeAt(0);if(b[0]>a||a>b[1])throw Error("final must be in range "+b[0]+" .. "+b[1]);return c<<8|
a},d.prototype.identToString=function(a){for(var b=[];a;)b.push(String.fromCharCode(255&a)),a>>=8;return b.reverse().join("")},d.prototype.dispose=function(){this._csiHandlers=Object.create(null);this._executeHandlers=Object.create(null);this._escHandlers=Object.create(null);this._oscParser.dispose();this._dcsParser.dispose()},d.prototype.setPrintHandler=function(a){this._printHandler=a},d.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},d.prototype.registerEscHandler=
function(a,b){a=this._identifier(a,[48,126]);void 0===this._escHandlers[a]&&(this._escHandlers[a]=[]);var c=this._escHandlers[a];return c.push(b),{dispose:function(){var a=c.indexOf(b);-1!==a&&c.splice(a,1)}}},d.prototype.clearEscHandler=function(a){this._escHandlers[this._identifier(a,[48,126])]&&delete this._escHandlers[this._identifier(a,[48,126])]},d.prototype.setEscHandlerFallback=function(a){this._escHandlerFb=a},d.prototype.setExecuteHandler=function(a,b){this._executeHandlers[a.charCodeAt(0)]=
b},d.prototype.clearExecuteHandler=function(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]},d.prototype.setExecuteHandlerFallback=function(a){this._executeHandlerFb=a},d.prototype.registerCsiHandler=function(a,b){a=this._identifier(a);void 0===this._csiHandlers[a]&&(this._csiHandlers[a]=[]);var c=this._csiHandlers[a];return c.push(b),{dispose:function(){var a=c.indexOf(b);-1!==a&&c.splice(a,1)}}},d.prototype.clearCsiHandler=function(a){this._csiHandlers[this._identifier(a)]&&
delete this._csiHandlers[this._identifier(a)]},d.prototype.setCsiHandlerFallback=function(a){this._csiHandlerFb=a},d.prototype.registerDcsHandler=function(a,b){return this._dcsParser.registerHandler(this._identifier(a),b)},d.prototype.clearDcsHandler=function(a){this._dcsParser.clearHandler(this._identifier(a))},d.prototype.setDcsHandlerFallback=function(a){this._dcsParser.setHandlerFallback(a)},d.prototype.registerOscHandler=function(a,b){return this._oscParser.registerHandler(a,b)},d.prototype.clearOscHandler=
function(a){this._oscParser.clearHandler(a)},d.prototype.setOscHandlerFallback=function(a){this._oscParser.setHandlerFallback(a)},d.prototype.setErrorHandler=function(a){this._errorHandler=a},d.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},d.prototype.reset=function(){this.currentState=this.initialState;this._oscParser.reset();this._dcsParser.reset();this._params.reset();this._params.addParam(0);this.precedingCodepoint=this._collect=0},d.prototype.parse=function(a,
b){for(var c=0,d,e=this.currentState,f=this._oscParser,g=this._dcsParser,l=this._collect,h=this._params,k=this._transitions.table,m=0;m<b;++m){switch((d=k[e<<8|(160>(c=a[m])?c:160)])>>4){case 2:for(e=m+1;;++e){if(e>=b||32>(c=a[e])||126<c&&160>c){this._printHandler(a,m,e);m=e-1;break}if(++e>=b||32>(c=a[e])||126<c&&160>c){this._printHandler(a,m,e);m=e-1;break}if(++e>=b||32>(c=a[e])||126<c&&160>c){this._printHandler(a,m,e);m=e-1;break}if(++e>=b||32>(c=a[e])||126<c&&160>c){this._printHandler(a,m,e);m=
e-1;break}}break;case 3:this._executeHandlers[c]?this._executeHandlers[c]():this._executeHandlerFb(c);this.precedingCodepoint=0;break;case 1:if(this._errorHandler({position:m,code:c,currentState:e,collect:l,params:h,abort:!1}).abort)return;break;case 7:for(var n=(e=this._csiHandlers[l<<8|c])?e.length-1:-1;0<=n&&!e[n](h);n--);0>n&&this._csiHandlerFb(l<<8|c,h);this.precedingCodepoint=0;break;case 8:do switch(c){case 59:h.addParam(0);break;case 58:h.addSubParam(-1);break;default:h.addDigit(c-48)}while(++m<
b&&47<(c=a[m])&&60>c);m--;break;case 9:l<<=8;l|=c;break;case 10:for(n=(e=this._escHandlers[l<<8|c])?e.length-1:-1;0<=n&&!e[n]();n--);0>n&&this._escHandlerFb(l<<8|c);this.precedingCodepoint=0;break;case 11:h.reset();h.addParam(0);l=0;break;case 12:g.hook(l<<8|c,h);break;case 13:for(e=m+1;;++e)if(e>=b||24===(c=a[e])||26===c||27===c||127<c&&160>c){g.put(a,m,e);m=e-1;break}break;case 14:g.unhook(24!==c&&26!==c);27===c&&(d|=1);h.reset();h.addParam(0);this.precedingCodepoint=l=0;break;case 4:f.start();
break;case 5:for(e=m+1;;e++)if(e>=b||32>(c=a[e])||127<c&&160>c){f.put(a,m,e);m=e-1;break}break;case 6:f.end(24!==c&&26!==c),27===c&&(d|=1),h.reset(),h.addParam(0),this.precedingCodepoint=l=0}e=15&d}this._collect=l;this.currentState=e},d}(b.Disposable);a.EscapeSequenceParser=f},6242:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.OscHandler=a.OscParser=void 0;var d=f(5770),h=f(482),k=[];b=function(){function a(){this._state=0;this._active=k;this._id=-1;this._handlers=Object.create(null);
this._handlerFb=function(){}}return a.prototype.registerHandler=function(a,b){void 0===this._handlers[a]&&(this._handlers[a]=[]);var d=this._handlers[a];return d.push(b),{dispose:function(){var a=d.indexOf(b);-1!==a&&d.splice(a,1)}}},a.prototype.clearHandler=function(a){this._handlers[a]&&delete this._handlers[a]},a.prototype.setHandlerFallback=function(a){this._handlerFb=a},a.prototype.dispose=function(){this._handlers=Object.create(null);this._handlerFb=function(){};this._active=k},a.prototype.reset=
function(){2===this._state&&this.end(!1);this._active=k;this._id=-1;this._state=0},a.prototype._start=function(){if(this._active=this._handlers[this._id]||k,this._active.length)for(var a=this._active.length-1;0<=a;a--)this._active[a].start();else this._handlerFb(this._id,"START")},a.prototype._put=function(a,b,d){if(this._active.length)for(var f=this._active.length-1;0<=f;f--)this._active[f].put(a,b,d);else this._handlerFb(this._id,"PUT",h.utf32ToString(a,b,d))},a.prototype._end=function(a){if(this._active.length){for(var b=
this._active.length-1;0<=b&&!this._active[b].end(a);b--);for(b--;0<=b;b--)this._active[b].end(!1)}else this._handlerFb(this._id,"END",a)},a.prototype.start=function(){this.reset();this._state=1},a.prototype.put=function(a,b,d){if(3!==this._state){if(1===this._state)for(;b<d;){var f=a[b++];if(59===f){this._state=2;this._start();break}if(48>f||57<f)return void(this._state=3);-1===this._id&&(this._id=0);this._id=10*this._id+f-48}2===this._state&&0<d-b&&this._put(a,b,d)}},a.prototype.end=function(a){0!==
this._state&&(3!==this._state&&(1===this._state&&this._start(),this._end(a)),this._active=k,this._id=-1,this._state=0)},a}();a.OscParser=b;b=function(){function a(a){this._handler=a;this._data="";this._hitLimit=!1}return a.prototype.start=function(){this._data="";this._hitLimit=!1},a.prototype.put=function(a,b,f){this._hitLimit||(this._data+=h.utf32ToString(a,b,f),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},a.prototype.end=function(a){var b=!1;return this._hitLimit?b=!1:
a&&(b=this._handler(this._data)),this._data="",this._hitLimit=!1,b},a}();a.OscHandler=b},8742:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.Params=void 0;b=function(){function a(a,b){if(void 0===a&&(a=32),void 0===b&&(b=32),this.maxLength=a,this.maxSubParamsLength=b,256<b)throw Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(a);this.length=0;this._subParams=new Int32Array(b);this._subParamsLength=0;this._subParamsIdx=new Uint16Array(a);this._digitIsSub=
this._rejectSubDigits=this._rejectDigits=!1}return a.fromArray=function(b){var d=new a;if(!b.length)return d;for(var f=b[0]instanceof Array?1:0;f<b.length;++f){var h=b[f];if(h instanceof Array)for(var k=0;k<h.length;++k)d.addSubParam(h[k]);else d.addParam(h)}return d},a.prototype.clone=function(){var b=new a(this.maxLength,this.maxSubParamsLength);return b.params.set(this.params),b.length=this.length,b._subParams.set(this._subParams),b._subParamsLength=this._subParamsLength,b._subParamsIdx.set(this._subParamsIdx),
b._rejectDigits=this._rejectDigits,b._rejectSubDigits=this._rejectSubDigits,b._digitIsSub=this._digitIsSub,b},a.prototype.toArray=function(){for(var a=[],b=0;b<this.length;++b){a.push(this.params[b]);var f=this._subParamsIdx[b]>>8,h=255&this._subParamsIdx[b];0<h-f&&a.push(Array.prototype.slice.call(this._subParams,f,h))}return a},a.prototype.reset=function(){this._subParamsLength=this.length=0;this._digitIsSub=this._rejectSubDigits=this._rejectDigits=!1},a.prototype.addParam=function(a){if(this._digitIsSub=
!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(-1>a)throw Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength;this.params[this.length++]=2147483647<a?2147483647:a}},a.prototype.addSubParam=function(a){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(-1>a)throw Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=
2147483647<a?2147483647:a;this._subParamsIdx[this.length-1]++}},a.prototype.hasSubParams=function(a){return 0<(255&this._subParamsIdx[a])-(this._subParamsIdx[a]>>8)},a.prototype.getSubParams=function(a){var b=this._subParamsIdx[a]>>8;a=255&this._subParamsIdx[a];return 0<a-b?this._subParams.subarray(b,a):null},a.prototype.getSubParamsAll=function(){for(var a={},b=0;b<this.length;++b){var f=this._subParamsIdx[b]>>8,h=255&this._subParamsIdx[b];0<h-f&&(a[b]=this._subParams.slice(f,h))}return a},a.prototype.addDigit=
function(a){var b;if(!(this._rejectDigits||!(b=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var d=this._digitIsSub?this._subParams:this.params,f=d[b-1];d[b-1]=~f?Math.min(10*f+a,2147483647):a}},a}();a.Params=b},744:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,
b)},function(a,b){function c(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}),k=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)(e=a[h])&&(g=(3>f?e(g):3<f?e(b,c,g):e(b,c))||g);return 3<f&&g&&Object.defineProperty(b,c,g),g},q=this&&this.__param||function(a,
b){return function(c,d){b(c,d,a)}};Object.defineProperty(a,"__esModule",{value:!0});a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;var t=f(2585),g=f(5295),l=f(8460);b=f(844);a.MINIMUM_COLS=2;a.MINIMUM_ROWS=1;b=function(b){function d(c){var d=b.call(this)||this;return d._optionsService=c,d.isUserScrolling=!1,d._onResize=new l.EventEmitter,d.cols=Math.max(c.options.cols,a.MINIMUM_COLS),d.rows=Math.max(c.options.rows,a.MINIMUM_ROWS),d.buffers=new g.BufferSet(c,d),d}return h(d,b),Object.defineProperty(d.prototype,
"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),d.prototype.dispose=function(){b.prototype.dispose.call(this);this.buffers.dispose()},d.prototype.resize=function(a,b){this.cols=a;this.rows=b;this.buffers.resize(a,b);this.buffers.setupTabStops(this.cols);this._onResize.fire({cols:a,rows:b})},d.prototype.reset=function(){this.buffers.reset();
this.isUserScrolling=!1},k([q(0,t.IOptionsService)],d)}(b.Disposable);a.BufferService=b},7994:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.CharsetService=void 0;b=function(){function a(){this.glevel=0;this._charsets=[]}return a.prototype.reset=function(){this.charset=void 0;this._charsets=[];this.glevel=0},a.prototype.setgLevel=function(a){this.glevel=a;this.charset=this._charsets[a]},a.prototype.setgCharset=function(a,b){this._charsets[a]=b;this.glevel===a&&(this.charset=b)},
a}();a.CharsetService=b},1753:function(b,a,f){function d(a,b){var c=(a.ctrl?16:0)|(a.shift?4:0)|(a.alt?8:0);return 4===a.button?(c|=64,c|=a.action):(c|=3&a.button,4&a.button&&(c|=64),8&a.button&&(c|=128),32===a.action?c|=32:0!==a.action||b||(c|=3)),c}var h=this&&this.__decorate||function(a,b,d,f){var c,e=arguments.length,g=3>e?b:null===f?f=Object.getOwnPropertyDescriptor(b,d):f;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,d,f);else for(var h=a.length-1;0<=
h;h--)(c=a[h])&&(g=(3>e?c(g):3<e?c(b,d,g):c(b,d))||g);return 3<e&&g&&Object.defineProperty(b,d,g),g},k=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(a,"__esModule",{value:!0});a.CoreMouseService=void 0;var q=f(2585),t=f(8460),g={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(a){return 4!==a.button&&1===a.action&&(a.ctrl=!1,a.alt=!1,a.shift=!1,!0)}},VT200:{events:19,restrict:function(a){return 32!==a.action}},DRAG:{events:23,
restrict:function(a){return 32!==a.action||3!==a.button}},ANY:{events:31,restrict:function(a){return!0}}},l=String.fromCharCode,n={DEFAULT:function(a){a=[d(a,!1)+32,a.col+32,a.row+32];return 255<a[0]||255<a[1]||255<a[2]?"":"\u001b[M"+l(a[0])+l(a[1])+l(a[2])},SGR:function(a){var b=0===a.action&&4!==a.button?"m":"M";return"\u001b[<"+d(a,!0)+";"+a.col+";"+a.row+b}};b=function(){function a(a,b){this._bufferService=a;this._coreService=b;this._protocols={};this._encodings={};this._activeEncoding=this._activeProtocol=
"";this._onProtocolChange=new t.EventEmitter;this._lastEvent=null;a=0;for(b=Object.keys(g);a<b.length;a++){var c=b[a];this.addProtocol(c,g[c])}a=0;for(b=Object.keys(n);a<b.length;a++)c=b[a],this.addEncoding(c,n[c]);this.reset()}return a.prototype.addProtocol=function(a,b){this._protocols[a]=b},a.prototype.addEncoding=function(a,b){this._encodings[a]=b},Object.defineProperty(a.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(a){if(!this._protocols[a])throw Error('unknown protocol "'+
a+'"');this._activeProtocol=a;this._onProtocolChange.fire(this._protocols[a].events)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"areMouseEventsActive",{get:function(){return 0!==this._protocols[this._activeProtocol].events},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(a){if(!this._encodings[a])throw Error('unknown encoding "'+a+'"');this._activeEncoding=a},enumerable:!1,configurable:!0}),
a.prototype.reset=function(){this.activeProtocol="NONE";this.activeEncoding="DEFAULT";this._lastEvent=null},Object.defineProperty(a.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),a.prototype.triggerMouseEvent=function(a){if(0>a.col||a.col>=this._bufferService.cols||0>a.row||a.row>=this._bufferService.rows||4===a.button&&32===a.action||3===a.button&&32!==a.action||4!==a.button&&(2===a.action||3===a.action)||(a.col++,a.row++,32===a.action&&
this._lastEvent&&this._compareEvents(this._lastEvent,a))||!this._protocols[this._activeProtocol].restrict(a))return!1;var b=this._encodings[this._activeEncoding](a);return b&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(b):this._coreService.triggerDataEvent(b,!0)),this._lastEvent=a,!0},a.prototype.explainEvents=function(a){return{down:!!(1&a),up:!!(2&a),drag:!!(4&a),move:!!(8&a),wheel:!!(16&a)}},a.prototype._compareEvents=function(a,b){return a.col===b.col&&a.row===b.row&&
a.button===b.button&&a.action===b.action&&a.ctrl===b.ctrl&&a.alt===b.alt&&a.shift===b.shift},h([k(0,q.IBufferService),k(1,q.ICoreService)],a)}();a.CoreMouseService=b},6975:function(b,a,f){var d,h=this&&this.__extends||(d=function(a,b){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},function(a,b){function c(){this.constructor=a}d(a,b);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)}),k=this&&this.__decorate||function(a,b,d,f){var c,e=arguments.length,g=3>e?b:null===f?f=Object.getOwnPropertyDescriptor(b,d):f;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,d,f);else for(var h=a.length-1;0<=h;h--)(c=a[h])&&(g=(3>e?c(g):3<e?c(b,d,g):c(b,d))||g);return 3<e&&g&&Object.defineProperty(b,d,g),g},q=this&&this.__param||function(a,b){return function(c,d){b(c,d,a)}};Object.defineProperty(a,"__esModule",{value:!0});a.CoreService=
void 0;var t=f(2585),g=f(8460),l=f(1439);b=f(844);var n=Object.freeze({insertMode:!1}),m=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});b=function(a){function b(b,c,d,e){var f=a.call(this)||this;return f._bufferService=c,f._logService=d,f._optionsService=e,f.isCursorInitialized=!1,f.isCursorHidden=!1,f._onData=f.register(new g.EventEmitter),f._onUserInput=f.register(new g.EventEmitter),f._onBinary=f.register(new g.EventEmitter),
f._scrollToBottom=b,f.register({dispose:function(){return f._scrollToBottom=void 0}}),f.modes=l.clone(n),f.decPrivateModes=l.clone(m),f}return h(b,a),Object.defineProperty(b.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),
b.prototype.reset=function(){this.modes=l.clone(n);this.decPrivateModes=l.clone(m)},b.prototype.triggerDataEvent=function(a,b){if(void 0===b&&(b=!1),!this._optionsService.options.disableStdin){var c=this._bufferService.buffer;c.ybase!==c.ydisp&&this._scrollToBottom();b&&this._onUserInput.fire();this._logService.debug('sending data "'+a+'"',function(){return a.split("").map(function(a){return a.charCodeAt(0)})});this._onData.fire(a)}},b.prototype.triggerBinaryEvent=function(a){this._optionsService.options.disableStdin||
(this._logService.debug('sending binary "'+a+'"',function(){return a.split("").map(function(a){return a.charCodeAt(0)})}),this._onBinary.fire(a))},k([q(1,t.IBufferService),q(2,t.ILogService),q(3,t.IOptionsService)],b)}(b.Disposable);a.CoreService=b},3730:function(b,a,f){var d=this&&this.__decorate||function(a,b,d,f){var g,h=arguments.length,c=3>h?b:null===f?f=Object.getOwnPropertyDescriptor(b,d):f;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(a,b,d,f);else for(var e=
a.length-1;0<=e;e--)(g=a[e])&&(c=(3>h?g(c):3<h?g(b,d,c):g(b,d))||c);return 3<h&&c&&Object.defineProperty(b,d,c),c},h=this&&this.__param||function(a,b){return function(d,f){b(d,f,a)}};Object.defineProperty(a,"__esModule",{value:!0});a.DirtyRowService=void 0;var k=f(2585);b=function(){function a(a){this._bufferService=a;this.clearRange()}return Object.defineProperty(a.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"end",{get:function(){return this._end},
enumerable:!1,configurable:!0}),a.prototype.clearRange=function(){this._end=this._start=this._bufferService.buffer.y},a.prototype.markDirty=function(a){a<this._start?this._start=a:a>this._end&&(this._end=a)},a.prototype.markRangeDirty=function(a,b){a>b&&(b=a=b);a<this._start&&(this._start=a);b>this._end&&(this._end=b)},a.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},d([h(0,k.IBufferService)],a)}();a.DirtyRowService=b},4348:function(b,a,f){var d=this&&this.__spreadArrays||
function(){for(var a=0,b=0,d=arguments.length;b<d;b++)a+=arguments[b].length;a=Array(a);var f=0;for(b=0;b<d;b++)for(var h=arguments[b],c=0,e=h.length;c<e;c++,f++)a[f]=h[c];return a};Object.defineProperty(a,"__esModule",{value:!0});a.InstantiationService=a.ServiceCollection=void 0;var h=f(2585),k=f(8343),q=function(){function a(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this._entries=new Map;for(b=0;b<a.length;b++){var d=a[b];this.set(d[0],d[1])}}return a.prototype.set=function(a,
b){var d=this._entries.get(a);return this._entries.set(a,b),d},a.prototype.forEach=function(a){this._entries.forEach(function(b,d){return a(d,b)})},a.prototype.has=function(a){return this._entries.has(a)},a.prototype.get=function(a){return this._entries.get(a)},a}();a.ServiceCollection=q;b=function(){function a(){this._services=new q;this._services.set(h.IInstantiationService,this)}return a.prototype.setService=function(a,b){this._services.set(a,b)},a.prototype.getService=function(a){return this._services.get(a)},
a.prototype.createInstance=function(a){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];var g=k.getServiceDependencies(a).sort(function(a,b){return a.index-b.index});f=[];for(var c=0;c<g.length;c++){var e=g[c],h=this._services.get(e.id);if(!h)throw Error("[createInstance] "+a.name+" depends on UNKNOWN service "+e.id+".");f.push(h)}g=0<g.length?g[0].index:b.length;if(b.length!==g)throw Error("[createInstance] First service dependency of "+a.name+" at position "+(g+1)+" conflicts with "+
b.length+" static arguments");return new (a.bind.apply(a,d([void 0],d(b,f))))},a}();a.InstantiationService=b},7866:function(b,a,f){var d=this&&this.__decorate||function(a,b,d,c){var e,f=arguments.length,g=3>f?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,d,c);else for(var h=a.length-1;0<=h;h--)(e=a[h])&&(g=(3>f?e(g):3<f?e(b,d,g):e(b,d))||g);return 3<f&&g&&Object.defineProperty(b,d,g),g},h=this&&this.__param||
function(a,b){return function(d,c){b(d,c,a)}},k=this&&this.__spreadArrays||function(){for(var a=0,b=0,d=arguments.length;b<d;b++)a+=arguments[b].length;a=Array(a);var c=0;for(b=0;b<d;b++)for(var e=arguments[b],f=0,g=e.length;f<g;f++,c++)a[c]=e[f];return a};Object.defineProperty(a,"__esModule",{value:!0});a.LogService=a.LogLevel=void 0;var q,t=f(2585);!function(a){a[a.DEBUG=0]="DEBUG";a[a.INFO=1]="INFO";a[a.WARN=2]="WARN";a[a.ERROR=3]="ERROR";a[a.OFF=4]="OFF"}(q=a.LogLevel||(a.LogLevel={}));var g=
{debug:q.DEBUG,info:q.INFO,warn:q.WARN,error:q.ERROR,off:q.OFF};b=function(){function a(a){var b=this;this._optionsService=a;this._updateLogLevel();this._optionsService.onOptionChange(function(a){"logLevel"===a&&b._updateLogLevel()})}return a.prototype._updateLogLevel=function(){this._logLevel=g[this._optionsService.options.logLevel]},a.prototype._evalLazyOptionalParams=function(a){for(var b=0;b<a.length;b++)"function"==typeof a[b]&&(a[b]=a[b]())},a.prototype._log=function(a,b,c){this._evalLazyOptionalParams(c);
a.call.apply(a,k([console,"xterm.js: "+b],c))},a.prototype.debug=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this._logLevel<=q.DEBUG&&this._log(console.log,a,b)},a.prototype.info=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this._logLevel<=q.INFO&&this._log(console.info,a,b)},a.prototype.warn=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this._logLevel<=q.WARN&&this._log(console.warn,a,b)},a.prototype.error=function(a){for(var b=
[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this._logLevel<=q.ERROR&&this._log(console.error,a,b)},d([h(0,t.IOptionsService)],a)}();a.LogService=b},7302:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.OptionsService=a.DEFAULT_OPTIONS=a.DEFAULT_BELL_SOUND=void 0;var d=f(8460);b=f(6114);var h=f(1439);a.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq";
a.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,bellSound:a.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1E3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,
minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:b.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1});var k="normal bold 100 200 300 400 500 600 700 800 900".split(" "),q=["cols","rows"];f=function(){function b(b){this._onOptionChange=new d.EventEmitter;this.options=h.clone(a.DEFAULT_OPTIONS);for(var f=0,g=Object.keys(b);f<
g.length;f++){var k=g[f];if(k in this.options)try{this.options[k]=this._sanitizeAndValidateOption(k,b[k])}catch(c){console.error(c)}}}return Object.defineProperty(b.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),b.prototype.setOption=function(b,d){if(!(b in a.DEFAULT_OPTIONS))throw Error('No option with key "'+b+'"');if(q.includes(b))throw Error('Option "'+b+'" can only be set in the constructor');this.options[b]!==d&&(d=this._sanitizeAndValidateOption(b,
d),this.options[b]!==d&&(this.options[b]=d,this._onOptionChange.fire(b)))},b.prototype._sanitizeAndValidateOption=function(b,d){switch(b){case "bellStyle":case "cursorStyle":case "rendererType":case "wordSeparator":d||(d=a.DEFAULT_OPTIONS[b]);break;case "fontWeight":case "fontWeightBold":if("number"==typeof d&&1<=d&&1E3>=d)break;d=k.includes(d)?d:a.DEFAULT_OPTIONS[b];break;case "cursorWidth":d=Math.floor(d);case "lineHeight":case "tabStopWidth":if(1>d)throw Error(b+" cannot be less than 1, value: "+
d);break;case "minimumContrastRatio":d=Math.max(1,Math.min(21,Math.round(10*d)/10));break;case "scrollback":if(0>(d=Math.min(d,4294967295)))throw Error(b+" cannot be less than 0, value: "+d);break;case "fastScrollSensitivity":case "scrollSensitivity":if(0>=d)throw Error(b+" cannot be less than or equal to 0, value: "+d);}return d},b.prototype.getOption=function(b){if(!(b in a.DEFAULT_OPTIONS))throw Error('No option with key "'+b+'"');return this.options[b]},b}();a.OptionsService=f},8343:function(b,
a){Object.defineProperty(a,"__esModule",{value:!0});a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;a.serviceRegistry=new Map;a.getServiceDependencies=function(a){return a.di$dependencies||[]};a.createDecorator=function(b){if(a.serviceRegistry.has(b))return a.serviceRegistry.get(b);var d=function(a,b,f){if(3!==arguments.length)throw Error("@IServiceName-decorator can only be used to decorate a parameter");var h=d;a.di$target===a?a.di$dependencies.push({id:h,index:f}):(a.di$dependencies=
[{id:h,index:f}],a.di$target=a)};return d.toString=function(){return b},a.serviceRegistry.set(b,d),d}},2585:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.IUnicodeService=a.IOptionsService=a.ILogService=a.IInstantiationService=a.IDirtyRowService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;b=f(8343);a.IBufferService=b.createDecorator("BufferService");a.ICoreMouseService=b.createDecorator("CoreMouseService");a.ICoreService=b.createDecorator("CoreService");
a.ICharsetService=b.createDecorator("CharsetService");a.IDirtyRowService=b.createDecorator("DirtyRowService");a.IInstantiationService=b.createDecorator("InstantiationService");a.ILogService=b.createDecorator("LogService");a.IOptionsService=b.createDecorator("OptionsService");a.IUnicodeService=b.createDecorator("UnicodeService")},1480:function(b,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.UnicodeService=void 0;var d=f(8460),h=f(225);b=function(){function a(){this._providers=Object.create(null);
this._active="";this._onChange=new d.EventEmitter;var a=new h.UnicodeV6;this.register(a);this._active=a.version;this._activeProvider=a}return Object.defineProperty(a.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"activeVersion",{get:function(){return this._active},set:function(a){if(!this._providers[a])throw Error('unknown Unicode version "'+
a+'"');this._active=a;this._activeProvider=this._providers[a];this._onChange.fire(a)},enumerable:!1,configurable:!0}),a.prototype.register=function(a){this._providers[a.version]=a},a.prototype.wcwidth=function(a){return this._activeProvider.wcwidth(a)},a.prototype.getStringCellWidth=function(a){for(var b=0,d=a.length,f=0;f<d;++f){var h=a.charCodeAt(f);if(55296<=h&&56319>=h){if(++f>=d)return b+this.wcwidth(h);var k=a.charCodeAt(f);56320<=k&&57343>=k?h=1024*(h-55296)+k-56320+65536:b+=this.wcwidth(k)}b+=
this.wcwidth(h)}return b},a}();a.UnicodeService=b}},k={};return function f(a){if(k[a])return k[a].exports;var d=k[a]={exports:{}};return b[a].call(d.exports,d,d.exports,f),d.exports}(4389)}()});SSHyClient.auth=function(b){this.parceler=b;this.authenticated=null;this.awaitingAuthentication=!1;this.hostname=wsproxyURL?wsproxyURL.split("/")[2].split(":")[0]:"";this.termUsername="";this.termPassword=void 0;this.failedAttempts=0;this.channelOpened=!1};
SSHyClient.auth.prototype={request_auth:function(){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_SERVICE_REQUEST));b.add_string("ssh-userauth");this.parceler.send(b)},ssh_connection:function(){if(this.termUsername&&this.termPassword){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_USERAUTH_REQUEST));b.add_string(this.termUsername);b.add_string("ssh-connection");b.add_string("password");b.add_boolean(!1);b.add_string(this.termPassword);this.awaitingAuthentication=
!0;this.parceler.send(b)}else term||startxtermjs()},auth_success:function(b){b&&(document.title=this.termUsername+"@"+this.hostname,this.termUsername="",this.termPassword=void 0,term||startxtermjs(),transport.settings.setKeepAlive(240),document.getElementById("keepAlive").value=240,this.open_channel("session"))},open_channel:function(b,k){k=new SSHyClient.Message;k.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_OPEN));k.add_string(b);k.add_int(1);k.add_int(SSHyClient.WINDOW_SIZE);k.add_int(SSHyClient.MAX_PACKET_SIZE);
this.parceler.send(k)},mod_pty:function(b,k,h,a){if(this.channelOpened){var f=new SSHyClient.Message;f.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));f.add_int(0);f.add_string(b);f.add_boolean(!1);a&&f.add_string(a);f.add_int(k);f.add_int(h);f.add_int(0);f.add_int(0);a&&f.add_string("");this.parceler.send(f);a&&this.invoke_shell()}},invoke_shell:function(){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));b.add_int(0);b.add_string("shell");
b.add_boolean(!1);this.parceler.send(b);void 0===this.termPassword?term.write("\n\r"):startxtermjs()},authFailure:function(){term?(term.write("Access Denied\r\n"),5<=++this.failedAttempts?(term.write("Too many failed authentication attempts"),transport.disconnect()):(term.write(this.termUsername+"@"+this.hostname+"'s password:"),this.termPassword="")):display_error("Invalid Username or Password")}};SSHyClient.crypto={};SSHyClient.crypto.AES=function(b,k,h,a){this.cipher=new sjcl.cipher.aes(sjcl.codec.bytes.toBits(toByteArray(b)),k);this.mode=k;this.mode==SSHyClient.AES_CBC&&(this.iv=toByteArray(h));this.counter=a};
SSHyClient.crypto.AES.prototype={encrypt:function(b){b=this.cipher.encrypt(toByteArray(b),this.iv,this.counter);this.mode==SSHyClient.AES_CBC&&(this.iv=b.slice(-16));return fromByteArray(b)},decrypt:function(b){b=toByteArray(b);if(this.mode==SSHyClient.AES_CBC){var k=this.cipher.decrypt(b,this.iv);this.iv=b.slice(-16)}else k=this.cipher.encrypt(b,this.iv,this.counter);return fromByteArray(k)}};
SSHyClient.crypto.counter=function(b,k){k=void 0===k?1:k;this.blocksize=b/8;this.overflow=0;0===k?this.value=(new array(this.blocksize+1)).join("\u00ff"):(b=deflate_long(k.subtract(BigInteger.ONE),!1),this.value=Array(this.blocksize-b.length+1).join("\x00")+b)};
SSHyClient.crypto.counter.prototype={increment:function(){for(var b=this.blocksize;b--;){var k=String.fromCharCode((this.value.charCodeAt(b)+1)%256);this.value=setCharAt(this.value,b,k);if("\x00"!=k)return this.value}b=deflate_long(this.overflow,!1);return this.value=Array(this.blocksize-b.length+1).join("\x00")+b}};SSHyClient.kex={K:null,H:null,sessionId:null};function verifyKey(b,k){if(!(new SSHyClient.RSAKey(new SSHyClient.Message(b))).verify(SSHyClient.kex.H,new SSHyClient.Message(k)))throw transport.disconnect(),"RSA signature verification failed, disconnecting.";}
SSHyClient.kex.DiffieHellman=function(b,k,h){this.transport=b;this.SHAVersion=h;this.group=k;void 0===this.group?(this.p=this.q=this.g=this.x=this.e=this.f=null,this.minBits=1024,this.maxBits=8192,this.preferredBits=2048):(1===this.group?this.P=new BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE65381FFFFFFFFFFFFFFFF",
16):14===this.group&&(this.P=new BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AACAA68FFFFFFFFFFFFFFFF",
16)),this.x=this.e=this.f=new BigInteger("0",10),this.G=new BigInteger("2",10))};
SSHyClient.kex.DiffieHellman.prototype={start:function(){var b=new SSHyClient.Message;void 0===this.group?(b.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_GEX_REQUEST)),b.add_int(this.minBits),b.add_int(this.preferredBits),b.add_int(this.maxBits)):(this.x=inflate_long(read_rng(128)),this.e=this.G.modPow(this.x,this.P),b.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_INIT)),b.add_mpint(this.e));this.transport.send_packet(b)},parse_reply:function(b,k){void 0===this.group&&b==SSHyClient.MSG_KEXDH_GEX_GROUP?
this.parse_gex_group(k):this.handleDHReply(k)},handleDHReply:function(b){b=new SSHyClient.Message(b);var k=b.get_string();if(transport.settings.rsaCheckEnabled){var h=wsproxyURL.split("/")[3],a=ascii2hex(k),f=ascii2hex(SSHyClient.hash.MD5(k)).match(/.{2}/g);randomart(f);var d=localStorage.getItem(h);if(d){if(d!=a)if(confirm("WARNING - POTENTIAL SECURITY BREACH!\r\n\nThe servers host key does not match the one SSHy has cached in local storage. This means that either the server administrator has changed the host key, or you have actually connected to another computer pretending to be the server.\r\nThe new rsa2 key fingerprint is:\r\nssh-rsa 2048 "+
f.join(":")+"\r\nIf you were expecting this change and trust the new key, hit `Ok` to add the key to SSHy's cache and carry on connecting.\r\nIf you do not trust this new key, hit `Cancel` to abandon the connection"))localStorage.setItem(h,a);else throw ws.close(),"Error: Locally stored rsa key does not match remote key";}else if(confirm("The server's host key is not cached in local storage. You have no guarentee that the server is the computer you think it is.\n\rThe server's rsa2 key finterprint is:\r\nssh-rsa 2048 "+
f.join(":")+"\r\nIf you trust the host, hit `Ok` to add the key to SSHy's cache and carry on connecting.\r\nIf you do not trust this host, hit `Cancel` to abandon the connection"))localStorage.setItem(h,a);else throw ws.close(),"User has declined the rsa-key and closed the connection";}this.f=b.get_mpint();b=b.get_string();h=this.f.modPow(this.x,this.p);a=new SSHyClient.Message;a.add_string(this.transport.local_version);a.add_string(this.transport.remote_version);a.add_string(this.transport.local_kex_message);
a.add_string(this.transport.remote_kex_message);a.add_string(k);void 0===this.group&&(a.add_int(this.minBits),a.add_int(this.preferredBits),a.add_int(this.maxBits),a.add_mpint(this.p),a.add_mpint(this.g));a.add_mpint(this.e);a.add_mpint(this.f);a.add_mpint(h);SSHyClient.kex.K=h;SSHyClient.kex.sessionId=SSHyClient.kex.H="SHA-1"==this.SHAVersion?(new SSHyClient.hash.SHA1(a.toString())).digest():(new SSHyClient.hash.SHA256(a.toString())).digest();transport.settings.rsaCheckEnabled&&verifyKey(k,b);this.transport.send_new_keys()},
generate_x:function(){var b=this.p.subtract(BigInteger.ONE);b=b.divide(new BigInteger("2",10));var k=deflate_long(b,0),h=k[0].charCodeAt(0);k=k.length;for(var a=255;!(h&128);)h<<=1,a>>=1;for(;!(h=read_rng(k),h=String.fromCharCode(h[0].charCodeAt(0)&a)+h.substring(1),h=inflate_long(h,1),0<h.compareTo(BigInteger.ONE)&&0<b.compareTo(h)););this.x=h},parse_gex_group:function(b){b=new SSHyClient.Message(b);this.p=b.get_mpint();this.g=b.get_mpint();this.generate_x();this.e=this.g.modPow(this.x,this.p);b=
new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_GEX_INIT));b.add_mpint(this.e);this.transport.send_packet(b)}};SSHyClient.Message=function(b){this.position=0;this.packet=void 0===b?String():String(b)};
SSHyClient.Message.prototype={toString:function(){return this.packet},get_bytes:function(b){var k=this.packet.substring(this.position,this.position+b);this.position+=b;return k.length<b&&1048576>b?k+Array(b-k.length+1).join("\x00"):k},get_int:function(){return struct.unpack("I",this.get_bytes(4))[0]},get_string:function(){return this.get_bytes(this.get_int())},get_mpint:function(){return inflate_long(this.get_string())},add_bytes:function(b){this.packet+=b;return this},add_boolean:function(b){this.add_bytes(!0===
b?"\u0001":"\x00");return this},add_int:function(b){this.packet+=struct.pack("I",b);return this},add_mpint:function(b){this.add_string(deflate_long(b));return this},add_string:function(b){this.add_int(b.length);this.packet+=b;return this}};SSHyClient.parceler=function(b,k){this.socket=b;this.transport=k;this.encrypting=!1;this.hmacSHAVersion=this.inbound_iv=this.inbound_enc_key=this.inbound_mac_key=this.inbound_cipher=this.outbound_enc_iv=this.outbound_enc_key=this.outbound_mac_key=this.outbound_cipher=null;this.outbound_sequence_num=this.inbound_sequence_num=this.macSize=0;this.block_size=8;this.prevHeader=this.inbound_buffer="";this.windowSize=SSHyClient.WINDOW_SIZE;this.recieveData=this.transmitData=0};
SSHyClient.parceler.prototype={send:function(b){packet=this.pack_message(b.toString());this.encrypting&&(packet=this.outbound_cipher.encrypt(packet)+SSHyClient.hash.HMAC(this.outbound_mac_key,struct.pack("I",this.outbound_sequence_num)+packet,this.hmacSHAVersion));this.socket.sendB64(packet);this.outbound_sequence_num++},pack_message:function(b){var k=3+this.block_size-(b.length+8)%this.block_size;b=struct.pack("I",b.length+k+1)+struct.pack("B",k)+b;return b+=this.encrypting?read_rng(k):Array(k+1).join("\x00")},
handle:function(b){this.recieveData+=b.length;this.transport.settings.setNetTraffic(transport.parceler.recieveData,!0);if(this.encrypting)this.inbound_buffer+=b,this.decrypt();else if(this.transport.remote_version)this.inbound_buffer+=b,this.decrypt(b);else this.transport.handler_table[0](this.transport,b)},decrypt:function(){for(var b=" ",k;null!==b;){if(this.prevHeader)k=this.prevHeader,this.prevHeader="";else{k=this.read_ibuffer();if(!k)break;this.encrypting&&(k=this.inbound_cipher.decrypt(k))}var h=
struct.unpack("I",k.substring(0,4))[0],a=k.substring(4);b=this.read_ibuffer(h+this.macSize-a.length);if(!b){this.prevHeader=k;break}k=b.substring(0,h-a.length);this.encrypting&&(k=this.inbound_cipher.decrypt(k));k=a+k;if(this.macSize){a=b.substring(h-a.length);var f=struct.pack("I",this.inbound_sequence_num)+struct.pack("I",h)+k;if(SSHyClient.hash.HMAC(this.inbound_mac_key,f,this.hmacSHAVersion)!=a)throw this.transport.disconnect(),"Inbound MAC verification failed - Mismatched MAC";}this.inbound_sequence_num++;
this.windowSize-=h;0>=this.windowSize&&this.transport.winAdjust();this.transport.handle_dec(k)}},read_ibuffer:function(b){b=void 0===b?this.block_size:b;if(this.inbound_buffer.length<b)return null;var k=this.inbound_buffer.substring(0,b);this.inbound_buffer=this.inbound_buffer.substring(b);return k}};SSHyClient.RSAKey=function(b){b.get_string();this.e=b.get_mpint();this.n=b.get_mpint()};SSHyClient.RSAKey.prototype={pkcs1imify:function(b){return"\x00\u0001"+Array(deflate_long(this.n,0).length-15-b.length-3+1).join("\u00ff")+"\x000!0\t\u0006\u0005+\u000e\u0003\u0002\u001a\u0005\x00\u0004\u0014"+b},verify:function(b,k){if("ssh-rsa"!=k.get_string())return!1;k=inflate_long(k.get_string(),!0);b=inflate_long(this.pkcs1imify((new SSHyClient.hash.SHA1(b)).digest()),!0);return k.modPow(this.e,this.n).equals(b)}};SSHyClient.settings=function(){this.localEcho=0;this.fsHintEnter="\u001b[?1";this.fsHintLeave=SSHyClient.bashFsHintLeave;this.autoEchoState=!1;this.autoEchoTimeout=0;this.blockedKeys=[":"];this.keepAliveInterval=void 0;this.fontSize=16;this.colorTango=!0;this.colorNames=Object.keys(this.colorSchemes);this.colorCounter=0;this.shellString="";this.sidenavElementState=0;this.rxElement=document.getElementById("rxTraffic");this.txElement=document.getElementById("txTraffic");this.autoEchoElement=document.getElementById("autoEchoState");
this.rsaCheckEnabled=!0};
SSHyClient.settings.prototype={colorSchemes:[["Solarized",{background:"#002b36",black:"#002b36",red:"#dc322f",green:"#859900",yellow:"#b58900",blue:"#268bd2",magenta:"#6c71c4",cyan:"#2aa198",white:"#93a1a1",brightBlack:"#657b83",brightRed:"#dc322f",brightGreen:"#859900",brightYellow:"#b58900",brightBlue:"#268bd2",brightMagenta:"#6c71c4",brightCyan:"#2aa198",brightWhite:"#fdf6e3",cursor:"#93a1a1",foreground:"#93a1a1"}],["Material",{background:"#263238",black:"#263238",red:"#ff9800",green:"#8bc34a",
yellow:"#ffc107",blue:"#03a9f4",magenta:"#e91e63",cyan:"#009688",white:"#cfd8dc",brightBlack:"#37474f",brightRed:"#ffa74d",brightGreen:"#9ccc65",brightYellow:"#ffa000",brightBlue:"#81d4fa",brightMagenta:"#ad1457",brightCyan:"#26a69a",brightWhite:"#eceff1",cursor:"#eceff1",foreground:"#eceff1"}],["Monokai",{background:"#272822",black:"#272822",red:"#dc2566",green:"#8fc029",yellow:"#d4c96e",blue:"#55bcce",magenta:"#9358fe",cyan:"#56b7a5",white:"#acada1",brightBlack:"#76715e",brightRed:"#fa2772",brightGreen:"#a7e22e",
brightYellow:"#e7db75",brightBlue:"#66d9ee",brightMagenta:"#ae82ff",brightCyan:"#66efd5",brightWhite:"#cfd0c2",cursor:"#f1ebeb",foreground:"#f1ebeb"}],["Ashes",{background:"#1c2023",black:"#1c2023",red:"#c7ae95",green:"#95c7ae",yellow:"#aec795",blue:"#ae95c7",magenta:"#c795ae",cyan:"#95aec7",white:"#c7ccd1",brightBlack:"#747c84",brightRed:"#c7ae95",brightGreen:"#95c7ae",brightYellow:"#aec795",brightBlue:"#ae95c7",brightMagenta:"#c795ae",brightCyan:"#95aec7",brightWhite:"#f3f4f5",cursor:"#c7ccd1",
foreground:"#c7ccd1"}],["Google",{background:"#ffffff",black:"#ffffff",red:"#cc342b",green:"#198844",yellow:"#fba922",blue:"#3971ed",magenta:"#a36ac7",cyan:"#3971ed",white:"#c5c8c6",brightBlack:"#969896",brightRed:"#cc342b",brightGreen:"#198844",brightYellow:"#fba922",brightBlue:"#3971ed",brightMagenta:"#a36ac7",brightCyan:"#3971ed",brightWhite:"#ffffff",cursor:"#373b41",foreground:"#373b41"}],["Mono Light",{background:"#f7f7f7",black:"#f7f7f7",red:"#7c7c7c",green:"#8e8e8e",yellow:"#a0a0a0",blue:"#686868",
magenta:"#747474",cyan:"#868686",white:"#b9b9b9",brightBlack:"#525252",brightRed:"#7c7c7c",brightGreen:"#8e8e8e",brightYellow:"#a0a0a0",brightBlue:"#686868",brightMagenta:"#747474",brightCyan:"#868686",brightWhite:"#f7f7f7",cursor:"#464646",foreground:"#464646"}],["Mono Dark",{background:"#000000",black:"#000000",red:"#6b6b6b",green:"#c4c4c4",yellow:"#b3b3b3",blue:"#999999",magenta:"#717171",cyan:"#8a8a8a",white:"#b5cabb",brightBlack:"#202020",brightRed:"#464646",brightGreen:"#f8f8f8",brightYellow:"#eeeeee",
brightBlue:"#7c7c7c",brightMagenta:"#adadad",brightCyan:"#c0c0c0",brightWhite:"#99ac9e",cursor:"#ffffff",foreground:"#ffffff"}],["Tango",{}]],testShell:function(b){-1===b.substring(0,2).indexOf("]")&&(0===this.shellString.length||7<this.shellString.length)?this.shellString="":(this.shellString+=b,7>this.shellString.length||(-1!==this.shellString.indexOf("]0;fish")?(this.shellString="",this.fsHintLeave=SSHyClient.fishFsHintLeave):-1!==this.shellString.indexOf("@")&&(this.shellString="",this.fsHintLeave=
SSHyClient.bashFsHintLeave)))},setLocalEcho:function(b){this.localEcho=Math.min(Math.max(this.localEcho+=b,0),2);document.getElementById("currentLEcho").innerHTML=["Force Off","Auto","Force On"][this.localEcho];b=document.getElementById("autoEchoState");1===this.localEcho?(b.style.visibility="visible",b.innerHTML="State: "+(!1===this.autoEchoState?"Disabled":"Enabled")):b.style.visibility="hidden"},parseLocalEcho:function(b){if(1===this.localEcho){var k=performance.now();if(!(100>k-this.autoEchoTimeout))if(b=
b.substring(0,64),!this.autoEchoState)-1!=b.indexOf(this.fsHintLeave)&&-1!=b.indexOf("@")&&(this.autoEchoState=!0,this.autoEchoElement.innerHTML="State: Enabled",this.autoEchoTimeout=k);else if(-1!=b.indexOf(this.fsHintEnter)||-1!=b.toLowerCase().indexOf("password"))this.autoEchoState=!1,this.autoEchoElement.innerHTML="State: Disabled",this.autoEchoTimeout=k}},parseKey:function(b){1===this.localEcho&&!1===this.autoEchoState||1<b.key.length||this.blockedKeys.includes(b.key)||b.altKey||b.ctrlKey||b.metaKey||
(transport.lastKey||term.write(b.key),transport.lastKey+=b.key)},setKeepAlive:function(b){b=void 0===b?0:1E3*Math.floor(b);if(0===b||void 0!==this.keepAliveInterval)if(clearInterval(this.keepAliveInterval),this.keepAliveInterval=void 0,!b)return;this.keepAliveInterval=setInterval(transport.keepAlive,b)},setColorScheme:function(b){var k=document.styleSheets[0],h=this.colorSchemes[b][0];b=this.colorSchemes[b][1];term&&term.setOption("theme",b);if(!this.colorTango)for(i=0;4>i;i++)k.deleteRule(13);"Tango"===
h?(this.colorTango=!0,document.getElementById("currentColor").innerHTML="Tango"):(k.insertRule("html, body {background-color: "+b.background+" !important;}",13),k.insertRule(".sidenav {background-color: "+modColorPercent(b.background,-.2)+" !important;}",13),k.insertRule(".brightgreen {color: "+b.brightGreen+" !important;}",13),k.insertRule(".brightyellow {color: "+b.brightYellow+" !important;}",13),this.colorTango=!1,document.getElementById("currentColor").innerHTML=void 0===h?"Custom":h)},importXresources:function(){var b=
new FileReader,k=document.getElementById("Xresources").files[0];b.readAsText(k);b.onload=function(){var h=b.result.split("\n");h=h.sort((new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"})).compare);colScheme=[];for(var a=0;a<h.length;a++){var f=h[a].match(/#([0-9a-f]{3}){1,2}/ig);if(f&&(colScheme.push(f[0]),19<=colScheme.length))break}if(19!==colScheme.length)return alert("Uploaded file could not be parsed correctly.");colScheme={background:colScheme[0],black:colScheme[1],red:colScheme[2],
green:colScheme[3],yellow:colScheme[4],blue:colScheme[5],magenta:colScheme[6],cyan:colScheme[7],white:colScheme[8],brightBlack:colScheme[9],brightRed:colScheme[10],brightGreen:colScheme[11],brightYellow:colScheme[12],brightBlue:colScheme[13],brightMagenta:colScheme[14],brightCyan:colScheme[15],brightWhite:colScheme[16],cursor:colScheme[17],foreground:colScheme[18]};colName=".Xresources"===k.name?"custom":k.name.split(".")[0];transport.settings.colorSchemes.push([colName,colScheme]);transport.settings.colorNames=
Object.keys(transport.settings.colorSchemes);transport.settings.setColorScheme(transport.settings.colorSchemes.length-1)}},cycleColorSchemes:function(b){this.colorCounter=0===b?--this.colorCounter:++this.colorCounter;if(this.colorCounter>this.colorNames.length-1||0>this.colorCounter)this.colorCounter=1===b?0:this.colorNames.length-1;this.setColorScheme(this.colorCounter)},modFontSize:function(b){this.fontSize+=b;term.setOption("fontSize",this.fontSize);document.getElementById("currentFontSize").innerHTML=
transport.settings.fontSize+"px";fitAddon.fit();transport.auth.mod_pty("window-change",term.cols,term.rows)},modTerm:function(b,k){b?term.resize(term.cols,k):term.resize(k,term.rows);transport.auth.mod_pty("window-change",term.cols,term.rows)},setNetTraffic:function(b,k){if(this.sidenavElementState){switch(!0){case 1024>b:b+="Bytes";break;case 1024<=b&&1048576>b:b=(b/1024).toFixed(3)+"KB";break;case 1048576<=b&&1073741824>b:b=(b/1048576).toFixed(3)+"MB";break;default:b=(b/1073741824).toFixed(3)+"GB"}element=
!0===k?this.rxElement:this.txElement;element.innerHTML=b}}};var ws,transport,term=null,fitAddon=null,wsproxyEncoding=null;function ab2str(b){return String.fromCharCode.apply(null,new Uint8Array(b))}function str2ab(b){for(var k=new ArrayBuffer(1*b.length),h=new Uint8Array(k),a=0,f=b.length;a<f;a++)h[a]=b.charCodeAt(a);return k}function setProxyEncoding(b){wsproxyEncoding=b}
window.msCrypto&&(window.crypto={},window.crypto.getRandomValues=function(b){return window.msCrypto.getRandomValues(b)},Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}));var resizeInterval;
window.onload=function(){document.body.innerHTML+='<div id="settingsNav" class="sidenav">\n\t\t\t\t\t\t\t\t\t<a href="javascript:;" class="closebtn" onclick="toggleNav(0)">&times;</a>\n\t\t\t\t\t\t\t\t\t<span class="title large">Terminal Options</span>\n\t\t\t\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:20px">Font Size</span>\n\t\t\t\t\t\t\t\t\t<a class="leftarrow" href="javascript:;" onclick="transport.settings.modFontSize(-1)"><--</a>\n\t\t\t\t\t\t\t\t\t<span class="middle" id="currentFontSize">16px</span>\n\t\t\t\t\t\t\t\t\t<a class="rightarrow" href="javascript:;" onclick="transport.settings.modFontSize(1)">--\x3e</a>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:40px">Terminal Size</span>\n\t\t\t\t\t\t\t\t\t<span class="leftarrow">Cols:\n\t\t\t\t\t\t\t\t\t\t<input type="number" id="termCols" min="5" oninput="transport.settings.modTerm(0, this.value)">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class="rightarrow">Rows:\n\t\t\t\t\t\t\t\t\t\t<input type="number" id="termRows" min="5" oninput="transport.settings.modTerm(1, this.value)">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:60px;">Local Echo</span>\n\t\t\t\t\t\t\t\t\t<a class="leftarrow" href="javascript:;" onclick="transport.settings.setLocalEcho(-1)"><--</a>\n\t\t\t\t\t\t\t\t\t<a class="rightarrow" href="javascript:;" onclick="transport.settings.setLocalEcho(1)">--\x3e</a>\n\t\t\t\t\t\t\t\t\t<div class="fileUpload btn btn-primary nomargin">\n\t\t\t\t\t\t\t\t\t\t<span class="tooltiptext" style="visibility:visible;" id="autoEchoState">State: Enabled</span>\n\t\t\t\t\t\t\t\t\t\t<span class="middle" id="currentLEcho">Force Off</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:50px">Colours</span>\n\t\t\t\t\t\t\t\t\t<a class="leftarrow" href="javascript:;" onclick="transport.settings.cycleColorSchemes(0)"><--</a>\n\t\t\t\t\t\t\t\t\t<span class="middle" id="currentColor">Monokai</span>\n\t\t\t\t\t\t\t\t\t<a class="rightarrow" href="javascript:;" onclick="transport.settings.cycleColorSchemes(1)">--\x3e</a>\n\t\t\t\t\t\t\t\t\t<div class="fileUpload btn btn-primary">\n\t\t\t\t\t\t\t\t\t\t<span class="tooltiptext">Format: Xresources</span>\n\t\t\t\t\t\t\t\t\t\t<span class="middle" style="width:220px;">Upload</span>\n\t\t\t\t\t\t\t\t\t\t<input type="file" title=" " id="Xresources" class="upload" onchange="transport.settings.importXresources()" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:20px;">Keep Alive</span>\n\t\t\t\t\t\t\t\t\t<div class="fileUpload btn btn-primary">\n\t\t\t\t\t\t\t\t\t\t<span class="tooltiptext">0 to disable</span>\n\t\t\t\t\t\t\t\t\t\t<input type="number" class="large" id="keepAlive" onchange="transport.settings.setKeepAlive(this.value);" placeholder="0">\n\t\t\t\t\t\t\t\t\t\t<span style="font-size:16px;"> seconds</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:20px;">Network Traffic</span>\n\t\t\t\t\t\t\t\t\t<div class="netTraffic">\n\t\t\t\t\t\t\t\t\t\t<span class="leftarrow brightgreen">rx: <span id="rxTraffic"></span></span>\n\t\t\t\t\t\t\t\t\t\t<span class="rightarrow brightyellow">tx: <span id="txTraffic"></span></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id="hostKey" style="display: none;">\n\t\t\t\t\t\t\t\t        <span class="title" style="padding-top:20px;">Host Key</span>\n\t\t\t\t\t\t\t\t        <span id="hostKeyImg" class="hostKeyImg"></span>\n\t\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span id="gear" class="gear" style="visibility:visible;" onclick="toggleNav(250)">&#9881</span>';startSSHy()};
window.onresize=function(){clearTimeout(resizeInterval);resizeInterval=setTimeout(resize,400)};window.onbeforeunload=function(){(ws||transport)&&transport.disconnect()};function resize(){term&&(fitAddon.fit(),transport.auth.mod_pty("window-change",term.cols,term.rows),document.getElementById("termCols").value=term.cols,document.getElementById("termRows").value=term.rows)}
function toggleNav(b){document.getElementById("settingsNav").style.width=b;if(transport.settings.sidenavElementState=b)transport.settings.setNetTraffic(transport.parceler.recieveData,!0),transport.settings.setNetTraffic(transport.parceler.transmitData,!1);b=document.getElementById("gear").style;b.visibility="hidden"===b.visibility?"visible":"hidden"}
function startSSHy(){document.title="SSHy Client";"binary"!=wsproxyEncoding&&(wsproxyEncoding="base64");"binary"==wsproxyEncoding?(ws=new WebSocket(wsproxyURL),ws.binaryType="arraybuffer"):ws=new WebSocket(wsproxyURL,"base64");ws.onopen=function(b){transport=new SSHyClient.Transport(ws);transport.settings.rsaCheckEnabled=!1};ws.onmessage=function(b){"binary"==wsproxyEncoding?transport.parceler.handle(ab2str(b.data)):transport.parceler.handle(atob(b.data))};ws.onclose=function(b){term?transport.closing||
(term.write("\n\n\rWebsocket connection to "+transport.auth.hostname+" was unexpectedly closed."),transport.settings.keepAliveInterval||term.write("\n\n\rThis was likely caused by he remote SSH server timing out the session due to inactivity.\r\n- Session Keep Alive interval can be set in the settings to prevent this behaviour.")):(termInit(),term.write("WebSocket connection failed: Error in connection establishment: code "+b.code))};ws.sendB64=function(b){"binary"==wsproxyEncoding?this.send(str2ab(b)):
this.send(btoa(b));transport.parceler.transmitData+=b.length;transport.settings.setNetTraffic(transport.parceler.transmitData,!1)}}function termInit(){term=new Terminal({});fitAddon=new FitAddon;term.loadAddon(fitAddon);term.open(document.getElementById("terminal"),!0);fitAddon.fit();term.focus();document.getElementById("termCols").value=term.cols;document.getElementById("termRows").value=term.rows;transport.settings.setColorScheme(1)}
function startxtermjs(){termInit();transport.auth.authenticated||term.write("Login as: ");term.onData(function(b){if(ws&&transport&&transport.auth.authenticated)if(5E3<b.length){b=splitSlice(b);for(var k=0;k<b.length;k++)transport.expect_key(b[k])}else transport.expect_key(b)});term.attachCustomKeyEventHandler(function(b){if("keydown"==b.type){if(!ws||!transport||5<=transport.auth.failedAttempts||transport.auth.awaitingAuthentication)return!1;var k=b.char&&1==b.char.length?b.char:b.key;if(1==k.length&&
b.shiftKey&&b.ctrlKey&&"V"==b.key)return!1;if(!(transport.auth.authenticated||1<k.length&&13!=b.keyCode&&8!=b.keyCode||b.altKey||b.ctrlKey||b.metaKey)){switch(b.keyCode){case 8:void 0===transport.auth.termPassword?0<transport.auth.termUsername.length&&(term.write("\b \b"),transport.auth.termUsername=transport.auth.termUsername.slice(0,transport.auth.termUsername.length-1)):transport.auth.termPassword=transport.auth.termPassword.slice(0,transport.auth.termPassword.length-1);break;case 13:void 0===
transport.auth.termPassword?(term.write("\n\r"+transport.auth.termUsername+"@"+transport.auth.hostname+"'s password:"),transport.auth.termPassword=""):(term.write("\n\r"),transport.auth.ssh_connection());break;default:void 0===transport.auth.termPassword?(transport.auth.termUsername+=k,term.write(k)):transport.auth.termPassword+=k}return!1}}})};SSHyClient.Transport=function(b,k){this.local_version="SSH-2.0-SSHyClient";this.remote_version="";this.remote_kex_message=this.local_kex_message=null;this.preferred_algorithms="diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha256,diffie-hellman-group14-sha1,diffie-hellman-group1-sha256,diffie-hellman-group1-sha1 ssh-rsa aes128-ctr hmac-sha2-256,hmac-sha1 none ".split(" ");this.preferred_hash=this.preferred_mac=this.preferred_kex=null;this.parceler=
new SSHyClient.parceler(b,this);this.auth=new SSHyClient.auth(this.parceler);this.settings=void 0===k?new SSHyClient.settings:k;this.lastKey="";this.closing=!1};
SSHyClient.Transport.prototype={kex_info:{"diffie-hellman-group1-sha1":function(b){return new SSHyClient.kex.DiffieHellman(b,1,"SHA-1")},"diffie-hellman-group14-sha1":function(b){return new SSHyClient.kex.DiffieHellman(b,14,"SHA-1")},"diffie-hellman-group-exchange-sha1":function(b){return new SSHyClient.kex.DiffieHellman(b,void 0,"SHA-1")},"diffie-hellman-group1-sha256":function(b){return new SSHyClient.kex.DiffieHellman(b,1,"SHA-256")},"diffie-hellman-group14-sha256":function(b){return new SSHyClient.kex.DiffieHellman(b,
14,"SHA-256")},"diffie-hellman-group-exchange-sha256":function(b){return new SSHyClient.kex.DiffieHellman(b,void 0,"SHA-256")}},mac_info:{"hmac-sha1":function(b){b.parceler.hmacSHAVersion="SHA-1";b.preferred_hash=20},"hmac-sha2-256":function(b){b.parceler.hmacSHAVersion="SHA-256";b.preferred_hash=32}},handler_table:{0:function(b,k){b.parceler.socket.sendB64(b.local_version+"\r\n");b.remote_version=k.slice(0,k.length-2);b.send_kex_init()},1:function(b,k){b.disconnect()},2:function(b,k){},3:function(b,
k){},6:function(b,k){"ssh-userauth"==(new SSHyClient.Message(k.slice(1))).get_string()&&b.auth.ssh_connection()},20:function(b,k){b.parse_kex_reply(k);b.remote_kex_message=k;b.preferred_kex.start()},21:function(b){b.activate_encryption()},31:function(b,k){b.preferred_kex.parse_reply(31,k.slice(1))},33:function(b,k){b.preferred_kex.parse_reply(33,k.slice(1))},51:function(b,k){b.auth.awaitingAuthentication=!1;b.auth.authFailure()},52:function(b,k){b.auth.authenticated=!0;b.auth.awaitingAuthentication=
!1;b.auth.auth_success(!0)},80:function(b,k){},91:function(b,k){b.auth.channelOpened=!0;resize();b.auth.mod_pty("pty-req",term.cols,term.rows,"xterm")},93:function(b,k){},94:function(b,k){k=k.slice(9);if(b.settings.localEcho&&(b.settings.testShell(k),b.settings.parseLocalEcho(k),b.lastKey)){if(k==b.lastKey.substring(0,1)){b.lastKey=b.lastKey.slice(1);return}b.lastKey=b.lastKey.slice(1);term.write("\b")}term.write(fromUtf8(k))},96:function(b,k){},97:function(b,k){b.disconnect()},98:function(b,k){}},
winAdjust:function(){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_WINDOW_ADJUST));b.add_int(0);b.add_int(SSHyClient.WINDOW_SIZE);this.send_packet(b.toString());this.parceler.windowSize=SSHyClient.WINDOW_SIZE},disconnect:function(b){this.closing=!0;b=void 0===b?11:b;var k=new SSHyClient.Message;k.add_bytes(String.fromCharCode(SSHyClient.MSG_DISCONNECT));k.add_int(b);this.send_packet(k.toString());ws.close();term.write("\r\nConnection to "+this.auth.hostname+" closed. Code - "+
b)},keepAlive:function(){if(3!==ws.readyState){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_IGNORE));b.add_string("");transport.send_packet(b.toString())}},cut_padding:function(b){return b.substring(1,b.length-b[0].charCodeAt(0))},send_packet:function(b){this.parceler.send(b)},send_kex_init:function(){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_KEX_INIT));b.add_bytes(read_rng(16));b.add_string(this.preferred_algorithms[0]);b.add_string(this.preferred_algorithms[1]);
for(var k=2;6>k;k++)b.add_string(this.preferred_algorithms[k]),b.add_string(this.preferred_algorithms[k]);b.add_boolean(!1);b.add_int(0);this.local_kex_message=b=b.toString();this.send_packet(b)},parse_kex_reply:function(b){b=new SSHyClient.Message(b);b.get_bytes(17);var k=filter(this.preferred_algorithms[0],b.get_string().split(",")),h=filter(this.preferred_algorithms[1],b.get_string().split(","));b.get_string();var a=filter(this.preferred_algorithms[2],b.get_string().split(","));b.get_string();
b=filter(this.preferred_algorithms[3],b.get_string().split(","));if(!(k&&h&&a&&b))throw"Chosen Algs = kex="+k+", keys="+h+", cipher="+a+", mac="+b;this.preferred_kex=this.kex_info[k](this);this.preferred_mac=this.mac_info[b](this)},generate_key:function(b,k){var h=new SSHyClient.Message;h.add_mpint(SSHyClient.kex.K);h.add_bytes(SSHyClient.kex.H);h.add_bytes(b);h.add_bytes(SSHyClient.kex.sessionId);return"SHA-1"==this.preferred_kex.SHAVersion?(new SSHyClient.hash.SHA1(h.toString())).digest().substring(0,
k):(new SSHyClient.hash.SHA256(h.toString())).digest().substring(0,k)},activate_encryption:function(){this.parceler.block_size=16;this.parceler.macSize=this.preferred_hash;this.parceler.outbound_enc_iv=this.generate_key("A",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.outbound_enc_key=this.generate_key("C",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.outbound_mac_key=this.generate_key("E",this.parceler.macSize,this.preferred_kex.SHAVersion);this.parceler.outbound_cipher=
new SSHyClient.crypto.AES(this.parceler.outbound_enc_key,SSHyClient.AES_CTR,this.parceler.outbound_enc_iv,new SSHyClient.crypto.counter(8*this.parceler.block_size,inflate_long(this.parceler.outbound_enc_iv)));this.parceler.inbound_enc_iv=this.generate_key("B",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.inbound_enc_key=this.generate_key("D",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.inbound_mac_key=this.generate_key("F",this.parceler.macSize,this.preferred_kex.SHAVersion);
this.parceler.inbound_cipher=new SSHyClient.crypto.AES(this.parceler.inbound_enc_key,SSHyClient.AES_CTR,this.parceler.inbound_enc_iv,new SSHyClient.crypto.counter(8*this.parceler.block_size,inflate_long(this.parceler.inbound_enc_iv)));this.parceler.encrypting=!0;this.auth.request_auth()},handle_dec:function(b){b=this.cut_padding(b);try{this.handler_table[b.substring(0,1).charCodeAt(0)](this,b)}catch(k){console.log(k),console.log("Error! code - "+b.substring(0,1).charCodeAt(0)+" does not exist!")}},
str_to_bytes:function(b){return unescape(encodeURIComponent(b))},expect_key:function(b){if(b){var k=new SSHyClient.Message;k.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_DATA));k.add_int(0);k.add_string(this.str_to_bytes(b.toString()));this.parceler.send(k)}},send_new_keys:function(b){b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_NEW_KEYS));this.send_packet(b)}};
